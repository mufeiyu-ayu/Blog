<!DOCTYPE html> <html lang=en-US dir=ltr> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>TypeScript | JiaJia</title> <meta name=description content=黑猫警长的笔记文档> <link rel="preload stylesheet" href=/doc/assets/style.a7a61d76.css as=style> <script type=module src=/doc/assets/app.ef335d49.js></script> <link rel=preload href=/doc/assets/inter-roman-latin.2ed14f66.woff2 as=font type=font/woff2 crossorigin=""> <link rel=modulepreload href=/doc/assets/chunks/framework.f8637b7f.js> <link rel=modulepreload href=/doc/assets/chunks/theme.cf0b8297.js> <link rel=modulepreload href=/doc/assets/chunks/typescript1.c7dad67e.js> <link rel=modulepreload href=/doc/assets/Web_Typescript_index.md.76145c4e.lean.js> <link rel=icon href="https://img0.baidu.com/it/u=3581145158,1358465378&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=320&amp;h=320"> <script id=check-dark-light>(()=>{var e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(e&&"auto"!==e?"dark"===e:a)&&document.documentElement.classList.add("dark")})()</script> </head> <body> <div id=app><div class=Layout data-v-36382ed6><!--[--><!--]--><!--[--><span tabindex=-1 data-v-c3508ec8></span><a href=#VPContent class="VPSkipLink visually-hidden" data-v-c3508ec8> Skip to content </a><!--]--><!----><header class=VPNav data-v-36382ed6 data-v-7c10a9e2><div class="VPNavBar has-sidebar" data-v-7c10a9e2 data-v-fd660878><div class=container data-v-fd660878><div class=title data-v-fd660878><div class="VPNavBarTitle has-sidebar" data-v-fd660878 data-v-9cb98dab><a class=title href=/doc/ data-v-9cb98dab><!--[--><!--]--><!----><!--[-->Ayu<!--]--><!--[--><!--]--></a></div></div><div class=content data-v-fd660878><div class=curtain data-v-fd660878></div><div class=content-body data-v-fd660878><!--[--><!--]--><div class="VPNavBarSearch search" style=--vp-meta-key:&#39 data-v-fd660878><!--[--><!----><div id=local-search><button type=button class="DocSearch DocSearch-Button" aria-label=Search><span class=DocSearch-Button-Container><svg class=DocSearch-Search-Icon width=20 height=20 viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round></path></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys><kbd class=DocSearch-Button-Key></kbd><kbd class=DocSearch-Button-Key>K</kbd></span></button></div><!--]--></div><nav aria-labelledby=main-nav-aria-label class="VPNavBarMenu menu" data-v-fd660878 data-v-492ea56d><span id=main-nav-aria-label class=visually-hidden data-v-492ea56d>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href=/doc/Web/ tabindex=0 data-v-492ea56d data-v-2781b5e7><!--[--><span data-v-2781b5e7>前端</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href=/doc/Page/ tabindex=0 data-v-492ea56d data-v-2781b5e7><!--[--><span data-v-2781b5e7>后端</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-fd660878 data-v-98566150><button class="VPSwitch VPSwitchAppearance" type=button role=switch title="toggle dark mode" aria-checked=false data-v-98566150 data-v-288cbc95 data-v-b60171c1><span class=check data-v-b60171c1><span class=icon data-v-b60171c1><!--[--><svg xmlns=http://www.w3.org/2000/svg aria-hidden=true focusable=false viewbox="0 0 24 24" class=sun data-v-288cbc95><path d=M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z></path><path d=M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z></path><path d=M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z></path><path d=M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z></path><path d=M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z></path><path d=M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z></path><path d=M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z></path><path d=M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z></path><path d=M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z></path></svg><svg xmlns=http://www.w3.org/2000/svg aria-hidden=true focusable=false viewbox="0 0 24 24" class=moon data-v-288cbc95><path d=M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-fd660878 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href=https://github.com/mufeiyu-ayu aria-label=github target=_blank rel=noopener data-v-ee7a9424 data-v-a94e74d9><svg role=img viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-fd660878 data-v-608cba8b data-v-473f4f87><button type=button class=button aria-haspopup=true aria-expanded=false aria-label="extra navigation" data-v-473f4f87><svg xmlns=http://www.w3.org/2000/svg aria-hidden=true focusable=false viewbox="0 0 24 24" class=icon data-v-473f4f87><circle cx=12 cy=12 r=2></circle><circle cx=19 cy=12 r=2></circle><circle cx=5 cy=12 r=2></circle></svg></button><div class=menu data-v-473f4f87><div class=VPMenu data-v-473f4f87 data-v-97491713><!----><!--[--><!--[--><!----><div class=group data-v-608cba8b><div class="item appearance" data-v-608cba8b><p class=label data-v-608cba8b>Appearance</p><div class=appearance-action data-v-608cba8b><button class="VPSwitch VPSwitchAppearance" type=button role=switch title="toggle dark mode" aria-checked=false data-v-608cba8b data-v-288cbc95 data-v-b60171c1><span class=check data-v-b60171c1><span class=icon data-v-b60171c1><!--[--><svg xmlns=http://www.w3.org/2000/svg aria-hidden=true focusable=false viewbox="0 0 24 24" class=sun data-v-288cbc95><path d=M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z></path><path d=M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z></path><path d=M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z></path><path d=M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z></path><path d=M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z></path><path d=M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z></path><path d=M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z></path><path d=M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z></path><path d=M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z></path></svg><svg xmlns=http://www.w3.org/2000/svg aria-hidden=true focusable=false viewbox="0 0 24 24" class=moon data-v-288cbc95><path d=M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z></path></svg><!--]--></span></span></button></div></div></div><div class=group data-v-608cba8b><div class="item social-links" data-v-608cba8b><div class="VPSocialLinks social-links-list" data-v-608cba8b data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href=https://github.com/mufeiyu-ayu aria-label=github target=_blank rel=noopener data-v-ee7a9424 data-v-a94e74d9><svg role=img viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type=button class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded=false aria-controls=VPNavScreen data-v-fd660878 data-v-5dea55bf><span class=container data-v-5dea55bf><span class=top data-v-5dea55bf></span><span class=middle data-v-5dea55bf></span><span class=bottom data-v-5dea55bf></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-36382ed6 data-v-eef76b70><button class=menu aria-expanded=false aria-controls=VPSidebarNav data-v-eef76b70><svg xmlns=http://www.w3.org/2000/svg aria-hidden=true focusable=false viewbox="0 0 24 24" class=menu-icon data-v-eef76b70><path d=M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z></path><path d=M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z></path><path d=M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z></path><path d=M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z></path></svg><span class=menu-text data-v-eef76b70>Menu</span></button><div class=VPLocalNavOutlineDropdown style=--vp-vh:0px data-v-eef76b70 data-v-1b525709><button data-v-1b525709>Return to top</button><!----></div></div><aside class=VPSidebar data-v-36382ed6 data-v-c3f8b67a><div class=curtain data-v-c3f8b67a></div><nav class=nav id=VPSidebarNav aria-labelledby=sidebar-aria-label tabindex=-1 data-v-c3f8b67a><span class=visually-hidden id=sidebar-aria-label data-v-c3f8b67a> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class=group data-v-c3f8b67a><section class="VPSidebarItem level-0" data-v-c3f8b67a data-v-1cde40c8><div class=item role=button tabindex=0 data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><h2 class=text data-v-1cde40c8>Web</h2><!----></div><div class=items data-v-1cde40c8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/ data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>前言</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/Tagml/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>HTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/Css/css.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/JavaScript/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>JavaScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/Typescript/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>TypeScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/Vue/Vue.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>Vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/uniapp/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>uniapp</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/WSL/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>WSL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/WebBuild/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>前端工程化</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class=group data-v-c3f8b67a><section class="VPSidebarItem level-0" data-v-c3f8b67a data-v-1cde40c8><div class=item role=button tabindex=0 data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><h2 class=text data-v-1cde40c8>源码学习</h2><!----></div><div class=items data-v-1cde40c8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/SourceCode/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>手搓element-plus</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class=group data-v-c3f8b67a><section class="VPSidebarItem level-0" data-v-c3f8b67a data-v-1cde40c8><div class=item role=button tabindex=0 data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><h2 class=text data-v-1cde40c8>工具</h2><!----></div><div class=items data-v-1cde40c8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/Git/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>Git</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class=group data-v-c3f8b67a><section class="VPSidebarItem level-0" data-v-c3f8b67a data-v-1cde40c8><div class=item role=button tabindex=0 data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><h2 class=text data-v-1cde40c8>公司学习清单</h2><!----></div><div class=items data-v-1cde40c8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1cde40c8 data-v-1cde40c8><div class=item data-v-1cde40c8><div class=indicator data-v-1cde40c8></div><a class="VPLink link link" href=/doc/Web/StudyList/index.html data-v-1cde40c8><!--[--><p class=text data-v-1cde40c8>2023-3</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id=VPContent data-v-36382ed6 data-v-3cfaefff><div class="VPDoc has-sidebar has-aside" data-v-3cfaefff data-v-e521b9a4><!--[--><!--]--><div class=container data-v-e521b9a4><div class=aside data-v-e521b9a4><div class=aside-curtain data-v-e521b9a4></div><div class=aside-container data-v-e521b9a4><div class=aside-content data-v-e521b9a4><div class=VPDocAside data-v-e521b9a4 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><!--[--><div style=margin-bottom:6px;color:#b0b0b0;font-size:14px data-v-a4163834></div><!--[--><div role=tree class="ant-tree ant-tree-icon-hide more css-hkh161" style=""><!--[--><!----><div><input style=width:0;height:0;display:flex;overflow:hidden;opacity:0;border:0;padding:0;margin:0 tabindex=0 value aria-label="for screen reader"></div><div class=ant-tree-treenode aria-hidden=true style=position:absolute;pointer-events:none;visibility:hidden;height:0;overflow:hidden><div class=ant-tree-indent><div class=ant-tree-indent-unit></div></div></div><div style=background-color:#fff;position:relative class=ant-tree-list><div class=ant-tree-list-holder style=""><div style=""><div style=display:flex;flex-direction:column class=ant-tree-list-holder-inner><!--[--><!--]--></div></div></div><!----></div><!--]--></div><!--]--><!--]--><!--[--><!--]--><div class=spacer data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class=content data-v-e521b9a4><div class=content-container data-v-e521b9a4><!--[--><!--]--><!----><main class=main data-v-e521b9a4><div style=position:relative class="vp-doc _doc_Web_Typescript_index" data-v-e521b9a4><div><h1 id=typescript tabindex=-1>TypeScript <a class=header-anchor href=#typescript aria-label="Permalink to &quot;TypeScript&quot;">​</a></h1><p><a href=https://www.typescriptlang.org/zh/ target=_blank rel=noreferrer>官方文档</a></p><p><img src=/doc/images/typescript1.jpg alt=image></p><h2 id=快速上手-typescript tabindex=-1>快速上手 typescript <a class=header-anchor href=#快速上手-typescript aria-label="Permalink to &quot;快速上手 typescript&quot;">​</a></h2><h3 id=typescript-的发展历史 tabindex=-1>TypeScript 的发展历史 <a class=header-anchor href=#typescript-的发展历史 aria-label="Permalink to &quot;TypeScript 的发展历史&quot;">​</a></h3><ul><li>2012-10：微软发布了 TypeScript 第一个版本（0.8），此前已经在微软内部开发了两年。</li><li>2014-04：TypeScript 发布了 1.0 版本。</li><li>2014-10：Angular 发布了 2.0 版本，它是一个基于 TypeScript 开发的前端框架。</li><li>2015-01：ts-loader 发布，webpack 可以编译 TypeScript 文件了。</li><li>2015-04：微软发布了 Visual Studio Code，它内置了对 TypeScript 语言的支持，它自身也是用 TypeScript 开发的。</li><li>2016-05：<code>@types/react</code> 发布，TypeScript 可以开发 React 应用了。</li><li>2016-05：<code>@types/node</code> 发布，TypeScript 可以开发 Node.js 应用了。</li><li>2016-09：TypeScript 发布了 2.0 版本。</li><li>2018-06：TypeScript 发布了 3.0 版本。</li><li>2019-02：TypeScript 宣布由官方团队来维护 typescript-eslint，以支持在 TypeScript 文件中运行 ESLint 检查。</li><li>2020-05：Deno 发布了 1.0 版本，它是一个 JavaScript 和 TypeScript 运行时。</li><li>2020-08：TypeScript 发布了 4.0 版本。</li><li>2020-09：Vue 发布了 3.0 版本，官方支持 TypeScript。</li></ul><h1 id=什么是-typescript tabindex=-1>什么是 TypeScript <a class=header-anchor href=#什么是-typescript aria-label="Permalink to &quot;什么是 TypeScript&quot;">​</a></h1><blockquote><p>Typed JavaScript at Any Scale.<br>添加了类型系统的 JavaScript，适用于任何规模的项目。</p></blockquote><p>以上描述是官网对于 TypeScript 的定义。</p><p>它强调了 TypeScript 的两个最重要的特性—<code>类型系统</code>、适用于任何规模。</p><h3 id=typescript-的特性 tabindex=-1>TypeScript 的特性 <a class=header-anchor href=#typescript-的特性 aria-label="Permalink to &quot;TypeScript 的特性&quot;">​</a></h3><h4 id=类型系统 tabindex=-1>类型系统 <a class=header-anchor href=#类型系统 aria-label="Permalink to &quot;类型系统&quot;">​</a></h4><p>从 TypeScript 的名字就可以看出来，「<strong>类型</strong>」是其最核心的特性。</p><p>我们知道，JavaScript 是一门非常灵活的编程语言：</p><ul><li>它没有类型约束，一个变量可能初始化时是字符串，过一会儿又被赋值为数字。</li><li>由于隐式类型转换的存在，有的变量的类型很难在运行前就确定。</li><li>基于原型的面向对象编程，使得原型上的属性或方法可以在运行时被修改。</li><li>函数是 JavaScript 中的一等公民，可以赋值给变量，也可以当作参数或返回值。</li></ul><p>这种灵活性就像一把双刃剑，一方面使得 JavaScript 蓬勃发展，无所不能，从 2013 年开始就一直蝉联最普遍使用的编程语言排行榜冠军；另一方面也使得它的<code>**代码质量参差不齐，维护成本高，运行时错误多**</code>。</p><p>而 TypeScript 的类型系统，在很大程度上弥补了 JavaScript 的缺点。</p><h6 id=typescript-是静态类型 tabindex=-1>TypeScript 是静态类型 <a class=header-anchor href=#typescript-是静态类型 aria-label="Permalink to &quot;TypeScript 是静态类型&quot;">​</a></h6><p>类型系统按照「类型检查的时机」来分类，可以分为动态类型和静态类型。</p><p>动态类型是指在运行时才会进行类型检查，这种语言的类型错误往往会导致运行时错误。JavaScript 是一门解释型语言，没有编译阶段，所以它是动态类型，以下这段代码在运行时才会报错：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> foo </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>1</span></span>
<span class=line><span style=color:#e1e4e8>foo.</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// Uncaught TypeError: foo.split is not a function</span></span>
<span class=line><span style=color:#6a737d>// 运行时会报错（foo.split 不是一个函数），造成线上 bug</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> foo </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>1</span></span>
<span class=line><span style=color:#24292e>foo.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// Uncaught TypeError: foo.split is not a function</span></span>
<span class=line><span style=color:#6a737d>// 运行时会报错（foo.split 不是一个函数），造成线上 bug</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>静态类型是指编译阶段就能确定每个变量的类型，这种语言的类型错误往往会导致语法错误。TypeScript 在运行前需要先编译为 JavaScript，而在编译阶段就会进行类型检查，所以 <strong>TypeScript 是静态类型</strong>，这段 TypeScript 代码在编译阶段就会报错了：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> foo </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>1</span></span>
<span class=line><span style=color:#e1e4e8>foo.</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// Property &#39;split&#39; does not exist on type &#39;number&#39;.</span></span>
<span class=line><span style=color:#6a737d>// 编译时会报错（数字没有 split 方法），无法通过编译</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> foo </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>1</span></span>
<span class=line><span style=color:#24292e>foo.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// Property &#39;split&#39; does not exist on type &#39;number&#39;.</span></span>
<span class=line><span style=color:#6a737d>// 编译时会报错（数字没有 split 方法），无法通过编译</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>你可能会奇怪，这段 TypeScript 代码看上去和 JavaScript 没有什么区别呀。</p><p>没错！大部分 JavaScript 代码都只需要经过少量的修改（或者完全不用修改）就变成 TypeScript 代码，这得益于 TypeScript 强大的类型推论，即使不去手动声明变量 <code>foo</code> 的类型，也能在变量初始化时自动推论出它是一个 <code>number</code> 类型。</p><p>完整的 TypeScript 代码是这样的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> foo</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>1</span></span>
<span class=line><span style=color:#e1e4e8>foo.</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// Property &#39;split&#39; does not exist on type &#39;number&#39;.</span></span>
<span class=line><span style=color:#6a737d>// 编译时会报错（数字没有 split 方法），无法通过编译</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> foo</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>1</span></span>
<span class=line><span style=color:#24292e>foo.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// Property &#39;split&#39; does not exist on type &#39;number&#39;.</span></span>
<span class=line><span style=color:#6a737d>// 编译时会报错（数字没有 split 方法），无法通过编译</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h6 id=typescript-是弱类型 tabindex=-1>TypeScript 是弱类型 <a class=header-anchor href=#typescript-是弱类型 aria-label="Permalink to &quot;TypeScript 是弱类型&quot;">​</a></h6><p>类型系统按照「是否允许隐式类型转换」来分类，可以分为强类型和弱类型。</p><p>以下这段代码不管是在 JavaScript 中还是在 TypeScript 中都是可以正常运行的，运行时数字 <code>1</code> 会被隐式类型转换为字符串 <code>&#39;1&#39;</code>，加号 <code>+</code> 被识别为字符串拼接，所以打印出结果是字符串 <code>&#39;11&#39;</code>。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;1&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// 打印出字符串 &#39;11&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;1&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// 打印出字符串 &#39;11&#39;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><p>TypeScript 是完全兼容 JavaScript 的，它不会修改 JavaScript 运行时的特性，所以<strong>它们都是弱类型</strong></p><blockquote><p>JavaScript 和 TypeScript 中不管加号两侧是什么类型，都可以通过隐式类型转换计算出一个结果，而不是报错。所以 JavaScript 和 TypeScript 都是弱类型。</p><p>虽然 TypeScript 不限制加号两侧的类型，但是我们可以借助 TypeScript 提供的类型系统，以及 ESLint 提供的代码检查功能，来限制加号两侧必须同为数字或同为字符串。这在一定程度上使得 TypeScript 向「强类型」更近一步了。当然，这种限制是可选的。</p></blockquote><p>这样的类型系统体现了 TypeScript 的核心设计理念：在完整保留 JavaScript 运行时行为的基础上，通过引入静态类型系统来提高代码的可维护性，减少可能出现的 bug。</p><h4 id=适用于任何规模 tabindex=-1>适用于任何规模 <a class=header-anchor href=#适用于任何规模 aria-label="Permalink to &quot;适用于任何规模&quot;">​</a></h4><p>TypeScript 非常适用于大型项目—这是显而易见的，类型系统可以为大型项目带来更高的可维护性，以及更少的 bug。</p><p>在中小型项目中推行 TypeScript 的最大障碍就是认为使用 TypeScript 需要写额外的代码，降低开发效率。但事实上，由于有[类型推论][]，大部分类型都不需要手动声明了。相反，TypeScript 增强了编辑器（IDE）的功能，包括代码补全、接口提示、跳转到定义、代码重构等，这在很大程度上提高了开发效率。而且 TypeScript 有近百个[编译选项][]，如果你认为类型检查过于严格，那么可以通过修改编译选项来降低类型检查的标准。</p><p>TypeScript 还可以和 JavaScript 共存。这意味着如果你有一个使用 JavaScript 开发的旧项目，又想使用 TypeScript 的特性，那么你不需要急着把整个项目都迁移到 TypeScript，你可以使用 TypeScript 编写新文件，然后在后续更迭中逐步迁移旧文件。如果一些 JavaScript 文件的迁移成本太高，TypeScript 也提供了一个方案，可以让你在不修改 JavaScript 文件的前提下，编写一个[类型声明文件][]，实现旧项目的渐进式迁移。</p><p>事实上，就算你从来没学习过 TypeScript，你也可能已经在不知不觉中使用到了 TypeScript，在 VSCode 编辑器中编写 JavaScript 时，代码补全和接口提示等功能就是通过 TypeScript Language Service 实现的：</p><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21696332/1675388965441-1e131ae3-6956-4074-a2be-7feeedb944c9.png#averageHue=%23a3ba9d&amp;clientId=uac7bc413-06e5-4&amp;id=ZNJ62&amp;originHeight=412&amp;originWidth=1632&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=94914&amp;status=done&amp;style=none&amp;taskId=u0101905b-be61-4a2b-b220-10dcf89a0ce&amp;title=" alt=image.png></p><p>一些第三方库原生支持了 TypeScript，在使用时就能获得代码补全了，比如 Vue 3.0：</p><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21696332/1675388965426-5b8c8ee5-ac88-4b87-833f-6b14123a7b63.png#averageHue=%23aeafad&amp;clientId=uac7bc413-06e5-4&amp;id=KjpQC&amp;originHeight=546&amp;originWidth=1650&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=108022&amp;status=done&amp;style=none&amp;taskId=u4bc1a825-777f-4218-9768-fd0932589d8&amp;title=" alt=image.png></p><p>有一些第三方库原生不支持 TypeScript，但是可以通过安装社区维护的类型声明库（比如通过运行 <code>npm install --save-dev @types/react</code> 来安装 React 的类型声明库）来获得代码补全能力——不管是在 JavaScript 项目中还是在 TypeScript 中项目中都是支持的：</p><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21696332/1675388965404-4329595e-c6ac-42f3-b3c2-7166c4a0dfe0.png#averageHue=%23acadab&amp;clientId=uac7bc413-06e5-4&amp;id=Qh244&amp;originHeight=542&amp;originWidth=1644&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=90182&amp;status=done&amp;style=none&amp;taskId=uaf90ca1d-28b6-4dae-813f-90bdfb32de7&amp;title=" alt=image.png></p><p>由此可见，TypeScript 的发展已经深入到前端社区的方方面面了，任何规模的项目都或多或少得到了 TypeScript 的支持。</p><h4 id=与标准同步发展 tabindex=-1>与标准同步发展 <a class=header-anchor href=#与标准同步发展 aria-label="Permalink to &quot;与标准同步发展&quot;">​</a></h4><p>TypeScript 的另一个重要的特性就是坚持与 ECMAScript 标准同步发展。</p><p>ECMAScript 是 JavaScript 核心语法的标准，自 2015 年起，每年都会发布一个新版本，包含一些新的语法。</p><p>一个新的语法从提案到变成正式标准，需要经历以下几个阶段：</p><ul><li>Stage 0：展示阶段，仅仅是提出了讨论、想法，尚未正式提案。</li><li>Stage 1：征求意见阶段，提供抽象的 API 描述，讨论可行性，关键算法等。</li><li>Stage 2：草案阶段，使用正式的规范语言精确描述其语法和语义。</li><li>Stage 3：候选人阶段，语法的设计工作已完成，需要浏览器、Node.js 等环境支持，搜集用户的反馈。</li><li>Stage 4：定案阶段，已准备好将其添加到正式的 ECMAScript 标准中。</li></ul><p>一个语法进入到 Stage 3 阶段后，TypeScript 就会实现它。一方面，让我们可以尽早的使用到最新的语法，帮助它进入到下一个阶段；另一方面，处于 Stage 3 阶段的语法已经比较稳定了，基本不会有语法的变更，这使得我们能够放心的使用它。</p><p>除了实现 ECMAScript 标准之外，TypeScript 团队也推进了诸多语法提案，比如可选链操作符（<code>?.</code>）、空值合并操作符（<code>??</code>）、Throw 表达式、正则匹配索引等。</p><h3 id=总结 tabindex=-1>总结 <a class=header-anchor href=#总结 aria-label="Permalink to &quot;总结&quot;">​</a></h3><ul><li>TypeScript 是添加了类型系统的 JavaScript，适用于任何规模的项目。</li><li>TypeScript 是一门静态类型、弱类型的语言。</li><li>TypeScript 是完全兼容 JavaScript 的，它不会修改 JavaScript 运行时的特性。</li><li>TypeScript 可以编译为 JavaScript，然后运行在浏览器、Node.js 等任何能运行 JavaScript 的环境中。</li><li>TypeScript 拥有很多编译选项，类型检查的严格程度由你决定。</li><li>TypeScript 可以和 JavaScript 共存，这意味着 JavaScript 项目能够渐进式的迁移到 TypeScript。</li><li>TypeScript 增强了编辑器（IDE）的功能，提供了代码补全、接口提示、跳转到定义、代码重构等能力。</li><li>TypeScript 拥有活跃的社区，大多数常用的第三方库都提供了类型声明。</li><li>TypeScript 与标准同步发展，符合最新的 ECMAScript 标准（stage 3）。</li></ul><h1 id=安装-typescript tabindex=-1>安装 TypeScript <a class=header-anchor href=#安装-typescript aria-label="Permalink to &quot;安装 TypeScript&quot;">​</a></h1><p>TypeScript 的命令行工具安装方法如下：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>bash</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>npm</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>install</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>-g</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>typescript</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>npm</span><span style=color:#24292e> </span><span style=color:#032f62>install</span><span style=color:#24292e> </span><span style=color:#005cc5>-g</span><span style=color:#24292e> </span><span style=color:#032f62>typescript</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>以上命令会在全局环境下安装 <code>tsc</code> 命令，安装完成之后，我们就可以在任何地方执行 <code>tsc</code> 命令了。</p><p>编译一个 TypeScript 文件很简单：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>bash</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>tsc</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>hello.ts</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>tsc</span><span style=color:#24292e> </span><span style=color:#032f62>hello.ts</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>我们约定使用 TypeScript 编写的文件以 <code>.ts</code> 为后缀，用 TypeScript 编写 React 时，以 <code>.tsx</code> 为后缀。</p><h3 id=编辑器 tabindex=-1>编辑器 <a class=header-anchor href=#编辑器 aria-label="Permalink to &quot;编辑器&quot;">​</a></h3><p>TypeScript 最大的优势之一便是增强了编辑器和 IDE 的功能，包括代码补全、接口提示、跳转到定义、重构等。</p><p>主流的编辑器都支持 TypeScript，这里我推荐使用 <a href=https://code.visualstudio.com/ target=_blank rel=noreferrer>Visual Studio Code</a>。</p><p>它是一款开源，跨终端的轻量级编辑器，内置了对 TypeScript 的支持。</p><p>另外它本身也是<a href=https://github.com/Microsoft/vscode/ target=_blank rel=noreferrer>用 TypeScript 编写的</a>。</p><p>下载安装：<a href=https://code.visualstudio.com/ target=_blank rel=noreferrer>https://code.visualstudio.com/</a></p><h1 id=hello-typescript tabindex=-1>Hello TypeScript <a class=header-anchor href=#hello-typescript aria-label="Permalink to &quot;Hello TypeScript&quot;">​</a></h1><p>我们从一个简单的例子开始。</p><p>将以下代码复制到 <code>hello.ts</code> 中：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>person</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Hello, &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> person</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> user </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(user))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(</span><span style=color:#e36209>person</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Hello, &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> person</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> user </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(user))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>然后执行</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>bash</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>tsc</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>hello.ts</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>tsc</span><span style=color:#24292e> </span><span style=color:#032f62>hello.ts</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>这时候会生成一个编译好的文件 <code>hello.js</code>：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>person</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Hello, &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> person</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> user </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(user))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(</span><span style=color:#e36209>person</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Hello, &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> person</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> user </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(user))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>在 TypeScript 中，我们使用 <code>:</code> 指定变量的类型，<code>:</code> 的前后有没有空格都可以。</p><p>上述例子中，我们用 <code>:</code> 指定 <code>person</code> 参数类型为 <code>string</code>。但是编译为 js 之后，并没有什么检查的代码被插入进来。</p><p>这是因为 <strong>TypeScript 只会在编译时对类型进行静态检查，如果发现有错误，编译的时候就会报错</strong>。而在运行时，与普通的 JavaScript 文件一样，不会对类型进行检查。</p><p>如果我们需要保证运行时的参数类型，还是得手动对类型进行判断：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>person</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> person </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;string&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Hello, &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> person</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>throw</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Error</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;person is not a string&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> user </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(user))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(</span><span style=color:#e36209>person</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> person </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;string&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Hello, &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> person</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>throw</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>Error</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;person is not a string&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> user </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(user))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><blockquote><p><code>let</code> 是 ES6 中的关键字，和 <code>var</code> 类似，用于定义一个局部变量，可以参阅 <a href=http://es6.ruanyifeng.com/#docs/let target=_blank rel=noreferrer>let 和 const 命令</a>。</p></blockquote><p>下面尝试把这段代码编译一下：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>person</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Hello, &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> person</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> user </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>0</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(user))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(</span><span style=color:#e36209>person</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Hello, &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> person</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> user </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>0</span><span style=color:#24292e>, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(user))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>编辑器中会提示错误，编译的时候也会出错：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>bash</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>hello.ts:6:22</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>-</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>error</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>TS2345:</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>Argument</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>of</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>type</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;number[]&#39;</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>is</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>not</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>assignable</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>to</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>parameter</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>of</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>type</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;string&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>hello.ts:6:22</span><span style=color:#24292e> </span><span style=color:#032f62>-</span><span style=color:#24292e> </span><span style=color:#032f62>error</span><span style=color:#24292e> </span><span style=color:#032f62>TS2345:</span><span style=color:#24292e> </span><span style=color:#032f62>Argument</span><span style=color:#24292e> </span><span style=color:#032f62>of</span><span style=color:#24292e> </span><span style=color:#032f62>type</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;number[]&#39;</span><span style=color:#24292e> </span><span style=color:#032f62>is</span><span style=color:#24292e> </span><span style=color:#032f62>not</span><span style=color:#24292e> </span><span style=color:#032f62>assignable</span><span style=color:#24292e> </span><span style=color:#032f62>to</span><span style=color:#24292e> </span><span style=color:#032f62>parameter</span><span style=color:#24292e> </span><span style=color:#032f62>of</span><span style=color:#24292e> </span><span style=color:#032f62>type</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;string&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>但是还是生成了 js 文件：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>person</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Hello, &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> person</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> user </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>0</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>(user))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(</span><span style=color:#e36209>person</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Hello, &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> person</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> user </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>0</span><span style=color:#24292e>, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>(user))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>这是因为 <strong>TypeScript 编译的时候即使报错了，还是会生成编译结果</strong>，我们仍然可以使用这个编译之后的文件。</p><p>如果要在报错的时候终止 js 文件的生成，可以在 <code>tsconfig.json</code> 中配置 <code>noEmitOnError</code> 即可。关于 <code>tsconfig.json</code>，请参阅<a href=http://www.typescriptlang.org/docs/handbook/tsconfig-json.html target=_blank rel=noreferrer>官方手册</a>（<a href=https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/tsconfig.json.html target=_blank rel=noreferrer>中文版</a>）。</p><blockquote><p>下面一部分主要介绍 TypeScript 基础中的常用类型和一些基本概念，旨在让大家对 TypeScript 有个初步的理解。</p></blockquote><p><code>**总体来说，ts的学习主要在两点（学习定义类型、学习使用类型）**</code></p><h1 id=原始数据类型 tabindex=-1>原始数据类型 <a class=header-anchor href=#原始数据类型 aria-label="Permalink to &quot;原始数据类型&quot;">​</a></h1><p>JavaScript 的类型分为两种：原始数据类型（<a href=https://developer.mozilla.org/en-US/docs/Glossary/Primitive target=_blank rel=noreferrer>Primitive data types</a>）和对象类型（Object types）。</p><p>原始数据类型包括：布尔值、数值、字符串、<code>null</code>、<code>undefined</code> 以及 ES6 中的新类型 <code>[Symbol](http://es6.ruanyifeng.com/#docs/symbol)</code> 和 ES10 中的新类型 <code>[BigInt](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt)</code>。</p><p>主要介绍<strong>前五种</strong>原始数据类型在 TypeScript 中的应用。</p><h3 id=布尔值 tabindex=-1>布尔值 <a class=header-anchor href=#布尔值 aria-label="Permalink to &quot;布尔值&quot;">​</a></h3><p>布尔值是最基础的数据类型，在 TypeScript 中，使用 <code>boolean</code> 定义布尔值类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> isDone</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>false</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 编译通过</span></span>
<span class=line><span style=color:#6a737d>// 后面约定，未强调编译错误的代码片段，默认为编译通过</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> isDone</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>false</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 编译通过</span></span>
<span class=line><span style=color:#6a737d>// 后面约定，未强调编译错误的代码片段，默认为编译通过</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>注意，使用构造函数 <code>Boolean</code> 创造的对象<strong>不是</strong>布尔值：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> createdByNewBoolean</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Boolean</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;Boolean&#39; is not assignable to type &#39;boolean&#39;.</span></span>
<span class=line><span style=color:#6a737d>// &#39;boolean&#39; is a primitive, but &#39;Boolean&#39; is a wrapper object.</span></span>
<span class=line><span style=color:#6a737d>// Prefer using &#39;boolean&#39; when possible.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> createdByNewBoolean</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>Boolean</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;Boolean&#39; is not assignable to type &#39;boolean&#39;.</span></span>
<span class=line><span style=color:#6a737d>// &#39;boolean&#39; is a primitive, but &#39;Boolean&#39; is a wrapper object.</span></span>
<span class=line><span style=color:#6a737d>// Prefer using &#39;boolean&#39; when possible.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>事实上 <code>new Boolean()</code> 返回的是一个 <code>Boolean</code> 对象：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> createdByNewBoolean</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Boolean</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Boolean</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> createdByNewBoolean</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Boolean</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>Boolean</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>直接调用 <code>Boolean</code> 也可以返回一个 <code>boolean</code> 类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> createdByBoolean</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Boolean</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> createdByBoolean</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Boolean</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>在 TypeScript 中，<code>boolean</code> 是 JavaScript 中的基本类型，而 <code>Boolean</code> 是 JavaScript 中的构造函数。其他基本类型（除了 <code>null</code> 和 <code>undefined</code>）一样，不再赘述。</p><h3 id=数值 tabindex=-1>数值 <a class=header-anchor href=#数值 aria-label="Permalink to &quot;数值&quot;">​</a></h3><p>使用 <code>number</code> 定义数值类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> decLiteral</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>6</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> hexLiteral</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>0xf00d</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的二进制表示法</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> binaryLiteral</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>0b1010</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的八进制表示法</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> octalLiteral</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>0o744</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> notANumber</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>NaN</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> infinityNumber</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>Infinity</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> decLiteral</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>6</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> hexLiteral</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>0xf00d</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的二进制表示法</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> binaryLiteral</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>0b1010</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的八进制表示法</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> octalLiteral</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>0o744</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> notANumber</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>NaN</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> infinityNumber</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>Infinity</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>编译结果：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> decLiteral </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>6</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> hexLiteral </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>0xf00d</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的二进制表示法</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> binaryLiteral </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>10</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的八进制表示法</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> octalLiteral </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>484</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> notANumber </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>NaN</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> infinityNumber </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>Infinity</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> decLiteral </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>6</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> hexLiteral </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>0xf00d</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的二进制表示法</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> binaryLiteral </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>10</span></span>
<span class=line><span style=color:#6a737d>// ES6 中的八进制表示法</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> octalLiteral </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>484</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> notANumber </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>NaN</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> infinityNumber </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>Infinity</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>其中 <code>0b1010</code> 和 <code>0o744</code> 是 <a href=http://es6.ruanyifeng.com/#docs/number#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%92%8C%E5%85%AB%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%E6%B3%95 target=_blank rel=noreferrer>ES6 中的二进制和八进制表示法</a>，它们会被编译为十进制数字。</p><h3 id=字符串 tabindex=-1>字符串 <a class=header-anchor href=#字符串 aria-label="Permalink to &quot;字符串&quot;">​</a></h3><p>使用 <code>string</code> 定义字符串类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> myName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> myAge</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>25</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 模板字符串</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> sentence</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`Hello, my name is ${</span><span style=color:#e1e4e8>myName</span><span style=color:#9ecbff>}.</span></span>
<span class=line><span style=color:#9ecbff>I&#39;ll be ${</span><span style=color:#e1e4e8>myAge</span><span style=color:#9ecbff> </span><span style=color:#f97583>+</span><span style=color:#9ecbff> </span><span style=color:#79b8ff>1</span><span style=color:#9ecbff>} years old next month.`</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> myName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> myAge</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>25</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 模板字符串</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> sentence</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>`Hello, my name is ${</span><span style=color:#24292e>myName</span><span style=color:#032f62>}.</span></span>
<span class=line><span style=color:#032f62>I&#39;ll be ${</span><span style=color:#24292e>myAge</span><span style=color:#032f62> </span><span style=color:#d73a49>+</span><span style=color:#032f62> </span><span style=color:#005cc5>1</span><span style=color:#032f62>} years old next month.`</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>编译结果：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> myName </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> myAge </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#6a737d>// 模板字符串</span></span>
<span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> sentence </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;Hello, my name is &quot;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> myName </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;</span><span style=color:#fdaeb7;font-style:italic>.</span></span>
<span class=line><span style=color:#79b8ff>I</span><span style=color:#9ecbff>&#39;ll be &quot; + (myAge + 1) + &quot; years old next month.&quot;</span><span style=color:#fdaeb7;font-style:italic>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> myName </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> myAge </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>25</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#6a737d>// 模板字符串</span></span>
<span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> sentence </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;Hello, my name is &quot;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> myName </span><span style=color:#d73a49>+</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;</span><span style=color:#b31d28;font-style:italic>.</span></span>
<span class=line><span style=color:#005cc5>I</span><span style=color:#032f62>&#39;ll be &quot; + (myAge + 1) + &quot; years old next month.&quot;</span><span style=color:#b31d28;font-style:italic>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>其中 ``` 用来定义 <a href=http://es6.ruanyifeng.com/#docs/string#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2 target=_blank rel=noreferrer>ES6 中的模板字符串</a>，<code>${expr}</code> 用来在模板字符串中嵌入表达式。</p><h3 id="null-和-undefined" tabindex=-1>Null 和 Undefined <a class=header-anchor href="#null-和-undefined" aria-label="Permalink to &quot;Null 和 Undefined&quot;">​</a></h3><p>在 TypeScript 中，可以使用 <code>null</code> 和 <code>undefined</code> 来定义这两个原始数据类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> u</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> n</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>null</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>null</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> u</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> n</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>null</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>null</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><p>与 <code>void</code> 的区别是，<code>undefined</code> 和 <code>null</code> 是所有类型的子类型。也就是说 <code>undefined</code> 类型的变量，可以赋值给 <code>number</code> 类型的变量：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 这样不会报错</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> num</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span></span>
<span class=line><span style=color:#6a737d>// 这样也不会报错</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> u</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> num</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> u</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 这样不会报错</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> num</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span></span>
<span class=line><span style=color:#6a737d>// 这样也不会报错</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> u</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> num</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> u</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>而 <code>void</code> 类型的变量不能赋值给 <code>number</code> 类型的变量：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> u</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> num</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> u</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;void&#39; is not assignable to type &#39;number&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> u</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> num</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> u</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;void&#39; is not assignable to type &#39;number&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h1 id=对象的类型-接口 tabindex=-1>对象的类型(接口) <a class=header-anchor href=#对象的类型-接口 aria-label="Permalink to &quot;对象的类型(接口)&quot;">​</a></h1><p>在 TypeScript 中，我们使用接口（Interfaces）来定义对象的类型。</p><h3 id=什么是接口 tabindex=-1>什么是接口 <a class=header-anchor href=#什么是接口 aria-label="Permalink to &quot;什么是接口&quot;">​</a></h3><p>在面向对象语言中，接口（Interfaces）是一个很重要的概念，它是对行为的抽象，而具体如何行动需要由类（classes）去实现（implement）。</p><p>TypeScript 中的接口是一个非常灵活的概念，除了可用于<a href=http://ts.xcatliu.com/advanced/class-and-interfaces.html#%E7%B1%BB%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3 target=_blank rel=noreferrer>对类的一部分行为进行抽象</a>以外，也常用于对「对象的形状（Shape）」进行描述。</p><h3 id=简单的例子 tabindex=-1>简单的例子 <a class=header-anchor href=#简单的例子 aria-label="Permalink to &quot;简单的例子&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>上面的例子中，我们定义了一个接口 <code>Person</code>，接着定义了一个变量 <code>tom</code>，它的类型是 <code>Person</code>。这样，我们就约束了 <code>tom</code> 的结构必须和类型 <code>Person</code> 一致。</p><p>接口一般首字母大写。<a href="https://msdn.microsoft.com/en-us/library/8bc1fexb(v=vs.71).aspx" target=_blank rel=noreferrer>有的编程语言中会建议接口的名称加上 </a><code>[I](https://msdn.microsoft.com/en-us/library/8bc1fexb(v=vs.71).aspx)</code><a href="https://msdn.microsoft.com/en-us/library/8bc1fexb(v=vs.71).aspx" target=_blank rel=noreferrer> 前缀</a>。</p><p>定义的变量比接口少了一些属性是不允许的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(6,5): error TS2322: Type &#39;{ name: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Property &#39;age&#39; is missing in type &#39;{ name: string; }&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(6,5): error TS2322: Type &#39;{ name: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Property &#39;age&#39; is missing in type &#39;{ name: string; }&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br></div></div><p>多一些属性也是不允许的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(9,5): error TS2322: Type &#39;{ name: string; age: number; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Object literal may only specify known properties, and &#39;gender&#39; does not exist in type &#39;Person&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(9,5): error TS2322: Type &#39;{ name: string; age: number; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Object literal may only specify known properties, and &#39;gender&#39; does not exist in type &#39;Person&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br></div></div><p>可见，<strong>赋值的时候，变量的形状必须和接口的形状保持一致</strong>。</p><h3 id=可选属性 tabindex=-1>可选属性 <a class=header-anchor href=#可选属性 aria-label="Permalink to &quot;可选属性&quot;">​</a></h3><p>有时我们希望不要完全匹配一个形状（类型），那么可以用可选属性：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br></div></div><p>可选属性的含义是该属性可以不存在。</p><p>这时<strong>仍然不允许添加未定义的属性</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// examples/playground/index.ts(9,5): error TS2322: Type &#39;{ name: string; age: number; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Object literal may only specify known properties, and &#39;gender&#39; does not exist in type &#39;Person&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// examples/playground/index.ts(9,5): error TS2322: Type &#39;{ name: string; age: number; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Object literal may only specify known properties, and &#39;gender&#39; does not exist in type &#39;Person&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br></div></div><h3 id=任意属性 tabindex=-1>任意属性 <a class=header-anchor href=#任意属性 aria-label="Permalink to &quot;任意属性&quot;">​</a></h3><p>有时候我们希望一个接口允许有任意的属性，可以使用如下方式：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	[propName: string]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	[propName: string]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>使用 <code>[propName: string]</code> 定义了任意属性取 <code>string</code> 类型的值。</p><p>需要注意的是，<strong>一旦定义了任意属性，那么确定属性和可选属性的类型都必须是它的类型的子集</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	[propName: string]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(3,5): error TS2411: Property &#39;age&#39; of type &#39;number&#39; is not assignable to string index type &#39;string&#39;.</span></span>
<span class=line><span style=color:#6a737d>// index.ts(7,5): error TS2322: Type &#39;{ [x: string]: string | number; name: string; age: number; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Index signatures are incompatible.</span></span>
<span class=line><span style=color:#6a737d>//     Type &#39;string | number&#39; is not assignable to type &#39;string&#39;.</span></span>
<span class=line><span style=color:#6a737d>//       Type &#39;number&#39; is not assignable to type &#39;string&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	[propName: string]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(3,5): error TS2411: Property &#39;age&#39; of type &#39;number&#39; is not assignable to string index type &#39;string&#39;.</span></span>
<span class=line><span style=color:#6a737d>// index.ts(7,5): error TS2322: Type &#39;{ [x: string]: string | number; name: string; age: number; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Index signatures are incompatible.</span></span>
<span class=line><span style=color:#6a737d>//     Type &#39;string | number&#39; is not assignable to type &#39;string&#39;.</span></span>
<span class=line><span style=color:#6a737d>//       Type &#39;number&#39; is not assignable to type &#39;string&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br></div></div><p>上例中，任意属性的值允许是 <code>string</code>，但是可选属性 <code>age</code> 的值却是 <code>number</code>，<code>number</code> 不是 <code>string</code> 的子属性，所以报错了。</p><p>另外，在报错信息中可以看出，此时 <code>{ name: &#39;Tom&#39;, age: 25, gender: &#39;male&#39; }</code> 的类型被推断成了 <code>{ [x: string]: string | number; name: string; age: number; gender: string; }</code>，这是联合类型和接口的结合。</p><p>一个接口中只能定义一个任意属性。如果接口中有多个类型的属性，则可以在任意属性中使用联合类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	[propName: string]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	[propName: string]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br></div></div><h3 id=只读属性 tabindex=-1>只读属性 <a class=header-anchor href=#只读属性 aria-label="Permalink to &quot;只读属性&quot;">​</a></h3><p>有时候我们希望对象中的一些字段只能在创建的时候被赋值，那么可以用 <code>readonly</code> 定义只读属性：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>readonly</span><span style=color:#e1e4e8> </span><span style=color:#ffab70>id</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	[propName: string]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	id: </span><span style=color:#79b8ff>89757</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>tom.id </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>9527</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(14,5): error TS2540: Cannot assign to &#39;id&#39; because it is a constant or a read-only property.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>readonly</span><span style=color:#24292e> </span><span style=color:#e36209>id</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	[propName: string]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	id: </span><span style=color:#005cc5>89757</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>tom.id </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>9527</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(14,5): error TS2540: Cannot assign to &#39;id&#39; because it is a constant or a read-only property.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br></div></div><p>上例中，使用 <code>readonly</code> 定义的属性 <code>id</code> 初始化后，又被赋值了，所以报错了。</p><p><strong>注意，只读的约束存在于第一次给对象赋值的时候，而不是第一次给只读属性赋值的时候</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>readonly</span><span style=color:#e1e4e8> </span><span style=color:#ffab70>id</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	[propName: string]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	gender: </span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>tom.id </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>89757</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(8,5): error TS2322: Type &#39;{ name: string; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Property &#39;id&#39; is missing in type &#39;{ name: string; gender: string; }&#39;.</span></span>
<span class=line><span style=color:#6a737d>// index.ts(13,5): error TS2540: Cannot assign to &#39;id&#39; because it is a constant or a read-only property.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>readonly</span><span style=color:#24292e> </span><span style=color:#e36209>id</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	[propName: string]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	gender: </span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>tom.id </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>89757</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(8,5): error TS2322: Type &#39;{ name: string; gender: string; }&#39; is not assignable to type &#39;Person&#39;.</span></span>
<span class=line><span style=color:#6a737d>//   Property &#39;id&#39; is missing in type &#39;{ name: string; gender: string; }&#39;.</span></span>
<span class=line><span style=color:#6a737d>// index.ts(13,5): error TS2540: Cannot assign to &#39;id&#39; because it is a constant or a read-only property.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br></div></div><p>上例中，报错信息有两处，第一处是在对 <code>tom</code> 进行赋值的时候，没有给 <code>id</code> 赋值。</p><p>第二处是在给 <code>tom.id</code> 赋值的时候，由于它是只读属性，所以报错了。</p><h1 id=数组的类型 tabindex=-1>数组的类型 <a class=header-anchor href=#数组的类型 aria-label="Permalink to &quot;数组的类型&quot;">​</a></h1><p>在 TypeScript 中，数组类型有多种定义方式，比较灵活。</p><h3 id=「类型-方括号」表示法 tabindex=-1>「类型 + 方括号」表示法 <a class=header-anchor href=#「类型-方括号」表示法 aria-label="Permalink to &quot;「类型 + 方括号」表示法&quot;">​</a></h3><p>最简单的方法是使用「类型 + 方括号」来表示数组：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> fibonacci</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>[] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>5</span><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> fibonacci</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>[] </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>5</span><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>数组的项中<strong>不允许</strong>出现其他的类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> fibonacci</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>[] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;1&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>5</span><span style=color:#e1e4e8>]</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;string&#39; is not assignable to type &#39;number&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> fibonacci</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>[] </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;1&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>5</span><span style=color:#24292e>]</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;string&#39; is not assignable to type &#39;number&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>数组的一些方法的参数也会根据数组在定义时约定的类型进行限制：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> fibonacci</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>[] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>5</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>fibonacci.</span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;8&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Argument of type &#39;&quot;8&quot;&#39; is not assignable to parameter of type &#39;number&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> fibonacci</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>[] </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>5</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>fibonacci.</span><span style=color:#6f42c1>push</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;8&#39;</span><span style=color:#24292e>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Argument of type &#39;&quot;8&quot;&#39; is not assignable to parameter of type &#39;number&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>上例中，<code>push</code> 方法只允许传入 <code>number</code> 类型的参数，但是却传了一个 <code>&quot;8&quot;</code> 类型的参数，所以报错了。这里 <code>&quot;8&quot;</code> 是一个字符串字面量类型</p><h3 id=数组泛型 tabindex=-1>数组泛型 <a class=header-anchor href=#数组泛型 aria-label="Permalink to &quot;数组泛型&quot;">​</a></h3><p>我们也可以使用数组泛型（Array Generic） <code>Array&lt;elemType&gt;</code> 来表示数组：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> fibonacci</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Array</span><span style=color:#e1e4e8>&lt;</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>5</span><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> fibonacci</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Array</span><span style=color:#24292e>&lt;</span><span style=color:#005cc5>number</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>5</span><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><h3 id=用接口表示数组 tabindex=-1>用接口表示数组 <a class=header-anchor href=#用接口表示数组 aria-label="Permalink to &quot;用接口表示数组&quot;">​</a></h3><p>接口也可以用来描述数组：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NumberArray</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#ffab70>index</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> fibonacci</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NumberArray</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>5</span><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>NumberArray</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#e36209>index</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> fibonacci</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>NumberArray</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>5</span><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p><code>NumberArray</code> 表示：只要索引的类型是数字时，那么值的类型必须是数字。</p><p>虽然接口也可以用来描述数组，但是我们一般不会这么做，因为这种方式比前两种方式复杂多了。</p><p>不过有一种情况例外，那就是它常用来表示类数组。</p><h3 id=类数组 tabindex=-1>类数组 <a class=header-anchor href=#类数组 aria-label="Permalink to &quot;类数组&quot;">​</a></h3><p>类数组（Array-like Object）不是数组类型，比如 <code>arguments</code>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>let</span><span style=color:#e1e4e8> args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>[] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>arguments</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;IArguments&#39; is missing the following properties from type &#39;number[]&#39;: pop, push, concat, join, and 24 more.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>let</span><span style=color:#24292e> args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>[] </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>arguments</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Type &#39;IArguments&#39; is missing the following properties from type &#39;number[]&#39;: pop, push, concat, join, and 24 more.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>上例中，<code>arguments</code> 实际上是一个类数组，不能用普通的数组的方式来描述，而应该用接口：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>let</span><span style=color:#e1e4e8> args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		[</span><span style=color:#ffab70>index</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>length</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#b392f0>callee</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Function</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>arguments</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>let</span><span style=color:#24292e> args</span><span style=color:#d73a49>:</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		[</span><span style=color:#e36209>index</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>length</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#6f42c1>callee</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Function</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>arguments</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>在这个例子中，我们除了约束当索引的类型是数字时，值的类型必须是数字之外，也约束了它还有 <code>length</code> 和 <code>callee</code> 两个属性。</p><p>事实上常用的类数组都有自己的接口定义，如 <code>IArguments</code>, <code>NodeList</code>, <code>HTMLCollection</code> 等：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>let</span><span style=color:#e1e4e8> args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>IArguments</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>arguments</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>let</span><span style=color:#24292e> args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>IArguments</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>arguments</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>其中 <code>IArguments</code> 是 TypeScript 中定义好了的类型，它实际上就是：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>IArguments</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#ffab70>index</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>length</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>callee</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Function</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>IArguments</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#e36209>index</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>length</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>callee</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Function</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><h3 id=any-在数组中的应用 tabindex=-1>any 在数组中的应用 <a class=header-anchor href=#any-在数组中的应用 aria-label="Permalink to &quot;any 在数组中的应用&quot;">​</a></h3><p>一个比较常见的做法是，用 <code>any</code> 表示数组中允许出现任意类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> list</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;xcatliu&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>, {website: </span><span style=color:#9ecbff>&#39;http://xcatliu.com&#39;</span><span style=color:#e1e4e8>}]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> list</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[] </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;xcatliu&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>25</span><span style=color:#24292e>, {website: </span><span style=color:#032f62>&#39;http://xcatliu.com&#39;</span><span style=color:#24292e>}]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><h3 id=特殊的数组-元组 tabindex=-1>特殊的数组(元组) <a class=header-anchor href=#特殊的数组-元组 aria-label="Permalink to &quot;特殊的数组(元组)&quot;">​</a></h3><p>数组合并了相同类型的对象，而元组（Tuple）合并了不同类型的对象。</p><p>元组起源于函数编程语言（如 F#），这些语言中会频繁使用元组。</p><h4 id=简单的例子-1 tabindex=-1>简单的例子 <a class=header-anchor href=#简单的例子-1 aria-label="Permalink to &quot;简单的例子&quot;">​</a></h4><p>定义一对值分别为 <code>string</code> 和 <code>number</code> 的元组：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#24292e>] </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>25</span><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>当赋值或访问一个已知索引的元素时，会得到正确的类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>tom[</span><span style=color:#79b8ff>0</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#e1e4e8>tom[</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>25</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>tom[</span><span style=color:#79b8ff>0</span><span style=color:#e1e4e8>].</span><span style=color:#b392f0>slice</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>tom[</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>].</span><span style=color:#b392f0>toFixed</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>tom[</span><span style=color:#005cc5>0</span><span style=color:#24292e>] </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#24292e>tom[</span><span style=color:#005cc5>1</span><span style=color:#24292e>] </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>25</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>tom[</span><span style=color:#005cc5>0</span><span style=color:#24292e>].</span><span style=color:#6f42c1>slice</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>tom[</span><span style=color:#005cc5>1</span><span style=color:#24292e>].</span><span style=color:#6f42c1>toFixed</span><span style=color:#24292e>(</span><span style=color:#005cc5>2</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>也可以只赋值其中一项：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>tom[</span><span style=color:#79b8ff>0</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>tom[</span><span style=color:#005cc5>0</span><span style=color:#24292e>] </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><p>但是当直接对元组类型的变量进行初始化或者赋值的时候，需要提供所有元组类型中指定的项。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>tom </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>tom </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>]</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Property &#39;1&#39; is missing in type &#39;[string]&#39; but required in type &#39;[string, number]&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>tom </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>25</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>tom </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>]</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Property &#39;1&#39; is missing in type &#39;[string]&#39; but required in type &#39;[string, number]&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><h4 id=越界的元素 tabindex=-1>越界的元素 <a class=header-anchor href=#越界的元素 aria-label="Permalink to &quot;越界的元素&quot;">​</a></h4><p>当添加越界的元素时，它的类型会被限制为元组中每个类型的联合类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>tom </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>tom.</span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;male&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>tom.</span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>true</span><span style=color:#e1e4e8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Argument of type &#39;true&#39; is not assignable to parameter of type &#39;string | number&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>tom </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>25</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>tom.</span><span style=color:#6f42c1>push</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;male&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>tom.</span><span style=color:#6f42c1>push</span><span style=color:#24292e>(</span><span style=color:#005cc5>true</span><span style=color:#24292e>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// Argument of type &#39;true&#39; is not assignable to parameter of type &#39;string | number&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><h1 id=函数的类型 tabindex=-1>函数的类型 <a class=header-anchor href=#函数的类型 aria-label="Permalink to &quot;函数的类型&quot;">​</a></h1><blockquote><p><a href=https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/ch2.html target=_blank rel=noreferrer>函数是 JavaScript 中的一等公民</a></p></blockquote><h3 id=函数声明 tabindex=-1>函数声明 <a class=header-anchor href=#函数声明 aria-label="Permalink to &quot;函数声明&quot;">​</a></h3><p>在 JavaScript 中，有两种常见的定义函数的方式——函数声明（Function Declaration）和函数表达式（Function Expression）：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 函数声明（Function Declaration）</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 函数表达式（Function Expression）</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>mySum</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>x</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 函数声明（Function Declaration）</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 函数表达式（Function Expression）</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> </span><span style=color:#6f42c1>mySum</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>x</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>一个函数有输入和输出，要在 TypeScript 中对其进行约束，需要把输入和输出都考虑到，其中函数声明的类型定义较简单：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>注意，<strong>输入多余的（或者少于要求的）参数，是不被允许的</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(4,1): error TS2346: Supplied parameters do not match any signature of call target.</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#b392f0>sum</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(4,1): error TS2346: Supplied parameters do not match any signature of call target.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6f42c1>sum</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(4,1): error TS2346: Supplied parameters do not match any signature of call target.</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>sum</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6f42c1>sum</span><span style=color:#24292e>(</span><span style=color:#005cc5>1</span><span style=color:#24292e>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(4,1): error TS2346: Supplied parameters do not match any signature of call target.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br></div></div><h3 id=函数表达式 tabindex=-1>函数表达式 <a class=header-anchor href=#函数表达式 aria-label="Permalink to &quot;函数表达式&quot;">​</a></h3><p>如果要我们现在写一个对函数表达式（Function Expression）的定义，可能会写成这样：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>mySum</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> </span><span style=color:#6f42c1>mySum</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>这是可以通过编译的，不过事实上，上面的代码只对等号右侧的匿名函数进行了类型定义，而等号左边的 <code>mySum</code>，是通过赋值操作进行类型推论而推断出来的。如果需要我们手动给 <code>mySum</code> 添加类型，则应该是这样：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>mySum</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> </span><span style=color:#6f42c1>mySum</span><span style=color:#d73a49>:</span><span style=color:#24292e> (</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>注意不要混淆了 TypeScript 中的 <code>=&gt;</code> 和 ES6 中的 <code>=&gt;</code>。</p><p>在 TypeScript 的类型定义中，<code>=&gt;</code> 用来表示函数的定义，左边是输入类型，需要用括号括起来，右边是输出类型。</p><p>在 ES6 中，<code>=&gt;</code> 叫做箭头函数，应用十分广泛，可以参考 <a href=http://es6.ruanyifeng.com/#docs/function#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0 target=_blank rel=noreferrer>ES6 中的箭头函数</a>。</p><h3 id=用接口定义函数的形状 tabindex=-1>用接口定义函数的形状 <a class=header-anchor href=#用接口定义函数的形状 aria-label="Permalink to &quot;用接口定义函数的形状&quot;">​</a></h3><p>我们也可以使用接口的方式来定义一个函数需要符合的形状：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>SearchFunc</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	(</span><span style=color:#ffab70>source</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>subString</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> mySearch</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>SearchFunc</span></span>
<span class=line><span style=color:#b392f0>mySearch</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>source</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>subString</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> source.</span><span style=color:#b392f0>search</span><span style=color:#e1e4e8>(subString) </span><span style=color:#f97583>!==</span><span style=color:#e1e4e8> </span><span style=color:#f97583>-</span><span style=color:#79b8ff>1</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>SearchFunc</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	(</span><span style=color:#e36209>source</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>subString</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> mySearch</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>SearchFunc</span></span>
<span class=line><span style=color:#6f42c1>mySearch</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>source</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>subString</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> source.</span><span style=color:#6f42c1>search</span><span style=color:#24292e>(subString) </span><span style=color:#d73a49>!==</span><span style=color:#24292e> </span><span style=color:#d73a49>-</span><span style=color:#005cc5>1</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>采用函数表达式|接口定义函数的方式时，对等号左侧进行类型限制，可以保证以后对函数名赋值时保证参数个数、参数类型、返回值类型不变。</p><h3 id=可选参数 tabindex=-1>可选参数 <a class=header-anchor href=#可选参数 aria-label="Permalink to &quot;可选参数&quot;">​</a></h3><p>前面提到，输入多余的（或者少于要求的）参数，是不允许的。那么如何定义可选的参数呢？</p><p>与接口中的可选属性类似，我们用 <code>?</code> 表示可选的参数：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>firstName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>lastName</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (lastName) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> firstName </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> lastName</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> firstName</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tomcat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#e36209>firstName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>lastName</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (lastName) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> firstName </span><span style=color:#d73a49>+</span><span style=color:#24292e> </span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> lastName</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> firstName</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tomcat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>需要注意的是，可选参数必须接在必需参数后面。换句话说，<strong>可选参数后面不允许再出现必需参数了</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>firstName</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>lastName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (firstName) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> firstName </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> lastName</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> lastName</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tomcat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(1,40): error TS1016: A required parameter cannot follow an optional parameter.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#e36209>firstName</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>lastName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (firstName) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> firstName </span><span style=color:#d73a49>+</span><span style=color:#24292e> </span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> lastName</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> lastName</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tomcat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#005cc5>undefined</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(1,40): error TS1016: A required parameter cannot follow an optional parameter.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br></div></div><h3 id=参数默认值 tabindex=-1>参数默认值 <a class=header-anchor href=#参数默认值 aria-label="Permalink to &quot;参数默认值&quot;">​</a></h3><p>在 ES6 中，我们允许给函数的参数添加默认值，<strong>TypeScript 会将添加了默认值的参数识别为可选参数</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>firstName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>lastName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> firstName </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> lastName</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tomcat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#e36209>firstName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>lastName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> firstName </span><span style=color:#d73a49>+</span><span style=color:#24292e> </span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> lastName</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tomcat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>此时就不受「可选参数必须接在必需参数后面」的限制了：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>firstName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>lastName</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> firstName </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39; &#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> lastName</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tomcat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> cat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>buildName</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#e36209>firstName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#e36209>lastName</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> firstName </span><span style=color:#d73a49>+</span><span style=color:#24292e> </span><span style=color:#032f62>&#39; &#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>+</span><span style=color:#24292e> lastName</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tomcat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> cat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>buildName</span><span style=color:#24292e>(</span><span style=color:#005cc5>undefined</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><blockquote><p>关于默认参数，可以参考 <a href=http://es6.ruanyifeng.com/#docs/function#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC target=_blank rel=noreferrer>ES6 中函数参数的默认值</a>。</p></blockquote><h3 id=剩余参数 tabindex=-1>剩余参数 <a class=header-anchor href=#剩余参数 aria-label="Permalink to &quot;剩余参数&quot;">​</a></h3><p>ES6 中，可以使用 <code>...rest</code> 的方式获取函数中的剩余参数（rest 参数）：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>array</span><span style=color:#e1e4e8>, </span><span style=color:#f97583>...</span><span style=color:#ffab70>items</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	items.</span><span style=color:#b392f0>forEach</span><span style=color:#e1e4e8>(</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>item</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		array.</span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(item)</span></span>
<span class=line><span style=color:#e1e4e8>	})</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[] </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> []</span></span>
<span class=line><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(a, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>push</span><span style=color:#24292e>(</span><span style=color:#e36209>array</span><span style=color:#24292e>, </span><span style=color:#d73a49>...</span><span style=color:#e36209>items</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	items.</span><span style=color:#6f42c1>forEach</span><span style=color:#24292e>(</span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>item</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		array.</span><span style=color:#6f42c1>push</span><span style=color:#24292e>(item)</span></span>
<span class=line><span style=color:#24292e>	})</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[] </span><span style=color:#d73a49>=</span><span style=color:#24292e> []</span></span>
<span class=line><span style=color:#6f42c1>push</span><span style=color:#24292e>(a, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>事实上，<code>items</code> 是一个数组。所以我们可以用数组的类型来定义它：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>array</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[], </span><span style=color:#f97583>...</span><span style=color:#ffab70>items</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[]) {</span></span>
<span class=line><span style=color:#e1e4e8>	items.</span><span style=color:#b392f0>forEach</span><span style=color:#e1e4e8>(</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>item</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		array.</span><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(item)</span></span>
<span class=line><span style=color:#e1e4e8>	})</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> a </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> []</span></span>
<span class=line><span style=color:#b392f0>push</span><span style=color:#e1e4e8>(a, </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>push</span><span style=color:#24292e>(</span><span style=color:#e36209>array</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[], </span><span style=color:#d73a49>...</span><span style=color:#e36209>items</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[]) {</span></span>
<span class=line><span style=color:#24292e>	items.</span><span style=color:#6f42c1>forEach</span><span style=color:#24292e>(</span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>item</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		array.</span><span style=color:#6f42c1>push</span><span style=color:#24292e>(item)</span></span>
<span class=line><span style=color:#24292e>	})</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> a </span><span style=color:#d73a49>=</span><span style=color:#24292e> []</span></span>
<span class=line><span style=color:#6f42c1>push</span><span style=color:#24292e>(a, </span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>注意，rest 参数只能是最后一个参数，关于 rest 参数，可以参考 <a href=http://es6.ruanyifeng.com/#docs/function#rest%E5%8F%82%E6%95%B0 target=_blank rel=noreferrer>ES6 中的 rest 参数</a>。</p><h3 id=重载 tabindex=-1>重载 <a class=header-anchor href=#重载 aria-label="Permalink to &quot;重载&quot;">​</a></h3><p>重载允许一个函数接受不同数量或类型的参数时，作出不同的处理。</p><p>比如，我们需要实现一个函数 <code>reverse</code>，输入数字 <code>123</code> 的时候，输出反转的数字 <code>321</code>，输入字符串 <code>&#39;hello&#39;</code> 的时候，输出反转的字符串 <code>&#39;olleh&#39;</code>。</p><p>利用联合类型，我们可以这么实现：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;number&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Number</span><span style=color:#e1e4e8>(x.</span><span style=color:#b392f0>toString</span><span style=color:#e1e4e8>().</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>).</span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>().</span><span style=color:#b392f0>join</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>))</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> </span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;string&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x.</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>).</span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>().</span><span style=color:#b392f0>join</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> x </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;number&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#6f42c1>Number</span><span style=color:#24292e>(x.</span><span style=color:#6f42c1>toString</span><span style=color:#24292e>().</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>).</span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>().</span><span style=color:#6f42c1>join</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>))</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> </span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> x </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;string&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> x.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>).</span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>().</span><span style=color:#6f42c1>join</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p><strong>然而这样有一个缺点，就是不能够精确的表达，输入为数字的时候，输出也应该为数字，输入为字符串的时候，输出也应该为字符串。</strong></p><p>这时，我们可以使用重载定义多个 <code>reverse</code> 的函数类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;number&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Number</span><span style=color:#e1e4e8>(x.</span><span style=color:#b392f0>toString</span><span style=color:#e1e4e8>().</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>).</span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>().</span><span style=color:#b392f0>join</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>))</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> </span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;string&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x.</span><span style=color:#b392f0>split</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>).</span><span style=color:#b392f0>reverse</span><span style=color:#e1e4e8>().</span><span style=color:#b392f0>join</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> x </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;number&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#6f42c1>Number</span><span style=color:#24292e>(x.</span><span style=color:#6f42c1>toString</span><span style=color:#24292e>().</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>).</span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>().</span><span style=color:#6f42c1>join</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>))</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> </span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> x </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;string&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> x.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>).</span><span style=color:#6f42c1>reverse</span><span style=color:#24292e>().</span><span style=color:#6f42c1>join</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>上例中，我们重复定义了多次函数 <code>reverse</code>，前几次都是函数定义，最后一次是函数实现。在编辑器的代码提示中，可以正确的看到前两个提示。</p><p>注意，TypeScript 会优先从最前面的函数定义开始匹配，所以多个函数定义如果有包含关系，需要优先把精确的定义写在前面。</p><h1 id=特有类型 tabindex=-1>特有类型 <a class=header-anchor href=#特有类型 aria-label="Permalink to &quot;特有类型&quot;">​</a></h1><h3 id=空值 tabindex=-1>空值 <a class=header-anchor href=#空值 aria-label="Permalink to &quot;空值&quot;">​</a></h3><p>JavaScript 没有空值（Void）的概念，在 TypeScript 中，可以用 <code>void</code> 表示没有任何返回值的函数：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>alertName</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>alert</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;My name is Tom&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>alertName</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>alert</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;My name is Tom&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>声明一个 <code>void</code> 类型的变量没有什么用，因为你只能将它赋值为 <code>undefined</code> 和 <code>null</code>（只在 --strictNullChecks 未指定时）：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> unusable</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> unusable</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><h3 id=任意类型 tabindex=-1>任意类型 <a class=header-anchor href=#任意类型 aria-label="Permalink to &quot;任意类型&quot;">​</a></h3><p>如果是一个普通类型，在赋值过程中改变类型是不被允许的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> myFavoriteNumber</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;seven&#39;</span></span>
<span class=line><span style=color:#e1e4e8>myFavoriteNumber </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>7</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(2,1): error TS2322: Type &#39;number&#39; is not assignable to type &#39;string&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> myFavoriteNumber</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;seven&#39;</span></span>
<span class=line><span style=color:#24292e>myFavoriteNumber </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>7</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(2,1): error TS2322: Type &#39;number&#39; is not assignable to type &#39;string&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>但如果是 <code>any</code> 类型，则允许被赋值为任意类型。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> myFavoriteNumber</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;seven&#39;</span></span>
<span class=line><span style=color:#e1e4e8>myFavoriteNumber </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> myFavoriteNumber</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;seven&#39;</span></span>
<span class=line><span style=color:#24292e>myFavoriteNumber </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>7</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><h4 id=任意值的属性和方法 tabindex=-1>任意值的属性和方法 <a class=header-anchor href=#任意值的属性和方法 aria-label="Permalink to &quot;任意值的属性和方法&quot;">​</a></h4><p>在任意值上访问任何属性都是允许的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> anyThing</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;hello&#39;</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(anyThing.myName)</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(anyThing.myName.firstName)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> anyThing</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;hello&#39;</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(anyThing.myName)</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(anyThing.myName.firstName)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>也允许调用任何方法：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> anyThing</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#e1e4e8>anyThing.</span><span style=color:#b392f0>setName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Jerry&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>anyThing.</span><span style=color:#b392f0>setName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Jerry&#39;</span><span style=color:#e1e4e8>).</span><span style=color:#b392f0>sayHello</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#e1e4e8>anyThing.myName.</span><span style=color:#b392f0>setFirstName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Cat&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> anyThing</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Tom&#39;</span></span>
<span class=line><span style=color:#24292e>anyThing.</span><span style=color:#6f42c1>setName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Jerry&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>anyThing.</span><span style=color:#6f42c1>setName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Jerry&#39;</span><span style=color:#24292e>).</span><span style=color:#6f42c1>sayHello</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>anyThing.myName.</span><span style=color:#6f42c1>setFirstName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Cat&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>可以认为，<strong>声明一个变量为任意值之后，对它的任何操作，返回的内容的类型都是任意值</strong>。</p><h4 id=未声明类型的变量 tabindex=-1>未声明类型的变量 <a class=header-anchor href=#未声明类型的变量 aria-label="Permalink to &quot;未声明类型的变量&quot;">​</a></h4><p><strong>变量如果在声明的时候，未指定其类型，那么它会被识别为任意值类型</strong>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> something</span></span>
<span class=line><span style=color:#e1e4e8>something </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;seven&#39;</span></span>
<span class=line><span style=color:#e1e4e8>something </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>7</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>something.</span><span style=color:#b392f0>setName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> something</span></span>
<span class=line><span style=color:#24292e>something </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;seven&#39;</span></span>
<span class=line><span style=color:#24292e>something </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>7</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>something.</span><span style=color:#6f42c1>setName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>等价于</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> something</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>something </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;seven&#39;</span></span>
<span class=line><span style=color:#e1e4e8>something </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>7</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>something.</span><span style=color:#b392f0>setName</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> something</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>something </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;seven&#39;</span></span>
<span class=line><span style=color:#24292e>something </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>7</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>something.</span><span style=color:#6f42c1>setName</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><h3 id=never-类型 tabindex=-1>Never 类型 <a class=header-anchor href=#never-类型 aria-label="Permalink to &quot;Never 类型&quot;">​</a></h3><p><code>never</code> 类型表示的是那些永不存在的值的类型。 例如，<code>never</code> 类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 返回never的函数必须存在无法达到的终点</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>error</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>message</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>throw</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Error</span><span style=color:#e1e4e8>(message)</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>infiniteLoop</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>while</span><span style=color:#e1e4e8> (</span><span style=color:#79b8ff>true</span><span style=color:#e1e4e8>) {}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 返回never的函数必须存在无法达到的终点</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>error</span><span style=color:#24292e>(</span><span style=color:#e36209>message</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>throw</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>Error</span><span style=color:#24292e>(message)</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>infiniteLoop</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>while</span><span style=color:#24292e> (</span><span style=color:#005cc5>true</span><span style=color:#24292e>) {}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>在 TypeScript 中，可以利用 never 类型的特性来实现全面性检查，具体示例如下：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Foo</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>controlFlowAnalysisWithNever</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>foo</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Foo</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> foo </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;string&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#6a737d>// 这里 foo 被收窄为 string 类型</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> </span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> foo </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;number&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#6a737d>// 这里 foo 被收窄为 number 类型</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#6a737d>// foo 在这里是 never</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>check</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> foo</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Foo</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>controlFlowAnalysisWithNever</span><span style=color:#24292e>(</span><span style=color:#e36209>foo</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Foo</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> foo </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;string&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#6a737d>// 这里 foo 被收窄为 string 类型</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> </span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> foo </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;number&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#6a737d>// 这里 foo 被收窄为 number 类型</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#6a737d>// foo 在这里是 never</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>check</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> foo</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br></div></div><p>注意在 else 分支里面，我们把收窄为 never 的 foo 赋值给一个显示声明的 never 变量。如果一切逻辑正确，那么这里应该能够编译通过。但是假如后来有一天你的同事修改了 Foo 的类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Foo</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Foo</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>然而他忘记同时修改 <code>controlFlowAnalysisWithNever</code> 方法中的控制流程，这时候 else 分支的 foo 类型会被收窄为 <code>boolean</code> 类型，导致无法赋值给 never 类型，这时就会产生一个编译错误。通过这个方式，我们可以确保<code>controlFlowAnalysisWithNever</code> 方法总是穷尽了 Foo 的所有可能类型。 <br>通过这个示例，我们可以得出一个结论：<strong>使用 never 避免出现新增了联合类型没有对应的实现，目的就是写出类型绝对安全的代码。</strong></p><h1 id=类型别名 tabindex=-1>类型别名 <a class=header-anchor href=#类型别名 aria-label="Permalink to &quot;类型别名&quot;">​</a></h1><p>类型别名用来给一个类型起个新名字，常用于联合类型、字面量类型及描述对象类型。</p><h3 id=类型起个新名字 tabindex=-1>类型起个新名字 <a class=header-anchor href=#类型起个新名字 aria-label="Permalink to &quot;类型起个新名字&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Name</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NameResolver</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> () </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NameOrResolver</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Name</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NameResolver</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>getName</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>n</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NameOrResolver</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Name</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>if</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> n </span><span style=color:#f97583>===</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;string&#39;</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> n</span></span>
<span class=line><span style=color:#e1e4e8>	} </span><span style=color:#f97583>else</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>n</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Name</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>NameResolver</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> () </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>NameOrResolver</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Name</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#6f42c1>NameResolver</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>getName</span><span style=color:#24292e>(</span><span style=color:#e36209>n</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>NameOrResolver</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Name</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>if</span><span style=color:#24292e> (</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> n </span><span style=color:#d73a49>===</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;string&#39;</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> n</span></span>
<span class=line><span style=color:#24292e>	} </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#6f42c1>n</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>上例中，我们使用 <code>type</code> 创建类型别名。</p><h3 id=字符串字面量类型 tabindex=-1>字符串字面量类型 <a class=header-anchor href=#字符串字面量类型 aria-label="Permalink to &quot;字符串字面量类型&quot;">​</a></h3><p>字符串字面量类型用来约束取值只能是某几个字符串中的一个。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>EventNames</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;click&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;scroll&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;mousemove&#39;</span></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>handleEvent</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>ele</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Element</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>event</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>EventNames</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// do something</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>handleEvent</span><span style=color:#e1e4e8>(document.</span><span style=color:#b392f0>getElementById</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;hello&#39;</span><span style=color:#e1e4e8>), </span><span style=color:#9ecbff>&#39;scroll&#39;</span><span style=color:#e1e4e8>) </span><span style=color:#6a737d>// 没问题</span></span>
<span class=line><span style=color:#b392f0>handleEvent</span><span style=color:#e1e4e8>(document.</span><span style=color:#b392f0>getElementById</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;world&#39;</span><span style=color:#e1e4e8>), </span><span style=color:#9ecbff>&#39;dblclick&#39;</span><span style=color:#e1e4e8>) </span><span style=color:#6a737d>// 报错，event 不能为 &#39;dblclick&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(7,47): error TS2345: Argument of type &#39;&quot;dblclick&quot;&#39; is not assignable to parameter of type &#39;EventNames&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>EventNames</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;click&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;scroll&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;mousemove&#39;</span></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>handleEvent</span><span style=color:#24292e>(</span><span style=color:#e36209>ele</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Element</span><span style=color:#24292e>, </span><span style=color:#e36209>event</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>EventNames</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// do something</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>handleEvent</span><span style=color:#24292e>(document.</span><span style=color:#6f42c1>getElementById</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;hello&#39;</span><span style=color:#24292e>), </span><span style=color:#032f62>&#39;scroll&#39;</span><span style=color:#24292e>) </span><span style=color:#6a737d>// 没问题</span></span>
<span class=line><span style=color:#6f42c1>handleEvent</span><span style=color:#24292e>(document.</span><span style=color:#6f42c1>getElementById</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;world&#39;</span><span style=color:#24292e>), </span><span style=color:#032f62>&#39;dblclick&#39;</span><span style=color:#24292e>) </span><span style=color:#6a737d>// 报错，event 不能为 &#39;dblclick&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// index.ts(7,47): error TS2345: Argument of type &#39;&quot;dblclick&quot;&#39; is not assignable to parameter of type &#39;EventNames&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>上例中，我们使用 <code>type</code> 定了一个字符串字面量类型 <code>EventNames</code>，它只能取三种字符串中的一种。</p><p>注意，<strong>类型别名与字符串字面量类型都是使用 <strong><code>**type**</code></strong> 进行定义。</strong></p><h3 id=描述对象类型 tabindex=-1>描述对象类型 <a class=header-anchor href=#描述对象类型 aria-label="Permalink to &quot;描述对象类型&quot;">​</a></h3><p>功能类似于接口</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> tom</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	name: </span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	age: </span><span style=color:#79b8ff>25</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> tom</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	name: </span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	age: </span><span style=color:#005cc5>25</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><h1 id=断言 tabindex=-1>断言 <a class=header-anchor href=#断言 aria-label="Permalink to &quot;断言&quot;">​</a></h1><blockquote><ul><li>联合类型可以被断言为其中一个类型</li><li>父类可以被断言为子类</li><li>任何类型都可以被断言为 any</li><li>any 可以被断言为任何类型</li><li>要使得 <code>A</code> 能够被断言为 <code>B</code>，只需要 <code>A</code> 兼容 <code>B</code> 或 <code>B</code> 兼容 <code>A</code> 即可</li></ul></blockquote><h3 id=类型断言 tabindex=-1>类型断言 <a class=header-anchor href=#类型断言 aria-label="Permalink to &quot;类型断言&quot;">​</a></h3><p>有时候你会遇到这样的情况，你会比 TypeScript 更了解某个值的详细信息。<strong>通常这会发生在你清楚地知道一个实体具有比它现有类型更确切的类型。</strong><br>通过类型断言这种方式可以告诉 typescript，**“相信我，我知道自己在干什么”。**类型断言好比其他语言里的类型转换，但是不进行特殊的数据检查和解构。<strong>它没有运行时的影响，只是在编译阶段起作用。</strong></p><p>类型断言有两种形式：</p><h4 id=尖括号-语法 tabindex=-1>“尖括号” 语法 <a class=header-anchor href=#尖括号-语法 aria-label="Permalink to &quot;“尖括号” 语法&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> someValue</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;this is a string&#39;</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> strLength</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> (&lt;</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt;someValue).</span><span style=color:#79b8ff>length</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> someValue</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;this is a string&#39;</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> strLength</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> (&lt;</span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt;someValue).</span><span style=color:#005cc5>length</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><h4 id=as-语法 tabindex=-1>as 语法 <a class=header-anchor href=#as-语法 aria-label="Permalink to &quot;as 语法&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> someValue</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;this is a string&#39;</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> strLength</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> (someValue </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>).</span><span style=color:#79b8ff>length</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> someValue</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;this is a string&#39;</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> strLength</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> (someValue </span><span style=color:#d73a49>as</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>).</span><span style=color:#005cc5>length</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><h3 id=非空断言 tabindex=-1>非空断言 <a class=header-anchor href=#非空断言 aria-label="Permalink to &quot;非空断言&quot;">​</a></h3><p>在上下文中当类型检查器无法断定类型时，一个新的后缀表达式操作符 <code>!</code> 可以用于断言操作对象是非 null 和非 undefined 类型。<strong>具体而言，x! 将从 x 值域中排除 null 和 undefined 。</strong></p><p>那么非空断言操作符到底有什么用呢？下面我们先来看一下非空断言操作符的一些使用场景。</p><h4 id="忽略-undefined-和-null-类型" tabindex=-1>忽略 undefined 和 null 类型 <a class=header-anchor href="#忽略-undefined-和-null-类型" aria-label="Permalink to &quot;忽略 undefined 和 null 类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>myFunc</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>maybeString</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>null</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// Type &#39;string | null | undefined&#39; is not assignable to type &#39;string&#39;.</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// Type &#39;undefined&#39; is not assignable to type &#39;string&#39;.</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>onlyString</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> maybeString </span><span style=color:#6a737d>// Error</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>ignoreUndefinedAndNull</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> maybeString</span><span style=color:#f97583>!</span><span style=color:#e1e4e8> </span><span style=color:#6a737d>// Ok</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>myFunc</span><span style=color:#24292e>(</span><span style=color:#e36209>maybeString</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>null</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// Type &#39;string | null | undefined&#39; is not assignable to type &#39;string&#39;.</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// Type &#39;undefined&#39; is not assignable to type &#39;string&#39;.</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>onlyString</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> maybeString </span><span style=color:#6a737d>// Error</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>ignoreUndefinedAndNull</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> maybeString</span><span style=color:#d73a49>!</span><span style=color:#24292e> </span><span style=color:#6a737d>// Ok</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><h4 id="调用函数时忽略-undefined-类型" tabindex=-1>调用函数时忽略 undefined 类型 <a class=header-anchor href="#调用函数时忽略-undefined-类型" aria-label="Permalink to &quot;调用函数时忽略 undefined 类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NumGenerator</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> () </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>myFunc</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>numGenerator</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NumGenerator</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// Object is possibly &#39;undefined&#39;.(2532)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// Cannot invoke an object which is possibly &#39;undefined&#39;.(2722)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>num1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>numGenerator</span><span style=color:#e1e4e8>() </span><span style=color:#6a737d>// Error</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>num2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>numGenerator</span><span style=color:#f97583>!</span><span style=color:#e1e4e8>() </span><span style=color:#6a737d>//OK</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>NumGenerator</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> () </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>myFunc</span><span style=color:#24292e>(</span><span style=color:#e36209>numGenerator</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>NumGenerator</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// Object is possibly &#39;undefined&#39;.(2532)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// Cannot invoke an object which is possibly &#39;undefined&#39;.(2722)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>num1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>numGenerator</span><span style=color:#24292e>() </span><span style=color:#6a737d>// Error</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>num2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>numGenerator</span><span style=color:#d73a49>!</span><span style=color:#24292e>() </span><span style=color:#6a737d>//OK</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>因为 <code>!</code> 非空断言操作符会从编译生成的 JavaScript 代码中移除，所以在实际使用的过程中，要特别注意。比如下面这个例子：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>b</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> a</span><span style=color:#f97583>!</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(b)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>b</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> a</span><span style=color:#d73a49>!</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(b)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>以上 TS 代码会编译生成以下 ES5 代码：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#9ecbff>&#39;use strict&#39;</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>a</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>b</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> a</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(b)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#032f62>&#39;use strict&#39;</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>a</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>b</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> a</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(b)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>虽然在 TS 代码中，我们使用了非空断言，使得 <code>const b: number = a!;</code> 语句可以通过 TypeScript 类型检查器的检查。但在生成的 ES5 代码中，<code>!</code> 非空断言操作符被移除了，所以在浏览器中执行以上代码，在控制台会输出 <code>undefined</code>。</p><h3 id=确定赋值断言 tabindex=-1>确定赋值断言 <a class=header-anchor href=#确定赋值断言 aria-label="Permalink to &quot;确定赋值断言&quot;">​</a></h3><p>在 TypeScript 2.7 版本中引入了确定赋值断言，即允许在实例属性和变量声明后面放置一个 <code>!</code> 号，从而告诉 TypeScript 该属性会被明确地赋值。为了更好地理解它的作用，我们来看个具体的例子：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#b392f0>initialize</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#6a737d>// Variable &#39;x&#39; is used before being assigned.(2454)</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>*</span><span style=color:#e1e4e8> x) </span><span style=color:#6a737d>// Error</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>initialize</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	x </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>10</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#6f42c1>initialize</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#6a737d>// Variable &#39;x&#39; is used before being assigned.(2454)</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#005cc5>2</span><span style=color:#24292e> </span><span style=color:#d73a49>*</span><span style=color:#24292e> x) </span><span style=color:#6a737d>// Error</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>initialize</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	x </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>10</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>很明显该异常信息是说变量 x 在赋值前被使用了，要解决该问题，我们可以使用确定赋值断言：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> x</span><span style=color:#f97583>!:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#b392f0>initialize</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>*</span><span style=color:#e1e4e8> x) </span><span style=color:#6a737d>// Ok</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>initialize</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	x </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>10</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> x</span><span style=color:#d73a49>!:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#6f42c1>initialize</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#005cc5>2</span><span style=color:#24292e> </span><span style=color:#d73a49>*</span><span style=color:#24292e> x) </span><span style=color:#6a737d>// Ok</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>initialize</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	x </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>10</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>通过 <code>let x!: number;</code> 确定赋值断言，TypeScript 编译器就会知道该属性会被明确地赋值。</p><h3 id=常量断言 tabindex=-1>常量断言 <a class=header-anchor href=#常量断言 aria-label="Permalink to &quot;常量断言&quot;">​</a></h3><p>常量断言（语法写作 <code>as const</code>）是 TypeScript 3.4 发布的新特性中最实用的一个</p><p>例如下面的 <code>immutableString</code> 会被推断成单值类型 <code>&#39;Acid Mother Temple&#39;</code></p><p>而 <code>mutableString</code> 则会被推断成通用的 <code>string</code> 类型</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>immutableString</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Acid Mother Temple&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> mutableString </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;Robert Fripp&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>immutableString</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Acid Mother Temple&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> mutableString </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;Robert Fripp&#39;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>而在一般的对象中，由于对象的属性都具有可修改性，TS 都会对它们「从宽」类型推断，例如下面的 <code>prop</code> 的类型被推断为 <code>string</code>：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	prop: </span><span style=color:#9ecbff>&#39;David Bowie&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	prop: </span><span style=color:#032f62>&#39;David Bowie&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><h4 id=问题 tabindex=-1>问题 <a class=header-anchor href=#问题 aria-label="Permalink to &quot;问题&quot;">​</a></h4><p>这样的类型推断策略在大部分的情形下比较通用，但在个别情形下会显得有些棘手，比如我们希望某对象的所有属性的类型就是字面量的值，而不是一个宽广的类型，如</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	prop: </span><span style=color:#9ecbff>&#39;David Bowie&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#6a737d>// 我们有时并不希望prop推断为string类型而就是David Bowie字面类型</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	prop: </span><span style=color:#032f62>&#39;David Bowie&#39;</span><span style=color:#24292e>, </span><span style=color:#6a737d>// 我们有时并不希望prop推断为string类型而就是David Bowie字面类型</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><h4 id=as-const tabindex=-1>as const <a class=header-anchor href=#as-const aria-label="Permalink to &quot;as const&quot;">​</a></h4><p>常量断言可以把一个值标记为一个不可篡改的常量，从而让 TS 以最严格的策略来进行类型推断：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  prop: </span><span style=color:#9ecbff>&#39;David Bowie&#39;</span><span style=color:#e1e4e8> </span><span style=color:#6a737d>// 我们有时并不希望prop推断为string类型而就是David Bowie字面类型</span></span>
<span class=line><span style=color:#e1e4e8>} </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  prop: </span><span style=color:#032f62>&#39;David Bowie&#39;</span><span style=color:#24292e> </span><span style=color:#6a737d>// 我们有时并不希望prop推断为string类型而就是David Bowie字面类型</span></span>
<span class=line><span style=color:#24292e>} </span><span style=color:#d73a49>as</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><h4 id=两个-const-的区别 tabindex=-1>两个 const 的区别 <a class=header-anchor href=#两个-const-的区别 aria-label="Permalink to &quot;两个 const 的区别&quot;">​</a></h4><p><code>as const</code> 中的 const 与我们声明常量时使用的 <code>const</code> 有什么区别和联系呢？其实两者无论是语法还是语义，都相当不同：</p><ul><li><code>const</code> 常量声明是 ES6 的语法，对 TS 而言，它只能反映该常量本身是不可被重新赋值的，它的子属性仍然可以被修改，故 TS 只会对它们做松散的类型推断</li><li><code>as const</code> 是 TS 的语法，它告诉 TS 它所断言的值以及该值的所有层级的子属性都是不可篡改的，故对每一级子属性都会做最严格的类型推断</li></ul><p>例如下面字面量对象的第二层属性仍被推断成了 <code>1967</code> 这样的单值类型而不是宽泛的 <code>number</code> 类型，其类型推断结果与字面量声明几乎长得一模一样。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>albumsByStyle</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  psychodelic: {</span></span>
<span class=line><span style=color:#e1e4e8>    </span><span style=color:#9ecbff>&#39;magical-mystery-tour&#39;</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>1967</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>    </span><span style=color:#9ecbff>&#39;the-piper-at-the-gates-of-dawn&#39;</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>1967</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  },</span></span>
<span class=line><span style=color:#e1e4e8>  glam: {</span></span>
<span class=line><span style=color:#e1e4e8>    </span><span style=color:#9ecbff>&#39;a-night-at-the-opera&#39;</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>1975</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>    </span><span style=color:#9ecbff>&#39;diamond-dogs&#39;</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>1974</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  }</span></span>
<span class=line><span style=color:#e1e4e8>} </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>albumsByStyle</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  psychodelic: {</span></span>
<span class=line><span style=color:#24292e>    </span><span style=color:#032f62>&#39;magical-mystery-tour&#39;</span><span style=color:#24292e>: </span><span style=color:#005cc5>1967</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>    </span><span style=color:#032f62>&#39;the-piper-at-the-gates-of-dawn&#39;</span><span style=color:#24292e>: </span><span style=color:#005cc5>1967</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  },</span></span>
<span class=line><span style=color:#24292e>  glam: {</span></span>
<span class=line><span style=color:#24292e>    </span><span style=color:#032f62>&#39;a-night-at-the-opera&#39;</span><span style=color:#24292e>: </span><span style=color:#005cc5>1975</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>    </span><span style=color:#032f62>&#39;diamond-dogs&#39;</span><span style=color:#24292e>: </span><span style=color:#005cc5>1974</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  }</span></span>
<span class=line><span style=color:#24292e>} </span><span style=color:#d73a49>as</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h1 id=交叉类型 tabindex=-1>交叉类型 <a class=header-anchor href=#交叉类型 aria-label="Permalink to &quot;交叉类型&quot;">​</a></h1><p>在 TypeScript 中交叉类型是将多个类型合并为一个类型。通过 <code>&amp;</code> 运算符可以将现有的多种类型叠加到一起成为一种类型，它包含了所需的所有类型的特性。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>PartialPointX</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Point</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>PartialPointX</span><span style=color:#e1e4e8> </span><span style=color:#f97583>&amp;</span><span style=color:#e1e4e8> {</span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> point</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Point</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	x: </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	y: </span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>PartialPointX</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Point</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>PartialPointX</span><span style=color:#24292e> </span><span style=color:#d73a49>&amp;</span><span style=color:#24292e> {</span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> point</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Point</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	x: </span><span style=color:#005cc5>1</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	y: </span><span style=color:#005cc5>1</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>在上面代码中我们先定义了 <code>PartialPointX</code> 类型，接着使用 <code>&amp;</code> 运算符创建一个新的 <code>Point</code> 类型，表示一个含有 x 和 y 坐标的点，然后定义了一个 <code>Point</code> 类型的变量并初始化。</p><h3 id=同名基础类型属性的合并 tabindex=-1>同名基础类型属性的合并 <a class=header-anchor href=#同名基础类型属性的合并 aria-label="Permalink to &quot;同名基础类型属性的合并&quot;">​</a></h3><p>那么现在问题来了，假设在合并多个类型的过程中，刚好出现某些类型存在相同的成员，但对应的类型又不一致，比如：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>X</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>c</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>d</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Y</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>c</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>e</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>XY</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>X</span><span style=color:#e1e4e8> </span><span style=color:#f97583>&amp;</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Y</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>YX</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Y</span><span style=color:#e1e4e8> </span><span style=color:#f97583>&amp;</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>X</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> p</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>XY</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> q</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>YX</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>X</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>c</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>d</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Y</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>c</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>e</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>XY</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>X</span><span style=color:#24292e> </span><span style=color:#d73a49>&amp;</span><span style=color:#24292e> </span><span style=color:#6f42c1>Y</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>YX</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Y</span><span style=color:#24292e> </span><span style=color:#d73a49>&amp;</span><span style=color:#24292e> </span><span style=color:#6f42c1>X</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> p</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>XY</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> q</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>YX</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br></div></div><p>在上面的代码中，接口 X   和接口 Y 都含有一个相同的成员 c，但它们的类型不一致。对于这种情况，此时 XY 类型或 YX 类型中成员 c 的类型是不是可以是 <code>string</code> 或 <code>number</code> 类型呢？比如下面的例子：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>p </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {c: </span><span style=color:#79b8ff>6</span><span style=color:#e1e4e8>, d: </span><span style=color:#9ecbff>&#39;d&#39;</span><span style=color:#e1e4e8>, e: </span><span style=color:#9ecbff>&#39;e&#39;</span><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>p </span><span style=color:#d73a49>=</span><span style=color:#24292e> {c: </span><span style=color:#005cc5>6</span><span style=color:#24292e>, d: </span><span style=color:#032f62>&#39;d&#39;</span><span style=color:#24292e>, e: </span><span style=color:#032f62>&#39;e&#39;</span><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>q </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {c: </span><span style=color:#9ecbff>&#39;c&#39;</span><span style=color:#e1e4e8>, d: </span><span style=color:#9ecbff>&#39;d&#39;</span><span style=color:#e1e4e8>, e: </span><span style=color:#9ecbff>&#39;e&#39;</span><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>q </span><span style=color:#d73a49>=</span><span style=color:#24292e> {c: </span><span style=color:#032f62>&#39;c&#39;</span><span style=color:#24292e>, d: </span><span style=color:#032f62>&#39;d&#39;</span><span style=color:#24292e>, e: </span><span style=color:#032f62>&#39;e&#39;</span><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>为什么接口 X 和接口 Y 混入后，成员 c 的类型会变成 <code>never</code> 呢？这是因为混入后成员 c 的类型为 <code>string &amp; number</code>，即成员 c 的类型既可以是 <code>string</code> 类型又可以是 <code>number</code> 类型。很明显这种类型是不存在的，所以混入后成员 c 的类型为 <code>never</code>。</p><h3 id=同名非基础类型属性的合并 tabindex=-1>同名非基础类型属性的合并 <a class=header-anchor href=#同名非基础类型属性的合并 aria-label="Permalink to &quot;同名非基础类型属性的合并&quot;">​</a></h3><p>在上面示例中，刚好接口 X 和接口 Y 中内部成员 c 的类型都是基本数据类型，那么如果是非基本数据类型的话，又会是什么情形。我们来看个具体的例子：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>D</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>d</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>E</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>e</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>F</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>f</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>D</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>E</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>C</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>F</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ABC</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> </span><span style=color:#f97583>&amp;</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> </span><span style=color:#f97583>&amp;</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>C</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> abc</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ABC</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	x: {</span></span>
<span class=line><span style=color:#e1e4e8>		d: </span><span style=color:#79b8ff>true</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>		e: </span><span style=color:#9ecbff>&#39;semlinker&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>		f: </span><span style=color:#79b8ff>666</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;abc:&#39;</span><span style=color:#e1e4e8>, abc)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>D</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>d</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>E</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>e</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>F</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>f</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>D</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>E</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>C</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>F</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ABC</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> </span><span style=color:#d73a49>&amp;</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e> </span><span style=color:#d73a49>&amp;</span><span style=color:#24292e> </span><span style=color:#6f42c1>C</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> abc</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>ABC</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	x: {</span></span>
<span class=line><span style=color:#24292e>		d: </span><span style=color:#005cc5>true</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>		e: </span><span style=color:#032f62>&#39;semlinker&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>		f: </span><span style=color:#005cc5>666</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;abc:&#39;</span><span style=color:#24292e>, abc)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br><span class=line-number>20</span><br><span class=line-number>21</span><br><span class=line-number>22</span><br><span class=line-number>23</span><br><span class=line-number>24</span><br><span class=line-number>25</span><br><span class=line-number>26</span><br><span class=line-number>27</span><br><span class=line-number>28</span><br><span class=line-number>29</span><br><span class=line-number>30</span><br><span class=line-number>31</span><br></div></div><p>以上代码成功运行后，控制台会输出以下结果：</p><p>在混入多个类型时，若存在相同的成员，且成员类型为非基本数据类型，那么是可以成功合并。</p><h1 id=泛型 tabindex=-1>泛型 <a class=header-anchor href=#泛型 aria-label="Permalink to &quot;泛型&quot;">​</a></h1><p>软件工程中，我们不仅要创建一致的定义良好的 API，同时也要考虑可重用性。 组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。</p><p><strong>在像 C# 和 Java 这样的语言中，可以使用泛型来创建可重用的组件，一个组件可以支持多种类型的数据。 这样用户就可以以自己的数据类型来使用组件。</strong></p><p>设计泛型的关键目的是在成员之间提供有意义的约束，这些成员可以是：类的实例成员、类的方法、函数参数和函数返回值。</p><p>泛型（Generics）是允许同一个函数接受不同类型参数的一种模板。相比于使用 any 类型，使用泛型来创建可复用的组件要更好，因为泛型会保留参数类型。</p><p>泛型：类型传参的语法（把类型作为参数传递）</p><h3 id=泛型函数 tabindex=-1>泛型函数 <a class=header-anchor href=#泛型函数 aria-label="Permalink to &quot;泛型函数&quot;">​</a></h3><p>对于刚接触 TypeScript 泛型的读者来说，首次看到 <code>&lt;T&gt;</code> 语法会感到陌生。其实它没有什么特别，就像传递参数一样，我们传递了我们想要用于特定函数调用的类型。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1673355/1638751118310-179e6aaf-8ad5-4fa0-968e-6f7395bc0634.png#averageHue=%2360666c&amp;clientId=u7d4ef93c-96f6-4&amp;from=ui&amp;id=uc873e88f&amp;originHeight=674&amp;originWidth=1550&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=595674&amp;status=done&amp;style=none&amp;taskId=u37ffdb97-aaca-4118-bd07-c1ba0444611&amp;title=" alt="截屏2021-12-06 上午8.33.53.png"></p><p>参考上面的图片，当我们调用 <code>identity&lt;Number&gt;(1)</code> ，<code>Number</code> 类型就像参数 <code>1</code> 一样，它将在出现 <code>T</code> 的任何位置填充该类型。图中 <code>&lt;T&gt;</code> 内部的 <code>T</code> 被称为类型变量，它是我们希望传递给 identity 函数的类型占位符，同时它被分配给 <code>value</code> 参数用来代替它的类型：此时 <code>T</code> 充当的是类型，而不是特定的 Number 类型。</p><p>其中 <code>T</code> 代表 <strong>Type</strong>，在定义泛型时通常用作第一个类型变量名称。但实际上 <code>T</code> 可以用任何有效名称代替。除了 <code>T</code> 之外，以下是常见泛型变量代表的意思：</p><ul><li>K（Key）：表示对象中的键类型；</li><li>V（Value）：表示对象中的值类型；</li><li>E（Element）：表示元素类型。</li></ul><p>其实并不是只能定义一个类型变量，我们可以引入希望定义的任何数量的类型变量。比如我们引入一个新的类型变量 <code>U</code>，用于扩展我们定义的 <code>identity</code> 函数：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>identity</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>&gt;(</span><span style=color:#ffab70>value</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>message</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(message)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> value</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>identity</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>Number</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt;(</span><span style=color:#79b8ff>68</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Semlinker&#39;</span><span style=color:#e1e4e8>))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>identity</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>U</span><span style=color:#24292e>&gt;(</span><span style=color:#e36209>value</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#e36209>message</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>U</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(message)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> value</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>identity</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>Number</span><span style=color:#24292e>, </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt;(</span><span style=color:#005cc5>68</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Semlinker&#39;</span><span style=color:#24292e>))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1673355/1638751148515-b7ec04b0-1831-40d1-a1b3-2ed9c53d4d98.png#averageHue=%2353595e&amp;clientId=u7d4ef93c-96f6-4&amp;from=ui&amp;id=u3ec519d0&amp;originHeight=1004&amp;originWidth=2330&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=1095574&amp;status=done&amp;style=none&amp;taskId=u1a73312d-d529-4ee5-b8af-22ddca1df74&amp;title=" alt=下载.png></p><p>除了为类型变量显式设定值之外，一种更常见的做法是使编译器自动选择这些类型，从而使代码更简洁。我们可以完全省略尖括号，比如：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>identity</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>&gt;(</span><span style=color:#ffab70>value</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>message</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(message)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> value</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>identity</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>68</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;Semlinker&#39;</span><span style=color:#e1e4e8>))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>identity</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>U</span><span style=color:#24292e>&gt;(</span><span style=color:#e36209>value</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#e36209>message</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>U</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(message)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> value</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(</span><span style=color:#6f42c1>identity</span><span style=color:#24292e>(</span><span style=color:#005cc5>68</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;Semlinker&#39;</span><span style=color:#24292e>))</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>对于上述代码，编译器足够聪明，能够知道我们的参数类型，并将它们赋值给 T 和 U，而不需要开发人员显式指定它们。</p><h3 id=泛型接口 tabindex=-1>泛型接口 <a class=header-anchor href=#泛型接口 aria-label="Permalink to &quot;泛型接口&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>GenericIdentityFn</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; {</span></span>
<span class=line><span style=color:#e1e4e8>	(</span><span style=color:#ffab70>arg</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>GenericIdentityFn</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; {</span></span>
<span class=line><span style=color:#24292e>	(</span><span style=color:#e36209>arg</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><h3 id=泛型类 tabindex=-1>泛型类 <a class=header-anchor href=#泛型类 aria-label="Permalink to &quot;泛型类&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>GenericNumber</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>zeroValue</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>add</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> myGenericNumber </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>GenericNumber</span><span style=color:#e1e4e8>&lt;</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>&gt;()</span></span>
<span class=line><span style=color:#e1e4e8>myGenericNumber.zeroValue </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>0</span></span>
<span class=line><span style=color:#e1e4e8>myGenericNumber.</span><span style=color:#b392f0>add</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>x</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>y</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> x </span><span style=color:#f97583>+</span><span style=color:#e1e4e8> y</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>GenericNumber</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>zeroValue</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>add</span><span style=color:#d73a49>:</span><span style=color:#24292e> (</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> myGenericNumber </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>GenericNumber</span><span style=color:#24292e>&lt;</span><span style=color:#005cc5>number</span><span style=color:#24292e>&gt;()</span></span>
<span class=line><span style=color:#24292e>myGenericNumber.zeroValue </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>0</span></span>
<span class=line><span style=color:#24292e>myGenericNumber.</span><span style=color:#6f42c1>add</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>x</span><span style=color:#24292e>, </span><span style=color:#e36209>y</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> x </span><span style=color:#d73a49>+</span><span style=color:#24292e> y</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h1 id=类型运算符 tabindex=-1>类型运算符 <a class=header-anchor href=#类型运算符 aria-label="Permalink to &quot;类型运算符&quot;">​</a></h1><h3 id=typeof tabindex=-1>typeof <a class=header-anchor href=#typeof aria-label="Permalink to &quot;typeof&quot;">​</a></h3><p>在 TypeScript 中，<code>typeof</code> 操作符可以用来获取一个变量声明或对象的类型。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>sem</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {name: </span><span style=color:#9ecbff>&#39;semlinker&#39;</span><span style=color:#e1e4e8>, age: </span><span style=color:#79b8ff>33</span><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Sem</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> sem </span><span style=color:#6a737d>// -&gt; Person</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>toArray</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Array</span><span style=color:#e1e4e8>&lt;</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>&gt; {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> [x]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Func</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> toArray </span><span style=color:#6a737d>// -&gt; (x: number) =&gt; number[]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>sem</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {name: </span><span style=color:#032f62>&#39;semlinker&#39;</span><span style=color:#24292e>, age: </span><span style=color:#005cc5>33</span><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Sem</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> sem </span><span style=color:#6a737d>// -&gt; Person</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>toArray</span><span style=color:#24292e>(</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Array</span><span style=color:#24292e>&lt;</span><span style=color:#005cc5>number</span><span style=color:#24292e>&gt; {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> [x]</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Func</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> toArray </span><span style=color:#6a737d>// -&gt; (x: number) =&gt; number[]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br></div></div><h3 id=keyof tabindex=-1>keyof <a class=header-anchor href=#keyof aria-label="Permalink to &quot;keyof&quot;">​</a></h3><p><code>keyof</code> 操作符是在 TypeScript 2.1 版本引入的，该操作符可以用于获取某种类型的所有键，其返回类型是联合类型。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8> </span><span style=color:#6a737d>// &quot;name&quot; | &quot;age&quot;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8>[] </span><span style=color:#6a737d>// &quot;length&quot; | &quot;toString&quot; | &quot;pop&quot; | &quot;push&quot; | &quot;concat&quot; | &quot;join&quot;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K3</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> {[</span><span style=color:#ffab70>x</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Person</span><span style=color:#e1e4e8>} </span><span style=color:#6a737d>// string | number</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>K1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e> </span><span style=color:#6a737d>// &quot;name&quot; | &quot;age&quot;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>K2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e>[] </span><span style=color:#6a737d>// &quot;length&quot; | &quot;toString&quot; | &quot;pop&quot; | &quot;push&quot; | &quot;concat&quot; | &quot;join&quot;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>K3</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> {[</span><span style=color:#e36209>x</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Person</span><span style=color:#24292e>} </span><span style=color:#6a737d>// string | number</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>在 TypeScript 中支持两种索引签名，数字索引和字符串索引：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>StringArray</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// 字符串索引 -&gt; keyof StringArray =&gt; string | number</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#ffab70>index</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>StringArray1</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// 数字索引 -&gt; keyof StringArray1 =&gt; number</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#ffab70>index</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>StringArray</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// 字符串索引 -&gt; keyof StringArray =&gt; string | number</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#e36209>index</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>StringArray1</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// 数字索引 -&gt; keyof StringArray1 =&gt; number</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#e36209>index</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>为了同时支持两种索引类型，就得要求数字索引的返回值必须是字符串索引返回值的子类。<strong>其中的原因就是当使用数值索引时，JavaScript 在执行索引操作时，会先把数值索引先转换为字符串索引</strong>。所以 <code>keyof { [x: string]: Person }</code> 的结果会返回 <code>string | number</code>。</p><h3 id=in tabindex=-1>in <a class=header-anchor href=#in aria-label="Permalink to &quot;in&quot;">​</a></h3><p><code>in</code> 用来遍历枚举（联合）类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Keys</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;a&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;b&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;c&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>p</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Keys</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>} </span><span style=color:#6a737d>// -&gt; { a: any, b: any, c: any }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Keys</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;a&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;b&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;c&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>p</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>Keys</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>} </span><span style=color:#6a737d>// -&gt; { a: any, b: any, c: any }</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><h3 id=extends tabindex=-1>extends <a class=header-anchor href=#extends aria-label="Permalink to &quot;extends&quot;">​</a></h3><p>有时候我们定义的泛型不想过于灵活或者说想继承某些类等，可以通过 extends 关键字添加泛型约束。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Lengthwise</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>length</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>loggingIdentity</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Lengthwise</span><span style=color:#e1e4e8>&gt;(</span><span style=color:#ffab70>arg</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(arg.</span><span style=color:#79b8ff>length</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> arg</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Lengthwise</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>length</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>loggingIdentity</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>Lengthwise</span><span style=color:#24292e>&gt;(</span><span style=color:#e36209>arg</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(arg.</span><span style=color:#005cc5>length</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> arg</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>现在这个泛型函数被定义了约束，因此它不再是适用于任意类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>loggingIdentity</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>) </span><span style=color:#6a737d>// Error, number doesn&#39;t have a .length property</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>loggingIdentity</span><span style=color:#24292e>(</span><span style=color:#005cc5>3</span><span style=color:#24292e>) </span><span style=color:#6a737d>// Error, number doesn&#39;t have a .length property</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>这时我们需要传入符合约束类型的值，必须包含必须的属性：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>loggingIdentity</span><span style=color:#e1e4e8>({length: </span><span style=color:#79b8ff>10</span><span style=color:#e1e4e8>, value: </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>loggingIdentity</span><span style=color:#24292e>({length: </span><span style=color:#005cc5>10</span><span style=color:#24292e>, value: </span><span style=color:#005cc5>3</span><span style=color:#24292e>})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><h3 id="" tabindex=-1><a class=header-anchor href=# aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id=infer tabindex=-1>infer <a class=header-anchor href=#infer aria-label="Permalink to &quot;infer&quot;">​</a></h3><p>在条件类型语句中，可以用 <code>infer</code> 声明一个类型变量并且对它进行使用。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ReturnType</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[]) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ReturnType</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[]) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>以上代码中 <code>infer R</code> 就是声明一个变量来承载传入函数签名的返回值类型，简单说就是用它取到函数返回值的类型方便之后使用。</p><ul><li><code>infer</code>关键词作用是让 Ts 自己推导类型，并将推导结果存储在其参数绑定的类型上。</li><li>Eg:<code>infer P</code> 就是将结果存在类型<code>P</code>上，供使用。</li><li><code>infer</code>关键词只能在<code>extends</code>条件类型上使用，不能在其他地方使用。</li></ul><h1 id=泛型工具类型 tabindex=-1>泛型工具类型 <a class=header-anchor href=#泛型工具类型 aria-label="Permalink to &quot;泛型工具类型&quot;">​</a></h1><p>为了方便开发者 TypeScript 内置了一些常用的工具类型，比如 Partial、Required、Readonly、Record 和 ReturnType 等。</p><h3 id=partial tabindex=-1>Partial <a class=header-anchor href=#partial aria-label="Permalink to &quot;Partial&quot;">​</a></h3><p><code>Partial&lt;T&gt;</code> 的作用就是将某个类型里的属性全部变为可选项 <code>?</code>。</p><p><strong>定义：</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * node_modules/typescript/lib/lib.es5.d.ts</span></span>
<span class=line><span style=color:#6a737d> * Make all properties in T optional</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Partial</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * node_modules/typescript/lib/lib.es5.d.ts</span></span>
<span class=line><span style=color:#6a737d> * Make all properties in T optional</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Partial</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>]</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>在以上代码中，首先通过 <code>keyof T</code> 拿到 <code>T</code> 的所有属性名，然后使用 <code>in</code> 进行遍历，将值赋给 <code>P</code>，最后通过 <code>T[P]</code> 取得相应的属性值。中间的 <code>?</code> 号，用于将所有属性变为可选。</p><p><strong>示例：</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Todo</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>title</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>description</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>updateTodo</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>todo</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Todo</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>fieldsToUpdate</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Partial</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>Todo</span><span style=color:#e1e4e8>&gt;) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> {</span><span style=color:#f97583>...</span><span style=color:#e1e4e8>todo, </span><span style=color:#f97583>...</span><span style=color:#e1e4e8>fieldsToUpdate}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>todo1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	title: </span><span style=color:#9ecbff>&#39;Learn TS&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	description: </span><span style=color:#9ecbff>&#39;Learn TypeScript&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>todo2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>updateTodo</span><span style=color:#e1e4e8>(todo1, {</span></span>
<span class=line><span style=color:#e1e4e8>	description: </span><span style=color:#9ecbff>&#39;Learn TypeScript Enum&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Todo</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>title</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>description</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>updateTodo</span><span style=color:#24292e>(</span><span style=color:#e36209>todo</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Todo</span><span style=color:#24292e>, </span><span style=color:#e36209>fieldsToUpdate</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Partial</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>Todo</span><span style=color:#24292e>&gt;) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> {</span><span style=color:#d73a49>...</span><span style=color:#24292e>todo, </span><span style=color:#d73a49>...</span><span style=color:#24292e>fieldsToUpdate}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>todo1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	title: </span><span style=color:#032f62>&#39;Learn TS&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	description: </span><span style=color:#032f62>&#39;Learn TypeScript&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>todo2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>updateTodo</span><span style=color:#24292e>(todo1, {</span></span>
<span class=line><span style=color:#24292e>	description: </span><span style=color:#032f62>&#39;Learn TypeScript Enum&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br></div></div><p>在上面的 <code>updateTodo</code> 方法中，我们利用 <code>Partial&lt;T&gt;</code> 工具类型，定义 <code>fieldsToUpdate</code> 的类型为 <code>Partial&lt;Todo&gt;</code>，即：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#e1e4e8>   title</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> string </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>   description</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> string </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>undefined</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>{</span></span>
<span class=line><span style=color:#24292e>   title</span><span style=color:#d73a49>?:</span><span style=color:#24292e> string </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>   description</span><span style=color:#d73a49>?:</span><span style=color:#24292e> string </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#005cc5>undefined</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h4 id=partial-实现原理解析 tabindex=-1>Partial 实现原理解析 <a class=header-anchor href=#partial-实现原理解析 aria-label="Permalink to &quot;Partial 实现原理解析&quot;">​</a></h4><p><code>Partial&lt;T&gt;</code>将<code>T</code>的所有属性变成可选的。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 核心实现就是通过映射类型遍历T上所有的属性，</span></span>
<span class=line><span style=color:#6a737d> * 然后将每个属性设置为可选属性</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Partial</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 核心实现就是通过映射类型遍历T上所有的属性，</span></span>
<span class=line><span style=color:#6a737d> * 然后将每个属性设置为可选属性</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Partial</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>]</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><ul><li><code>[P in keyof T]</code>通过映射类型，遍历<code>T</code>上的所有属性</li><li><code>?:</code>设置为属性为可选的</li><li><code>T[P]</code>设置类型为原来的类型</li></ul><p>扩展一下，将制定的<code>key</code>变成可选类型:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 主要通过K extends keyof T约束K必须为keyof T的子类型</span></span>
<span class=line><span style=color:#6a737d> * keyof T得到的是T的所有key组成的联合类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>PartialOptional</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**      M</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> *     type Eg1 = { key1?: string; key2?: number }</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>PartialOptional</span><span style=color:#e1e4e8>&lt;</span></span>
<span class=line><span style=color:#e1e4e8>	{</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>key1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>key2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>key3</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;&#39;</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#9ecbff>&#39;key1&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;key2&#39;</span></span>
<span class=line><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 主要通过K extends keyof T约束K必须为keyof T的子类型</span></span>
<span class=line><span style=color:#6a737d> * keyof T得到的是T的所有key组成的联合类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>PartialOptional</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>]</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**      M</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> *     type Eg1 = { key1?: string; key2?: number }</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>PartialOptional</span><span style=color:#24292e>&lt;</span></span>
<span class=line><span style=color:#24292e>	{</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>key1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>key2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>key3</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;&#39;</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#032f62>&#39;key1&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;key2&#39;</span></span>
<span class=line><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br><span class=line-number>20</span><br></div></div><h3 id=readonly-原理解析 tabindex=-1>Readonly 原理解析 <a class=header-anchor href=#readonly-原理解析 aria-label="Permalink to &quot;Readonly 原理解析&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 主要实现是通过映射遍历所有key，</span></span>
<span class=line><span style=color:#6a737d> * 然后给每个key增加一个readonly修饰符</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Readonly</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>readonly</span><span style=color:#e1e4e8> [</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = {</span></span>
<span class=line><span style=color:#6a737d> *   readonly key1: string;</span></span>
<span class=line><span style=color:#6a737d> *   readonly key2: number;</span></span>
<span class=line><span style=color:#6a737d> * }</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Readonly</span><span style=color:#e1e4e8>&lt;{</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>key1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>key2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 主要实现是通过映射遍历所有key，</span></span>
<span class=line><span style=color:#6a737d> * 然后给每个key增加一个readonly修饰符</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Readonly</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>readonly</span><span style=color:#24292e> [</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = {</span></span>
<span class=line><span style=color:#6a737d> *   readonly key1: string;</span></span>
<span class=line><span style=color:#6a737d> *   readonly key2: number;</span></span>
<span class=line><span style=color:#6a737d> * }</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Readonly</span><span style=color:#24292e>&lt;{</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>key1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>key2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br></div></div><h3 id=pick tabindex=-1>Pick <a class=header-anchor href=#pick aria-label="Permalink to &quot;Pick&quot;">​</a></h3><p>挑选一组属性并组成一个新的类型。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Pick</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Pick</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>基本和上述同样的知识点，就不再赘述了。</p><h3 id=record tabindex=-1>Record <a class=header-anchor href=#record aria-label="Permalink to &quot;Record&quot;">​</a></h3><p>构造一个<code>type</code>，<code>key</code>为联合类型中的每个子类型，类型为<code>T</code>。文字不好理解，先看例子：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg1 = {</span></span>
<span class=line><span style=color:#6a737d> *   a: { key1: string; };</span></span>
<span class=line><span style=color:#6a737d> *   b: { key1: string; };</span></span>
<span class=line><span style=color:#6a737d> * }</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> 就是遍历第一个参数&#39;a&#39; | &#39;b&#39;的每个子类型，然后将值设置为第二参数</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Record</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;a&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;b&#39;</span><span style=color:#e1e4e8>, {</span><span style=color:#ffab70>key1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>}&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg1 = {</span></span>
<span class=line><span style=color:#6a737d> *   a: { key1: string; };</span></span>
<span class=line><span style=color:#6a737d> *   b: { key1: string; };</span></span>
<span class=line><span style=color:#6a737d> * }</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> 就是遍历第一个参数&#39;a&#39; | &#39;b&#39;的每个子类型，然后将值设置为第二参数</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Record</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;a&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;b&#39;</span><span style=color:#24292e>, {</span><span style=color:#e36209>key1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>}&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>Record 具体实现：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 核心实现就是遍历K，将值设置为T</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Record</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = {a: B, b: B}</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>b</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>key1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>key2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Record</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 核心实现就是遍历K，将值设置为T</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Record</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>, </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = {a: B, b: B}</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>b</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>key1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>key2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Record</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e>, </span><span style=color:#6f42c1>B</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br><span class=line-number>20</span><br></div></div><ul><li>值得注意的是<code>keyof any</code>得到的是<code>string | number | symbol</code></li><li>原因在于类型 key 的类型只能为<code>string | number | symbol</code></li></ul><p><strong>扩展: 同态与非同态。划重点！！！ 划重点！！！ 划重点！！！</strong></p><ul><li><code>Partial</code>、<code>Readonly</code>和<code>Pick</code>都属于同态的，即其实现需要输入类型 T 来拷贝属性，因此属性修饰符（例如 readonly、?:）都会被拷贝。可从下面例子验证：</li></ul><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = {readonly a?: string}</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Pick</span><span style=color:#e1e4e8>&lt;{</span><span style=color:#f97583>readonly</span><span style=color:#e1e4e8> </span><span style=color:#ffab70>a</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>}, </span><span style=color:#9ecbff>&#39;a&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = {readonly a?: string}</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Pick</span><span style=color:#24292e>&lt;{</span><span style=color:#d73a49>readonly</span><span style=color:#24292e> </span><span style=color:#e36209>a</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>}, </span><span style=color:#032f62>&#39;a&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>从<code>Eg</code>的结果可以看到，Pick 在拷贝属性时，连带拷贝了<code>readonly</code>和<code>?:</code>的修饰符。</p><ul><li><code>Record</code>是非同态的，不需要拷贝属性，因此不会拷贝属性修饰符</li></ul><p>为什么<code>Pick</code>拷贝了属性，而<code>Record</code>没有拷贝？我们来对比一下其实现：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Pick</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Record</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Pick</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Record</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>, </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>可以看到<code>Pick</code>的实现中，注意<code>P in K</code>（本质是<code>P in keyof T</code>），T 为输入的类型，而<code>keyof T</code>则遍历了输入类型；而<code>Record</code>的实现中，并没有遍历所有输入的类型，K 只是约束为<code>keyof any</code>的子类型即可。</p><p>最后再类比一下<code>Pick、Partial、readonly</code>这几个类型工具，无一例外，都是使用到了<code>keyof T</code>来辅助拷贝传入类型的属性。</p><h3 id=exclude-原理解析 tabindex=-1>Exclude 原理解析 <a class=header-anchor href=#exclude-原理解析 aria-label="Permalink to &quot;Exclude 原理解析&quot;">​</a></h3><p><code>Exclude&lt;T, U&gt;</code>提取存在于<code>T</code>，但不存在于<code>U</code>的类型组成的联合类型。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 遍历T中的所有子类型，如果该子类型约束于U（存在于U、兼容于U），</span></span>
<span class=line><span style=color:#6a737d> * 则返回never类型，否则返回该子类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Exclude</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = &#39;key1&#39;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Exclude</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;key1&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;key2&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;key2&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 遍历T中的所有子类型，如果该子类型约束于U（存在于U、兼容于U），</span></span>
<span class=line><span style=color:#6a737d> * 则返回never类型，否则返回该子类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Exclude</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>U</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>U</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = &#39;key1&#39;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Exclude</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;key1&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;key2&#39;</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;key2&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br></div></div><p>敲重点！！！</p><ul><li><code>never</code>表示一个不存在的类型</li><li><code>never</code>与其他类型的联合后，是没有<code>never</code>的</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang></span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>/**</span></span>
<span class=line><span style=color:#e1e4e8> * @example</span></span>
<span class=line><span style=color:#e1e4e8> * type Eg2 = string | number</span></span>
<span class=line><span style=color:#e1e4e8> */</span></span>
<span class=line><span style=color:#e1e4e8>type Eg2 = string | number | never</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>/**</span></span>
<span class=line><span style=color:#24292e> * @example</span></span>
<span class=line><span style=color:#24292e> * type Eg2 = string | number</span></span>
<span class=line><span style=color:#24292e> */</span></span>
<span class=line><span style=color:#24292e>type Eg2 = string | number | never</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>因此上述<code>Eg</code>其实就等于<code>key1 | never</code>,也就是<code>type Eg = key1</code></p><h3 id=extract tabindex=-1>Extract <a class=header-anchor href=#extract aria-label="Permalink to &quot;Extract&quot;">​</a></h3><p><code>Extract&lt;T, U&gt;</code>提取联合类型 T 和联合类型 U 的所有交集。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Extract</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> *  type Eg = &#39;key1&#39;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Extract</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;key1&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;key2&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;key1&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Extract</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>U</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>U</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> *  type Eg = &#39;key1&#39;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Extract</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;key1&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;key2&#39;</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;key1&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><h3 id=omit-原理解析 tabindex=-1>Omit 原理解析 <a class=header-anchor href=#omit-原理解析 aria-label="Permalink to &quot;Omit 原理解析&quot;">​</a></h3><p><code>Omit&lt;T, K&gt;</code>从类型<code>T</code>中剔除<code>K</code>中的所有属性。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 利用Pick实现Omit</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Omit</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Pick</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>Exclude</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>&gt;&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 利用Pick实现Omit</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Omit</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Pick</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>Exclude</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e>&gt;&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><ul><li>换种思路想一下，其实现可以是利用<code>Pick</code>提取我们需要的 keys 组成的类型</li><li>因此也就是 <code>Omit = Pick&lt;T, 我们需要的属性联合&gt;</code></li><li>而我们需要的属性联合就是，从 T 的属性联合中排出存在于联合类型 K 中的</li><li>因此也就是<code>Exclude&lt;keyof T, K&gt;</code>;</li></ul><p>如果不利用 Pick 实现呢?</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 利用映射类型Omit</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Omit2</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Exclude</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>&gt;]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 利用映射类型Omit</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Omit2</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	[</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>Exclude</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e>&gt;]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>P</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><ul><li>其实现类似于 Pick 的原理实现</li><li>区别在于是遍历的我们需要的属性不一样</li><li>我们需要的属性和上面的例子一样，就是<code>Exclude&lt;keyof T, K&gt;</code></li><li>因此，遍历就是<code>[P in Exclude&lt;keyof T, K&gt;]</code></li></ul><h3 id=parameters-和-returntype tabindex=-1>Parameters 和 ReturnType <a class=header-anchor href=#parameters-和-returntype aria-label="Permalink to &quot;Parameters 和 ReturnType&quot;">​</a></h3><p><strong>Parameters 获取函数的参数类型，将每个参数类型放在一个元组中。</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> 具体实现</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Parameters</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> (</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span></span>
<span class=line><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = [arg1: string, arg2: number];</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Parameters</span><span style=color:#e1e4e8>&lt;(</span><span style=color:#ffab70>arg1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>arg2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> 具体实现</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Parameters</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> (</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span></span>
<span class=line><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = [arg1: string, arg2: number];</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Parameters</span><span style=color:#24292e>&lt;(</span><span style=color:#e36209>arg1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>arg2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br></div></div><ul><li><code>Parameters</code>首先约束参数<code>T</code>必须是个函数类型，所以<code>(...args: any) =&gt; any&gt;</code>替换成<code>Function</code>也是可以的</li><li>具体实现就是，判断<code>T</code>是否是函数类型，如果是则使用<code>inter P</code>让 ts 自己推导出函数的参数类型，并将推导的结果存到类型<code>P</code>上，否则返回<code>never</code>；</li></ul><p><strong>敲重点！！！敲重点！！！敲重点！！！</strong></p><ul><li><code>infer</code>关键词作用是让 Ts 自己推导类型，并将推导结果存储在其参数绑定的类型上。</li><li>Eg:<code>infer P</code> 就是将结果存在类型<code>P</code>上，供使用。</li><li><code>infer</code>关键词只能在<code>extends</code>条件类型上使用，不能在其他地方使用。</li></ul><p><strong>再敲重点！！！再敲重点！！！再敲重点！！！</strong></p><ul><li><code>type Eg = [arg1: string, arg2: number]</code>这是一个元组，但是和我们常见的元组<code>type tuple = [string, number]</code>。官网未提到该部分文档说明，其实可以把这个作为类似命名元组，或者具名元组的意思去理解。实质上没有什么特殊的作用，比如无法通过这个具名去取值不行的。但是从语义化的角度，个人觉得多了语义化的表达罢了。</li><li>定义元祖的可选项，只能是最后的选项</li></ul><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 普通方式</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Tuple1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>number</span><span style=color:#f97583>?</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Tuple1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;aa&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>11</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>a2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Tuple1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;aa&#39;</span><span style=color:#e1e4e8>]</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 具名方式</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Tuple2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#b392f0>name</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>age</span><span style=color:#f97583>?</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>b</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Tuple2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;aa&#39;</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>11</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>b2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Tuple2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#9ecbff>&#39;aa&#39;</span><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 普通方式</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Tuple1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#005cc5>number</span><span style=color:#d73a49>?</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Tuple1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;aa&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>11</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>a2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Tuple1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;aa&#39;</span><span style=color:#24292e>]</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 具名方式</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Tuple2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#6f42c1>name</span><span style=color:#24292e>: </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#6f42c1>age</span><span style=color:#d73a49>?</span><span style=color:#24292e>: </span><span style=color:#005cc5>number</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>b</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Tuple2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;aa&#39;</span><span style=color:#24292e>, </span><span style=color:#005cc5>11</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>b2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Tuple2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#032f62>&#39;aa&#39;</span><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br></div></div><p>扩展：<code>infer</code>实现一个推导数组所有元素的类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 约束参数T为数组类型，</span></span>
<span class=line><span style=color:#6a737d> * 判断T是否为数组，如果是数组类型则推导数组元素的类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>FalttenArray</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Array</span><span style=color:#e1e4e8>&lt;</span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>&gt;&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Array</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * type Eg1 = number | string;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>FalttenArray</span><span style=color:#e1e4e8>&lt;[</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>]&gt;</span></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = 1 | &#39;asd&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>FalttenArray</span><span style=color:#e1e4e8>&lt;[</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&#39;asd&#39;</span><span style=color:#e1e4e8>]&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 约束参数T为数组类型，</span></span>
<span class=line><span style=color:#6a737d> * 判断T是否为数组，如果是数组类型则推导数组元素的类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>FalttenArray</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>Array</span><span style=color:#24292e>&lt;</span><span style=color:#005cc5>any</span><span style=color:#24292e>&gt;&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>Array</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * type Eg1 = number | string;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>FalttenArray</span><span style=color:#24292e>&lt;[</span><span style=color:#005cc5>number</span><span style=color:#24292e>, </span><span style=color:#005cc5>string</span><span style=color:#24292e>]&gt;</span></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = 1 | &#39;asd&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>FalttenArray</span><span style=color:#24292e>&lt;[</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#032f62>&#39;asd&#39;</span><span style=color:#24292e>]&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br></div></div><p><strong>ReturnType 获取函数的返回值类型。</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> ReturnType的实现其实和Parameters的基本一样</span></span>
<span class=line><span style=color:#6a737d> * 无非是使用infer R的位置不一样。</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ReturnType</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> (</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> ReturnType的实现其实和Parameters的基本一样</span></span>
<span class=line><span style=color:#6a737d> * 无非是使用infer R的位置不一样。</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ReturnType</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> (</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><h3 id=constructorparameters tabindex=-1>ConstructorParameters <a class=header-anchor href=#constructorparameters aria-label="Permalink to &quot;ConstructorParameters&quot;">​</a></h3><p><code>ConstructorParameters</code>可以获取类的构造函数的参数类型，存在一个元组中。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 核心实现还是利用infer进行推导构造函数的参数类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ConstructorParameters</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>abstract</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>abstract</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = string;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ErrorConstructor</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>new</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>message</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Error</span></span>
<span class=line><span style=color:#e1e4e8>	(</span><span style=color:#ffab70>message</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Error</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>readonly</span><span style=color:#e1e4e8> </span><span style=color:#ffab70>prototype</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Error</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ConstructorParameters</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>ErrorConstructor</span><span style=color:#e1e4e8>&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = [name: string, sex?: number];</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>People</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>constructor</span><span style=color:#e1e4e8>(</span><span style=color:#f97583>public</span><span style=color:#e1e4e8> </span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>sex</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>) {}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ConstructorParameters</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> People&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 核心实现还是利用infer进行推导构造函数的参数类型</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ConstructorParameters</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>abstract</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>abstract</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg = string;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>ErrorConstructor</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>new</span><span style=color:#24292e> (</span><span style=color:#e36209>message</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Error</span></span>
<span class=line><span style=color:#24292e>	(</span><span style=color:#e36209>message</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Error</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>readonly</span><span style=color:#24292e> </span><span style=color:#e36209>prototype</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Error</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>ConstructorParameters</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>ErrorConstructor</span><span style=color:#24292e>&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = [name: string, sex?: number];</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>People</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>constructor</span><span style=color:#24292e>(</span><span style=color:#d73a49>public</span><span style=color:#24292e> </span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>sex</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>) {}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>ConstructorParameters</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> People&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br><span class=line-number>20</span><br><span class=line-number>21</span><br><span class=line-number>22</span><br><span class=line-number>23</span><br><span class=line-number>24</span><br><span class=line-number>25</span><br></div></div><ul><li>首先约束参数<code>T</code>为拥有构造函数的类。注意这里有个<code>abstract</code>修饰符，等下会说明。</li><li>实现时，判断<code>T</code>是满足约束的类时，利用<code>infer P</code>自动推导构造函数的参数类型，并最终返回该类型。</li></ul><p><strong>敲重点！！！敲重点！！！敲重点！！！</strong></p><p>那么疑问来了，为什么要对 T 要约束为<code>abstract</code>抽象类呢？看下面例子：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 定义一个普通类</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>MyClass</span><span style=color:#e1e4e8> {}</span></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 定义一个抽象类</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>abstract</span><span style=color:#e1e4e8> </span><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>MyAbstractClass</span><span style=color:#e1e4e8> {}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 可以赋值</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>c1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> MyClass </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> MyClass</span></span>
<span class=line><span style=color:#6a737d>// 报错，无法将抽象构造函数类型分配给非抽象构造函数类型</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>c2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> MyClass </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> MyAbstractClass</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 可以赋值</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>c3</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> MyAbstractClass </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> MyClass</span></span>
<span class=line><span style=color:#6a737d>// 可以赋值</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>c4</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> MyAbstractClass </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> MyAbstractClass</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 定义一个普通类</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>MyClass</span><span style=color:#24292e> {}</span></span>
<span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 定义一个抽象类</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>abstract</span><span style=color:#24292e> </span><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>MyAbstractClass</span><span style=color:#24292e> {}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 可以赋值</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>c1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> MyClass </span><span style=color:#d73a49>=</span><span style=color:#24292e> MyClass</span></span>
<span class=line><span style=color:#6a737d>// 报错，无法将抽象构造函数类型分配给非抽象构造函数类型</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>c2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> MyClass </span><span style=color:#d73a49>=</span><span style=color:#24292e> MyAbstractClass</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// 可以赋值</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>c3</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> MyAbstractClass </span><span style=color:#d73a49>=</span><span style=color:#24292e> MyClass</span></span>
<span class=line><span style=color:#6a737d>// 可以赋值</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>c4</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> MyAbstractClass </span><span style=color:#d73a49>=</span><span style=color:#24292e> MyAbstractClass</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br></div></div><p>由此看出，如果将类型定义为抽象类（抽象构造函数），则既可以赋值为抽象类，也可以赋值为普通类；而反之则不行。</p><p><strong>再敲重点！！！再敲重点！！！再敲重点！！！</strong></p><p>这里继续提问，直接使用类作为类型，和使用<code>typeof 类</code>作为类型，有什么区别呢？</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 定义一个类</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>People</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>constructor</span><span style=color:#e1e4e8>() {}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// p1可以正常赋值</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>p1</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>People</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>People</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#6a737d>// 等号后面的People报错，类型“typeof People”缺少类型“People”中的以下属性: name, age</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>p2</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>People</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> People</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// p3报错，类型 &quot;People&quot; 中缺少属性 &quot;prototype&quot;，但类型 &quot;typeof People&quot; 中需要该属性</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>p3</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> People </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>People</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#6a737d>// p4可以正常赋值</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>p4</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> People </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> People</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * 定义一个类</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>People</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>constructor</span><span style=color:#24292e>() {}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// p1可以正常赋值</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>p1</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>People</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>People</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#6a737d>// 等号后面的People报错，类型“typeof People”缺少类型“People”中的以下属性: name, age</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>p2</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>People</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> People</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>// p3报错，类型 &quot;People&quot; 中缺少属性 &quot;prototype&quot;，但类型 &quot;typeof People&quot; 中需要该属性</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>p3</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> People </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>People</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#6a737d>// p4可以正常赋值</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>p4</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> People </span><span style=color:#d73a49>=</span><span style=color:#24292e> People</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br></div></div><p>结论是这样的：</p><ul><li>当把类直接作为类型时，该类型约束的是该类型必须是类的实例；即该类型获取的是该类上的实例属性和实例方法（也叫原型方法）；</li><li>当把<code>typeof 类</code>作为类型时，约束的满足该类的类型；即该类型获取的是该类上的静态属性和方法。</li><li><br></li></ul><p>最后，只需要对<code>infer</code>的使用换个位置，便可以获取构造函数返回值的类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>InstanceType</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>abstract</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>abstract</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> (</span><span style=color:#f97583>...</span><span style=color:#ffab70>args</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>InstanceType</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>abstract</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>abstract</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> (</span><span style=color:#d73a49>...</span><span style=color:#e36209>args</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><h3 id=ts-compiler-内部实现的类型 tabindex=-1>Ts compiler 内部实现的类型 <a class=header-anchor href=#ts-compiler-内部实现的类型 aria-label="Permalink to &quot;Ts compiler 内部实现的类型&quot;">​</a></h3><ul><li>Uppercase</li></ul><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> 构造一个将字符串转大写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg1 = &#39;ABCD&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Uppercase</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;abcd&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> 构造一个将字符串转大写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg1 = &#39;ABCD&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Uppercase</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;abcd&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><ul><li>Lowercase</li></ul><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> 构造一个将字符串转小大写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = &#39;abcd&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg2</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Lowercase</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;ABCD&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> 构造一个将字符串转小大写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg2 = &#39;abcd&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg2</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Lowercase</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;ABCD&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><ul><li>Capitalize</li></ul><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> 构造一个将字符串首字符转大写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg3 = &#39;abcd&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg3</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Capitalize</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;Abcd&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> 构造一个将字符串首字符转大写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg3 = &#39;abcd&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg3</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Capitalize</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;Abcd&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><ul><li>Uncapitalize</li></ul><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@desc</span><span style=color:#6a737d> 构造一个将字符串首字符转小写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#f97583>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg3 = &#39;ABCD&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Eg3</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Uncapitalize</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;aBCD&#39;</span><span style=color:#e1e4e8>&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>/**</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@desc</span><span style=color:#6a737d> 构造一个将字符串首字符转小写的类型</span></span>
<span class=line><span style=color:#6a737d> * </span><span style=color:#d73a49>@example</span></span>
<span class=line><span style=color:#6a737d> * type Eg3 = &#39;ABCD&#39;;</span></span>
<span class=line><span style=color:#6a737d> */</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Eg3</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Uncapitalize</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;aBCD&#39;</span><span style=color:#24292e>&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>这些类型工具，在<code>lib.es5.d.ts</code>文件中是看不到具体定义的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Uppercase</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>intrinsic</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Lowercase</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>intrinsic</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Capitalize</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>intrinsic</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Uncapitalize</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>intrinsic</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Uppercase</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>intrinsic</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Lowercase</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>intrinsic</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Capitalize</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>intrinsic</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Uncapitalize</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>intrinsic</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h1 id=声明文件 tabindex=-1>声明文件 <a class=header-anchor href=#声明文件 aria-label="Permalink to &quot;声明文件&quot;">​</a></h1><p>当使用第三方库时，我们需要引用它的声明文件，才能获得对应的代码补全、接口提示等功能。</p><h3 id=语法 tabindex=-1>语法 <a class=header-anchor href=#语法 aria-label="Permalink to &quot;语法&quot;">​</a></h3><ul><li><code>[declare var](http://ts.xcatliu.com/basics/declaration-files.html#declare-var)</code> 声明全局变量</li><li><code>[declare function](http://ts.xcatliu.com/basics/declaration-files.html#declare-function)</code> 声明全局方法</li><li><code>[declare class](http://ts.xcatliu.com/basics/declaration-files.html#declare-class)</code> 声明全局类</li><li><code>[declare enum](http://ts.xcatliu.com/basics/declaration-files.html#declare-enum)</code> 声明全局枚举类型</li><li><code>[declare namespace](http://ts.xcatliu.com/basics/declaration-files.html#declare-namespace)</code> 声明（含有子属性的）全局对象</li><li><code>[interface](http://ts.xcatliu.com/basics/declaration-files.html#interface-%E5%92%8C-type)</code><a href=http://ts.xcatliu.com/basics/declaration-files.html#interface-%E5%92%8C-type target=_blank rel=noreferrer> 和 </a><code>[type](http://ts.xcatliu.com/basics/declaration-files.html#interface-%E5%92%8C-type)</code> 声明全局类型</li><li><code>[export](http://ts.xcatliu.com/basics/declaration-files.html#export)</code> 导出变量</li><li><code>[export namespace](http://ts.xcatliu.com/basics/declaration-files.html#export-namespace)</code> 导出（含有子属性的）对象</li><li><code>[export default](http://ts.xcatliu.com/basics/declaration-files.html#export-default)</code> ES6 默认导出</li><li><code>[export =](http://ts.xcatliu.com/basics/declaration-files.html#export-1)</code> commonjs 导出模块</li><li><code>[export as namespace](http://ts.xcatliu.com/basics/declaration-files.html#export-as-namespace)</code> UMD 库声明全局变量</li><li><code>[declare global](http://ts.xcatliu.com/basics/declaration-files.html#declare-global)</code> 扩展全局变量</li><li><code>[declare module](http://ts.xcatliu.com/basics/declaration-files.html#declare-module)</code> 扩展模块</li><li><code>[///](http://ts.xcatliu.com/basics/declaration-files.html#san-xie-xian-zhi-ling)</code> 三斜线指令</li></ul><h3 id=什么是声明语句 tabindex=-1>什么是声明语句 <a class=header-anchor href=#什么是声明语句 aria-label="Permalink to &quot;什么是声明语句&quot;">​</a></h3><p>假如我们想使用第三方库 jQuery，一种常见的方式是在 html 中通过 <code>&lt;script&gt;</code> 标签引入 jQuery，然后就可以使用全局变量 <code>$</code> 或 <code>jQuery</code> 了。</p><p>我们通常这样获取一个 <code>id</code> 是 <code>foo</code> 的元素：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>$</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// or</span></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>$</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// or</span></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>但是在 ts 中，编译器并不知道 <code>$</code> 或 <code>jQuery</code> 是什么东西：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// ERROR: Cannot find name &#39;jQuery&#39;.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// ERROR: Cannot find name &#39;jQuery&#39;.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><p>这时，我们需要使用 <code>declare var</code> 来定义它的类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>var</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>var</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#d73a49>:</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>上例中，<code>declare var</code> 并没有真的定义一个变量，只是定义了全局变量 <code>jQuery</code> 的类型，仅仅会用于编译时的检查，在编译结果中会被删除。它编译结果是：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>除了 <code>declare var</code> 之外，还有其他很多种声明语句，将会在后面详细介绍。</p><h3 id=什么是声明文件 tabindex=-1>什么是声明文件 <a class=header-anchor href=#什么是声明文件 aria-label="Permalink to &quot;什么是声明文件&quot;">​</a></h3><p>通常我们会把声明语句放到一个单独的文件（<code>jQuery.d.ts</code>）中，这就是声明文件：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>var</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>var</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#d73a49>:</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>声明文件必需以 <code>.d.ts</code> 为后缀。</p><p>一般来说，ts 会解析项目中所有的 <code>*.ts</code> 文件，当然也包含以 <code>.d.ts</code> 结尾的文件。所以当我们将 <code>jQuery.d.ts</code> 放到项目中时，其他所有 <code>*.ts</code> 文件就都可以获得 <code>jQuery</code> 的类型定义了。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang></span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>/path/to/project</span></span>
<span class=line><span style=color:#e1e4e8>├── src</span></span>
<span class=line><span style=color:#e1e4e8>|  ├── index.ts</span></span>
<span class=line><span style=color:#e1e4e8>|  └── jQuery.d.ts</span></span>
<span class=line><span style=color:#e1e4e8>└── tsconfig.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>/path/to/project</span></span>
<span class=line><span style=color:#24292e>├── src</span></span>
<span class=line><span style=color:#24292e>|  ├── index.ts</span></span>
<span class=line><span style=color:#24292e>|  └── jQuery.d.ts</span></span>
<span class=line><span style=color:#24292e>└── tsconfig.json</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>假如仍然无法解析，那么可以检查下 <code>tsconfig.json</code> 中的 <code>files</code>、<code>include</code> 和 <code>exclude</code> 配置，确保其包含了 <code>jQuery.d.ts</code> 文件。</p><p>这里只演示了全局变量这种模式的声明文件，假如是通过模块导入的方式使用第三方库的话，那么引入声明文件又是另一种方式了，将会在后面详细介绍。</p><h4 id=第三方声明文件 tabindex=-1>第三方声明文件 <a class=header-anchor href=#第三方声明文件 aria-label="Permalink to &quot;第三方声明文件&quot;">​</a></h4><p>当然，jQuery 的声明文件不需要我们定义了，社区已经帮我们定义好了：<a href=https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/jquery/index.d.ts target=_blank rel=noreferrer>jQuery in DefinitelyTyped</a>。</p><p>我们可以直接下载下来使用，但是更推荐的是使用 <code>@types</code> 统一管理第三方库的声明文件。</p><p><code>@types</code> 的使用方式很简单，直接用 npm 安装对应的声明模块即可，以 jQuery 举例：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>bash</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#b392f0>npm</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>install</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>@types/jquery</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>--save-dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6f42c1>npm</span><span style=color:#24292e> </span><span style=color:#032f62>install</span><span style=color:#24292e> </span><span style=color:#032f62>@types/jquery</span><span style=color:#24292e> </span><span style=color:#005cc5>--save-dev</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>可以在<a href=https://microsoft.github.io/TypeSearch/ target=_blank rel=noreferrer>这个页面</a>搜索你需要的声明文件。</p><h3 id=书写声明文件 tabindex=-1>书写声明文件 <a class=header-anchor href=#书写声明文件 aria-label="Permalink to &quot;书写声明文件&quot;">​</a></h3><p>当一个第三方库没有提供声明文件时，我们就需要自己书写声明文件了。前面只介绍了最简单的声明文件内容，而真正书写一个声明文件并不是一件简单的事，以下会详细介绍如何书写声明文件。</p><p>在不同的场景下，声明文件的内容和使用方式会有所区别。</p><p>库的使用场景主要有以下几种：</p><ul><li><a href=http://ts.xcatliu.com/basics/declaration-files.html#quan-ju-bian-liang target=_blank rel=noreferrer>全局变量</a>：通过 <code>&lt;script&gt;</code> 标签引入第三方库，注入全局变量</li><li><a href=http://ts.xcatliu.com/basics/declaration-files.html#npm-bao target=_blank rel=noreferrer>npm 包</a>：通过 <code>import foo from &#39;foo&#39;</code> 导入，符合 ES6 模块规范</li><li><a href=http://ts.xcatliu.com/basics/declaration-files.html#umd-ku target=_blank rel=noreferrer>UMD 库</a>：既可以通过 <code>&lt;script&gt;</code> 标签引入，又可以通过 <code>import</code> 导入</li><li><a href=http://ts.xcatliu.com/basics/declaration-files.html#zhi-jie-kuo-zhan-quan-ju-bian-liang target=_blank rel=noreferrer>直接扩展全局变量</a>：通过 <code>&lt;script&gt;</code> 标签引入后，改变一个全局变量的结构</li><li><a href=http://ts.xcatliu.com/basics/declaration-files.html#zai-npm-bao-huo-umd-ku-zhong-kuo-zhan-quan-ju-bian-liang target=_blank rel=noreferrer>在 npm 包或 UMD 库中扩展全局变量</a>：引用 npm 包或 UMD 库后，改变一个全局变量的结构</li><li><a href=http://ts.xcatliu.com/basics/declaration-files.html#mo-kuai-cha-jian target=_blank rel=noreferrer>模块插件</a>：通过 <code>&lt;script&gt;</code> 或 <code>import</code> 导入后，改变另一个模块的结构</li></ul><h4 id=全局变量 tabindex=-1>全局变量 <a class=header-anchor href=#全局变量 aria-label="Permalink to &quot;全局变量&quot;">​</a></h4><p>全局变量是最简单的一种场景，之前举的例子就是通过 <code>&lt;script&gt;</code> 标签引入 jQuery，注入全局变量 <code>$</code> 和 <code>jQuery</code>。</p><p>使用全局变量的声明文件时，如果是以 <code>npm install @types/xxx --save-dev</code> 安装的，则不需要任何配置。如果是将声明文件直接存放于当前项目中，则建议和其他源码一起放到 <code>src</code> 目录下（或者对应的源码目录下）：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang></span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>/path/to/project</span></span>
<span class=line><span style=color:#e1e4e8>├── src</span></span>
<span class=line><span style=color:#e1e4e8>|  ├── index.ts</span></span>
<span class=line><span style=color:#e1e4e8>|  └── jQuery.d.ts</span></span>
<span class=line><span style=color:#e1e4e8>└── tsconfig.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>/path/to/project</span></span>
<span class=line><span style=color:#24292e>├── src</span></span>
<span class=line><span style=color:#24292e>|  ├── index.ts</span></span>
<span class=line><span style=color:#24292e>|  └── jQuery.d.ts</span></span>
<span class=line><span style=color:#24292e>└── tsconfig.json</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>如果没有生效，可以检查下 <code>tsconfig.json</code> 中的 <code>files</code>、<code>include</code> 和 <code>exclude</code> 配置，确保其包含了 <code>jQuery.d.ts</code> 文件。</p><p>全局变量的声明文件主要有以下几种语法：</p><ul><li><code>[declare var](http://ts.xcatliu.com/basics/declaration-files.html#declare-var)</code> 声明全局变量</li><li><code>[declare function](http://ts.xcatliu.com/basics/declaration-files.html#declare-function)</code> 声明全局方法</li><li><code>[declare class](http://ts.xcatliu.com/basics/declaration-files.html#declare-class)</code> 声明全局类</li><li><code>[declare enum](http://ts.xcatliu.com/basics/declaration-files.html#declare-enum)</code> 声明全局枚举类型</li><li><code>[declare namespace](http://ts.xcatliu.com/basics/declaration-files.html#declare-namespace)</code> 声明（含有子属性的）全局对象</li><li><code>[interface](http://ts.xcatliu.com/basics/declaration-files.html#interface-he-type)</code><a href=http://ts.xcatliu.com/basics/declaration-files.html#interface-he-type target=_blank rel=noreferrer> 和 </a><code>[type](http://ts.xcatliu.com/basics/declaration-files.html#interface-he-type)</code> 声明全局类型</li></ul><h6 id=declare-var tabindex=-1><code>declare var</code> <a class=header-anchor href=#declare-var aria-label="Permalink to &quot;`declare var`&quot;">​</a></h6><p>在所有的声明语句中，<code>declare var</code> 是最简单的，如之前所学，它能够用来定义一个全局变量的类型。与其类似的，还有 <code>declare let</code> 和 <code>declare const</code>，使用 <code>let</code> 与使用 <code>var</code> 没有什么区别：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>let</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// 使用 declare let 定义的 jQuery 类型，允许修改这个全局变量</span></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> document.</span><span style=color:#b392f0>querySelector</span><span style=color:#e1e4e8>(selector)</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>let</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#d73a49>:</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// 使用 declare let 定义的 jQuery 类型，允许修改这个全局变量</span></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> document.</span><span style=color:#6f42c1>querySelector</span><span style=color:#24292e>(selector)</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>而当我们使用 <code>const</code> 定义时，表示此时的全局变量是一个常量，不允许再去修改它的值了<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/04-declare-const-jquery target=_blank rel=noreferrer>4</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// 使用 declare const 定义的 jQuery 类型，禁止修改这个全局变量</span></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> document.</span><span style=color:#b392f0>querySelector</span><span style=color:#e1e4e8>(selector)</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// ERROR: Cannot assign to &#39;jQuery&#39; because it is a constant or a read-only property.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#d73a49>:</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// 使用 declare const 定义的 jQuery 类型，禁止修改这个全局变量</span></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> document.</span><span style=color:#6f42c1>querySelector</span><span style=color:#24292e>(selector)</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// ERROR: Cannot assign to &#39;jQuery&#39; because it is a constant or a read-only property.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>一般来说，全局变量都是禁止修改的常量，所以大部分情况都应该使用 <code>const</code> 而不是 <code>var</code> 或 <code>let</code>。</p><p>需要注意的是，声明语句中只能定义类型，切勿在声明语句中定义具体的实现<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/05-declare-jquery-value target=_blank rel=noreferrer>5</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>selector</span><span style=color:#e1e4e8>) {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> document.</span><span style=color:#b392f0>querySelector</span><span style=color:#e1e4e8>(selector)</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// ERROR: An implementation cannot be declared in ambient contexts.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> (</span><span style=color:#e36209>selector</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> document.</span><span style=color:#6f42c1>querySelector</span><span style=color:#24292e>(selector)</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// ERROR: An implementation cannot be declared in ambient contexts.</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h6 id=declare-function tabindex=-1><code>declare function</code> <a class=header-anchor href=#declare-function aria-label="Permalink to &quot;`declare function`&quot;">​</a></h6><p><code>declare function</code> 用来定义全局函数的类型。jQuery 其实就是一个函数，所以也可以用 <code>function</code> 来定义：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>在函数类型的声明语句中，函数重载也是支持的<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/06-declare-function target=_blank rel=noreferrer>6</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>domReadyCallback</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> () </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>function</span><span style=color:#e1e4e8> () {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>alert</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Dom Ready!&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#6f42c1>domReadyCallback</span><span style=color:#d73a49>:</span><span style=color:#24292e> () </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#e36209>function</span><span style=color:#24292e> () {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>alert</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Dom Ready!&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h6 id=declare-class tabindex=-1><code>declare class</code> <a class=header-anchor href=#declare-class aria-label="Permalink to &quot;`declare class`&quot;">​</a></h6><p>当全局变量是一个类的时候，我们用 <code>declare class</code> 来定义它的类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/07-declare-class target=_blank rel=noreferrer>7</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/Animal.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Animal</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>constructor</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>sayHi</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> cat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Animal</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/Animal.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>Animal</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>constructor</span><span style=color:#24292e>(</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>sayHi</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> cat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>Animal</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>同样的，<code>declare class</code> 语句也只能用来定义类型，不能用来定义具体的实现，比如定义 <code>sayHi</code> 方法的具体实现则会报错：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/Animal.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Animal</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>constructor</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>sayHi</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`My name is ${</span><span style=color:#79b8ff>this</span><span style=color:#9ecbff>.</span><span style=color:#e1e4e8>name</span><span style=color:#9ecbff>}`</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#6a737d>// ERROR: An implementation cannot be declared in ambient contexts.</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/Animal.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>Animal</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>constructor</span><span style=color:#24292e>(</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>sayHi</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>`My name is ${</span><span style=color:#005cc5>this</span><span style=color:#032f62>.</span><span style=color:#24292e>name</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6a737d>// ERROR: An implementation cannot be declared in ambient contexts.</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h6 id=declare-enum tabindex=-1><code>declare enum</code> <a class=header-anchor href=#declare-enum aria-label="Permalink to &quot;`declare enum`&quot;">​</a></h6><p>使用 <code>declare enum</code> 定义的枚举类型也称作外部枚举（Ambient Enums），举例如下<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/08-declare-enum target=_blank rel=noreferrer>8</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/Directions.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>enum</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Directions</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Up</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Down</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Left</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Right</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> directions </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Up,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Down,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Left,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Right,</span></span>
<span class=line><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/Directions.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>enum</span><span style=color:#24292e> </span><span style=color:#6f42c1>Directions</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Up</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Down</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Left</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Right</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> directions </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span></span>
<span class=line><span style=color:#24292e>	Directions.Up,</span></span>
<span class=line><span style=color:#24292e>	Directions.Down,</span></span>
<span class=line><span style=color:#24292e>	Directions.Left,</span></span>
<span class=line><span style=color:#24292e>	Directions.Right,</span></span>
<span class=line><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br></div></div><p>与其他全局变量的类型声明一致，<code>declare enum</code> 仅用来定义类型，而不是具体的值。</p><p><code>Directions.d.ts</code> 仅仅会用于编译时的检查，声明文件里的内容在编译结果中会被删除。它编译结果是：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>var</span><span style=color:#e1e4e8> directions </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Up,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Down,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Left,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Right,</span></span>
<span class=line><span style=color:#e1e4e8>]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>var</span><span style=color:#24292e> directions </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span></span>
<span class=line><span style=color:#24292e>	Directions.Up,</span></span>
<span class=line><span style=color:#24292e>	Directions.Down,</span></span>
<span class=line><span style=color:#24292e>	Directions.Left,</span></span>
<span class=line><span style=color:#24292e>	Directions.Right,</span></span>
<span class=line><span style=color:#24292e>]</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>其中 <code>Directions</code> 是由第三方库定义好的全局变量。</p><h6 id=declare-namespace tabindex=-1><code>declare namespace</code> <a class=header-anchor href=#declare-namespace aria-label="Permalink to &quot;`declare namespace`&quot;">​</a></h6><p><code>namespace</code> 是 ts 早期时为了解决模块化而创造的关键字，中文称为命名空间。</p><p>由于历史遗留原因，在早期还没有 ES6 的时候，ts 提供了一种模块化方案，使用 <code>module</code> 关键字表示内部模块。但由于后来 ES6 也使用了 <code>module</code> 关键字，ts 为了兼容 ES6，使用 <code>namespace</code> 替代了自己的 <code>module</code>，更名为命名空间。</p><p>随着 ES6 的广泛应用，现在已经不建议再使用 ts 中的 <code>namespace</code>，而推荐使用 ES6 的模块化方案了，故我们不再需要学习 <code>namespace</code> 的使用了。</p><p><code>namespace</code> 被淘汰了，但是在声明文件中，<code>declare namespace</code> 还是比较常用的，它用来表示全局变量是一个对象，包含很多子属性。</p><p>比如 <code>jQuery</code> 是一个全局变量，它是一个对象，提供了一个 <code>jQuery.ajax</code> 方法可以调用，那么我们就应该使用 <code>declare namespace jQuery</code> 来声明这个拥有多个子属性的全局变量。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>url</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>settings</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;/api/get_something&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#e36209>url</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>settings</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;/api/get_something&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>注意，在 <code>declare namespace</code> 内部，我们直接使用 <code>function ajax</code> 来声明函数，而不是使用 <code>declare function ajax</code>。类似的，也可以使用 <code>const</code>, <code>class</code>, <code>enum</code> 等语句<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/09-declare-namespace target=_blank rel=noreferrer>9</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>url</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>settings</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>version</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Event</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#b392f0>blur</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>eventType</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>EventType</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>enum</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>EventType</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>CustomClick</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;/api/get_something&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(jQuery.version)</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>e</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> jQuery.</span><span style=color:#b392f0>Event</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#e1e4e8>e.</span><span style=color:#b392f0>blur</span><span style=color:#e1e4e8>(jQuery.EventType.CustomClick)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#e36209>url</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>settings</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>version</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>Event</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#6f42c1>blur</span><span style=color:#24292e>(</span><span style=color:#e36209>eventType</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>EventType</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>enum</span><span style=color:#24292e> </span><span style=color:#6f42c1>EventType</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>CustomClick</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;/api/get_something&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(jQuery.version)</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>e</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> jQuery.</span><span style=color:#6f42c1>Event</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>e.</span><span style=color:#6f42c1>blur</span><span style=color:#24292e>(jQuery.EventType.CustomClick)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br></div></div><p>####### 嵌套的命名空间</p><p>如果对象拥有深层的层级，则需要用嵌套的 <code>namespace</code> 来声明深层的属性的类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/10-declare-namespace-nesting target=_blank rel=noreferrer>10</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>url</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>settings</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>fn</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>extend</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>object</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;/api/get_something&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>jQuery.fn.</span><span style=color:#b392f0>extend</span><span style=color:#e1e4e8>({</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>check</span><span style=color:#e1e4e8>: </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> () {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>this</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>each</span><span style=color:#e1e4e8>(</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> () {</span></span>
<span class=line><span style=color:#e1e4e8>			</span><span style=color:#79b8ff>this</span><span style=color:#e1e4e8>.checked </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span></span>
<span class=line><span style=color:#e1e4e8>		})</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#e36209>url</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>settings</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>fn</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>extend</span><span style=color:#24292e>(</span><span style=color:#e36209>object</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;/api/get_something&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>jQuery.fn.</span><span style=color:#6f42c1>extend</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>check</span><span style=color:#24292e>: </span><span style=color:#d73a49>function</span><span style=color:#24292e> () {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#005cc5>this</span><span style=color:#24292e>.</span><span style=color:#6f42c1>each</span><span style=color:#24292e>(</span><span style=color:#d73a49>function</span><span style=color:#24292e> () {</span></span>
<span class=line><span style=color:#24292e>			</span><span style=color:#005cc5>this</span><span style=color:#24292e>.checked </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span></span>
<span class=line><span style=color:#24292e>		})</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br></div></div><p>假如 <code>jQuery</code> 下仅有 <code>fn</code> 这一个属性（没有 <code>ajax</code> 等其他属性或方法），则可以不需要嵌套 <code>namespace</code><a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/11-declare-namespace-dot target=_blank rel=noreferrer>11</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>fn</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>extend</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>object</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>jQuery.fn.</span><span style=color:#b392f0>extend</span><span style=color:#e1e4e8>({</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>check</span><span style=color:#e1e4e8>: </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> () {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>this</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>each</span><span style=color:#e1e4e8>(</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> () {</span></span>
<span class=line><span style=color:#e1e4e8>			</span><span style=color:#79b8ff>this</span><span style=color:#e1e4e8>.checked </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span></span>
<span class=line><span style=color:#e1e4e8>		})</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>.</span><span style=color:#6f42c1>fn</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>extend</span><span style=color:#24292e>(</span><span style=color:#e36209>object</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>jQuery.fn.</span><span style=color:#6f42c1>extend</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>check</span><span style=color:#24292e>: </span><span style=color:#d73a49>function</span><span style=color:#24292e> () {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#005cc5>this</span><span style=color:#24292e>.</span><span style=color:#6f42c1>each</span><span style=color:#24292e>(</span><span style=color:#d73a49>function</span><span style=color:#24292e> () {</span></span>
<span class=line><span style=color:#24292e>			</span><span style=color:#005cc5>this</span><span style=color:#24292e>.checked </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span></span>
<span class=line><span style=color:#24292e>		})</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br></div></div><h6 id=interface-和-type tabindex=-1><code>interface</code> 和 <code>type</code> <a class=header-anchor href=#interface-和-type aria-label="Permalink to &quot;`interface` 和 `type`&quot;">​</a></h6><p>除了全局变量之外，可能有一些类型我们也希望能暴露出来。在类型声明文件中，我们可以直接使用 <code>interface</code> 或 <code>type</code> 来声明一个全局的接口或类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/12-interface target=_blank rel=noreferrer>12</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>method</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;GET&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;POST&#39;</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>data</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>url</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>settings</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>method</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;GET&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;POST&#39;</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>data</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#e36209>url</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>settings</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>这样的话，在其他文件中也可以使用这个接口或类型了：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> settings</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	method: </span><span style=color:#9ecbff>&#39;POST&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	data: {</span></span>
<span class=line><span style=color:#e1e4e8>		name: </span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;/api/post_something&#39;</span><span style=color:#e1e4e8>, settings)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> settings</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	method: </span><span style=color:#032f62>&#39;POST&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	data: {</span></span>
<span class=line><span style=color:#24292e>		name: </span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;/api/post_something&#39;</span><span style=color:#24292e>, settings)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p><code>type</code> 与 <code>interface</code> 类似，不再赘述。</p><p>####### 防止命名冲突</p><p>暴露在最外层的 <code>interface</code> 或 <code>type</code> 会作为全局类型作用于整个项目中，我们应该尽可能的减少全局变量或全局类型的数量。故最好将他们放到 <code>namespace</code> 下<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/13-avoid-name-conflict target=_blank rel=noreferrer>13</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>method</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;GET&#39;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;POST&#39;</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>data</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>url</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>settings</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>method</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;GET&#39;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;POST&#39;</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>data</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#e36209>url</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>settings</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>注意，在使用这个 <code>interface</code> 的时候，也应该加上 <code>jQuery</code> 前缀：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> settings</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	method: </span><span style=color:#9ecbff>&#39;POST&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	data: {</span></span>
<span class=line><span style=color:#e1e4e8>		name: </span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;/api/post_something&#39;</span><span style=color:#e1e4e8>, settings)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> settings</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>.</span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	method: </span><span style=color:#032f62>&#39;POST&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	data: {</span></span>
<span class=line><span style=color:#24292e>		name: </span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;/api/post_something&#39;</span><span style=color:#24292e>, settings)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><h6 id=声明合并 tabindex=-1>声明合并 <a class=header-anchor href=#声明合并 aria-label="Permalink to &quot;声明合并&quot;">​</a></h6><p>假如 jQuery 既是一个函数，可以直接被调用 <code>jQuery(&#39;#foo&#39;)</code>，又是一个对象，拥有子属性 <code>jQuery.ajax()</code>（事实确实如此），那么我们可以组合多个声明语句，它们会不冲突的合并起来<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/14-declaration-merging target=_blank rel=noreferrer>14</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>selector</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>url</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>, </span><span style=color:#ffab70>settings</span><span style=color:#f97583>?:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>jQuery</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;#foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>ajax</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;/api/get_something&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/jQuery.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#e36209>selector</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>jQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#e36209>url</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>, </span><span style=color:#e36209>settings</span><span style=color:#d73a49>?:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>jQuery</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;#foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>ajax</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;/api/get_something&#39;</span><span style=color:#24292e>)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h4 id=npm-包 tabindex=-1>npm 包 <a class=header-anchor href=#npm-包 aria-label="Permalink to &quot;npm 包&quot;">​</a></h4><p>一般我们通过 <code>import foo from &#39;foo&#39;</code> 导入一个 npm 包，这是符合 ES6 模块规范的。</p><p>在我们尝试给一个 npm 包创建声明文件之前，需要先看看它的声明文件是否已经存在。一般来说，npm 包的声明文件可能存在于两个地方：</p><ol><li>与该 npm 包绑定在一起。判断依据是 <code>package.json</code> 中有 <code>types</code> 字段，或者有一个 <code>index.d.ts</code> 声明文件。这种模式不需要额外安装其他包，是最为推荐的，所以以后我们自己创建 npm 包的时候，最好也将声明文件与 npm 包绑定在一起。</li><li>发布到 <code>@types</code> 里。我们只需要尝试安装一下对应的 <code>@types</code> 包就知道是否存在该声明文件，安装命令是 <code>npm install @types/foo --save-dev</code>。这种模式一般是由于 npm 包的维护者没有提供声明文件，所以只能由其他人将声明文件发布到 <code>@types</code> 里了。</li></ol><p>假如以上两种方式都没有找到对应的声明文件，那么我们就需要自己为它写声明文件了。由于是通过 <code>import</code> 语句导入的模块，所以声明文件存放的位置也有所约束，一般有两种方案：</p><ol><li>创建一个 <code>node_modules/@types/foo/index.d.ts</code> 文件，存放 <code>foo</code> 模块的声明文件。这种方式不需要额外的配置，但是 <code>node_modules</code> 目录不稳定，代码也没有被保存到仓库中，无法回溯版本，有不小心被删除的风险，故不太建议用这种方案，一般只用作临时测试。</li><li>创建一个 <code>types</code> 目录，专门用来管理自己写的声明文件，将 <code>foo</code> 的声明文件放到 <code>types/foo/index.d.ts</code> 中。这种方式需要配置下 <code>tsconfig.json</code> 中的 <code>paths</code> 和 <code>baseUrl</code> 字段。</li></ol><p>目录结构：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang></span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>/path/to/project</span></span>
<span class=line><span style=color:#e1e4e8>├── src</span></span>
<span class=line><span style=color:#e1e4e8>|  └── index.ts</span></span>
<span class=line><span style=color:#e1e4e8>├── types</span></span>
<span class=line><span style=color:#e1e4e8>|  └── foo</span></span>
<span class=line><span style=color:#e1e4e8>|     └── index.d.ts</span></span>
<span class=line><span style=color:#e1e4e8>└── tsconfig.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>/path/to/project</span></span>
<span class=line><span style=color:#24292e>├── src</span></span>
<span class=line><span style=color:#24292e>|  └── index.ts</span></span>
<span class=line><span style=color:#24292e>├── types</span></span>
<span class=line><span style=color:#24292e>|  └── foo</span></span>
<span class=line><span style=color:#24292e>|     └── index.d.ts</span></span>
<span class=line><span style=color:#24292e>└── tsconfig.json</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p><code>tsconfig.json</code> 内容：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>json</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;compilerOptions&quot;</span><span style=color:#e1e4e8>: {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>&quot;module&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;commonjs&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>&quot;baseUrl&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;./&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>&quot;paths&quot;</span><span style=color:#e1e4e8>: {</span></span>
<span class=line><span style=color:#e1e4e8>			</span><span style=color:#79b8ff>&quot;*&quot;</span><span style=color:#e1e4e8>: [</span><span style=color:#9ecbff>&quot;types/*&quot;</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>		}</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>{</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;compilerOptions&quot;</span><span style=color:#24292e>: {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>&quot;module&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;commonjs&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>&quot;baseUrl&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;./&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>&quot;paths&quot;</span><span style=color:#24292e>: {</span></span>
<span class=line><span style=color:#24292e>			</span><span style=color:#005cc5>&quot;*&quot;</span><span style=color:#24292e>: [</span><span style=color:#032f62>&quot;types/*&quot;</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>		}</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>如此配置之后，通过 <code>import</code> 导入 <code>foo</code> 的时候，也会去 <code>types</code> 目录下寻找对应的模块的声明文件了。</p><p>注意 <code>module</code> 配置可以有很多种选项，不同的选项会影响模块的导入导出模式。这里我们使用了 <code>commonjs</code> 这个最常用的选项，后面的教程也都默认使用的这个选项。</p><p>不管采用了以上两种方式中的哪一种，我都<strong>强烈建议</strong>大家将书写好的声明文件（通过给第三方库发 pull request，或者直接提交到 <code>@types</code> 里）发布到开源社区中，享受了这么多社区的优秀的资源，就应该在力所能及的时候给出一些回馈。只有所有人都参与进来，才能让 ts 社区更加繁荣。</p><p>npm 包的声明文件主要有以下几种语法：</p><ul><li><code>[export](http://ts.xcatliu.com/basics/declaration-files.html#export)</code> 导出变量</li><li><code>[export namespace](http://ts.xcatliu.com/basics/declaration-files.html#export-namespace)</code> 导出（含有子属性的）对象</li><li><code>[export default](http://ts.xcatliu.com/basics/declaration-files.html#export-default)</code> ES6 默认导出</li><li><code>[export =](http://ts.xcatliu.com/basics/declaration-files.html#export-1)</code> commonjs 导出模块</li></ul><h6 id=export tabindex=-1><code>export</code> <a class=header-anchor href=#export aria-label="Permalink to &quot;`export`&quot;">​</a></h6><p>npm 包的声明文件与全局变量的声明文件有很大区别。在 npm 包的声明文件中，使用 <code>declare</code> 不再会声明一个全局变量，而只会在当前文件中声明一个局部变量。只有在声明文件中使用 <code>export</code> 导出，然后在使用方 <code>import</code> 导入后，才会应用到这些类型声明。</p><p><code>export</code> 的语法与普通的 ts 中的语法类似，区别仅在于声明文件中禁止定义具体的实现<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/15-export target=_blank rel=noreferrer>15</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>getName</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Animal</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>constructor</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>sayHi</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>enum</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Directions</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Up</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Down</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Left</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Right</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Options</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>data</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>getName</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>Animal</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>constructor</span><span style=color:#24292e>(</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>sayHi</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>enum</span><span style=color:#24292e> </span><span style=color:#6f42c1>Directions</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Up</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Down</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Left</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Right</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Options</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>data</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br></div></div><p>对应的导入和使用模块应该是这样：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> {name, getName, Animal, Directions, Options} </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(name)</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> myName </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>getName</span><span style=color:#e1e4e8>()</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> cat </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>new</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Animal</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Tom&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> directions </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Up,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Down,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Left,</span></span>
<span class=line><span style=color:#e1e4e8>	Directions.Right,</span></span>
<span class=line><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> options</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Options</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	data: {</span></span>
<span class=line><span style=color:#e1e4e8>		name: </span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	},</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> {name, getName, Animal, Directions, Options} </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(name)</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> myName </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>getName</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> cat </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>new</span><span style=color:#24292e> </span><span style=color:#6f42c1>Animal</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;Tom&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> directions </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span></span>
<span class=line><span style=color:#24292e>	Directions.Up,</span></span>
<span class=line><span style=color:#24292e>	Directions.Down,</span></span>
<span class=line><span style=color:#24292e>	Directions.Left,</span></span>
<span class=line><span style=color:#24292e>	Directions.Right,</span></span>
<span class=line><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> options</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Options</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	data: {</span></span>
<span class=line><span style=color:#24292e>		name: </span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	},</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br></div></div><p>####### 混用 <code>declare</code> 和 <code>export</code></p><p>我们也可以使用 <code>declare</code> 先声明多个变量，最后再用 <code>export</code> 一次性导出。上例的声明文件可以等价的改写为<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/16-declare-and-export target=_blank rel=noreferrer>16</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>getName</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>class</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Animal</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>constructor</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>sayHi</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>enum</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Directions</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Up</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Down</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Left</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Right</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Options</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#ffab70>data</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> {name, getName, Animal, Directions, Options}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>getName</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>class</span><span style=color:#24292e> </span><span style=color:#6f42c1>Animal</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>constructor</span><span style=color:#24292e>(</span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>sayHi</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>enum</span><span style=color:#24292e> </span><span style=color:#6f42c1>Directions</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Up</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Down</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Left</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Right</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Options</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#e36209>data</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> {name, getName, Animal, Directions, Options}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br></div></div><p>注意，与全局变量的声明文件类似，<code>interface</code> 前是不需要 <code>declare</code> 的。</p><h6 id=export-namespace tabindex=-1><code>export namespace</code> <a class=header-anchor href=#export-namespace aria-label="Permalink to &quot;`export namespace`&quot;">​</a></h6><p>与 <code>declare namespace</code> 类似，<code>export namespace</code> 用来导出一个拥有子属性的对象<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/17-export-namespace target=_blank rel=noreferrer>17</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>bar</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>baz</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> {foo} </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(foo.name)</span></span>
<span class=line><span style=color:#e1e4e8>foo.bar.</span><span style=color:#b392f0>baz</span><span style=color:#e1e4e8>()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>bar</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>baz</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> {foo} </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>console.</span><span style=color:#6f42c1>log</span><span style=color:#24292e>(foo.name)</span></span>
<span class=line><span style=color:#24292e>foo.bar.</span><span style=color:#6f42c1>baz</span><span style=color:#24292e>()</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br></div></div><h6 id=export-default tabindex=-1><code>export default</code> <a class=header-anchor href=#export-default aria-label="Permalink to &quot;`export default`&quot;">​</a></h6><p>在 ES6 模块系统中，使用 <code>export default</code> 可以导出一个默认值，使用方可以用 <code>import foo from &#39;foo&#39;</code> 而不是 <code>import { foo } from &#39;foo&#39;</code> 来导入这个默认值。</p><p>在类型声明文件中，<code>export default</code> 用来导出默认值的类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/18-export-default target=_blank rel=noreferrer>18</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>import</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>from</span><span style=color:#e1e4e8> &#39;</span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>import</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e> </span><span style=color:#6f42c1>from</span><span style=color:#24292e> &#39;</span><span style=color:#6f42c1>foo</span><span style=color:#24292e>&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>注意，只有 <code>function</code>、<code>class</code> 和 <code>interface</code> 可以直接默认导出，其他的变量需要先定义出来，再默认导出<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/19-export-default-enum-error target=_blank rel=noreferrer>19</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> enum Directions {</span></span>
<span class=line><span style=color:#6a737d>// ERROR: Expression expected.</span></span>
<span class=line><span style=color:#e1e4e8>    Up,</span></span>
<span class=line><span style=color:#e1e4e8>    Down,</span></span>
<span class=line><span style=color:#e1e4e8>    Left,</span></span>
<span class=line><span style=color:#e1e4e8>    Right</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> enum Directions {</span></span>
<span class=line><span style=color:#6a737d>// ERROR: Expression expected.</span></span>
<span class=line><span style=color:#24292e>    Up,</span></span>
<span class=line><span style=color:#24292e>    Down,</span></span>
<span class=line><span style=color:#24292e>    Left,</span></span>
<span class=line><span style=color:#24292e>    Right</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>上例中 <code>export default enum</code> 是错误的语法，需要使用 <code>declare enum</code> 定义出来，然后使用 <code>export default</code> 导出：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>enum</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Directions</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Up</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Down</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Left</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Right</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> Directions</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>enum</span><span style=color:#24292e> </span><span style=color:#6f42c1>Directions</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Up</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Down</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Left</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Right</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> Directions</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>针对这种默认导出，我们一般会将导出语句放在整个声明文件的最前面<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/20-export-default-enum target=_blank rel=noreferrer>20</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> Directions</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>enum</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Directions</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Up</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Down</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Left</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>Right</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> Directions</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>enum</span><span style=color:#24292e> </span><span style=color:#6f42c1>Directions</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Up</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Down</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Left</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>Right</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h6 id=export-1 tabindex=-1><code>export =</code> <a class=header-anchor href=#export-1 aria-label="Permalink to &quot;`export =`&quot;">​</a></h6><p>在 commonjs 规范中，我们用以下方式来导出一个模块：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 整体导出</span></span>
<span class=line><span style=color:#79b8ff>module</span><span style=color:#e1e4e8>.</span><span style=color:#79b8ff>exports</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> foo</span></span>
<span class=line><span style=color:#6a737d>// 单个导出</span></span>
<span class=line><span style=color:#79b8ff>exports</span><span style=color:#e1e4e8>.bar </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 整体导出</span></span>
<span class=line><span style=color:#005cc5>module</span><span style=color:#24292e>.</span><span style=color:#005cc5>exports</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> foo</span></span>
<span class=line><span style=color:#6a737d>// 单个导出</span></span>
<span class=line><span style=color:#005cc5>exports</span><span style=color:#24292e>.bar </span><span style=color:#d73a49>=</span><span style=color:#24292e> bar</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>在 ts 中，针对这种模块导出，有多种方式可以导入，第一种方式是 <code>const ... = require</code>：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 整体导入</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>foo</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>require</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// 单个导入</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>bar</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>require</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>).bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 整体导入</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>foo</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>require</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// 单个导入</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>bar</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>require</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>).bar</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>第二种方式是 <code>import ... from</code>，注意针对整体导出，需要使用 <code>import * as</code> 来导入：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 整体导入</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> foo </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span></span>
<span class=line><span style=color:#6a737d>// 单个导入</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> {bar} </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 整体导入</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> foo </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span></span>
<span class=line><span style=color:#6a737d>// 单个导入</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> {bar} </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>第三种方式是 <code>import ... require</code>，这也是 ts 官方推荐的方式：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 整体导入</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> foo </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>require</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>)</span></span>
<span class=line><span style=color:#6a737d>// 单个导入</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> bar </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>.bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 整体导入</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> foo </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>require</span><span style=color:#24292e>(</span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#6a737d>// 单个导入</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> bar </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>.bar</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><p>对于这种使用 commonjs 规范的库，假如要为它写类型声明文件的话，就需要使用到 <code>export =</code> 这种语法了<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/21-export-equal target=_blank rel=noreferrer>21</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> foo</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>bar</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> foo</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>bar</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>需要注意的是，上例中使用了 <code>export =</code> 之后，就不能再单个导出 <code>export { bar }</code> 了。所以我们通过声明合并，使用 <code>declare namespace foo</code> 来将 <code>bar</code> 合并到 <code>foo</code> 里。</p><p>准确地讲，<code>export =</code> 不仅可以用在声明文件中，也可以用在普通的 ts 文件中。实际上，<code>import ... require</code> 和 <code>export =</code> 都是 ts 为了兼容 AMD 规范和 commonjs 规范而创立的新语法，由于并不常用也不推荐使用，所以这里就不详细介绍了，感兴趣的可以看<a href=https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require target=_blank rel=noreferrer>官方文档</a>。</p><p>由于很多第三方库是 commonjs 规范的，所以声明文件也就不得不用到 <code>export =</code> 这种语法了。但是还是需要再强调下，相比与 <code>export =</code>，我们更推荐使用 ES6 标准的 <code>export default</code> 和 <code>export</code>。</p><h4 id=umd-库 tabindex=-1>UMD 库 <a class=header-anchor href=#umd-库 aria-label="Permalink to &quot;UMD 库&quot;">​</a></h4><p>既可以通过 <code>&lt;script&gt;</code> 标签引入，又可以通过 <code>import</code> 导入的库，称为 UMD 库。相比于 npm 包的类型声明文件，我们需要额外声明一个全局变量，为了实现这种方式，ts 提供了一个新语法 <code>export as namespace</code>。</p><h6 id=export-as-namespace tabindex=-1><code>export as namespace</code> <a class=header-anchor href=#export-as-namespace aria-label="Permalink to &quot;`export as namespace`&quot;">​</a></h6><p>一般使用 <code>export as namespace</code> 时，都是先有了 npm 包的声明文件，再基于它添加一条 <code>export as namespace</code> 语句，即可将声明好的一个变量声明为全局变量，举例如下<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/22-export-as-namespace target=_blank rel=noreferrer>22</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> foo</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>bar</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> foo</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>bar</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>当然它也可以与 <code>export default</code> 一起使用：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> foo</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>bar</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> foo</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>bar</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><h4 id=直接扩展全局变量 tabindex=-1>直接扩展全局变量 <a class=header-anchor href=#直接扩展全局变量 aria-label="Permalink to &quot;直接扩展全局变量&quot;">​</a></h4><p>有的第三方库扩展了一个全局变量，可是此全局变量的类型却没有相应的更新过来，就会导致 ts 编译错误，此时就需要扩展全局变量的类型。比如扩展 <code>String</code> 类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/23-merge-global-interface target=_blank rel=noreferrer>23</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>String</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>prependHello</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>prependHello</span><span style=color:#e1e4e8>()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>String</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>prependHello</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e>.</span><span style=color:#6f42c1>prependHello</span><span style=color:#24292e>()</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>通过声明合并，使用 <code>interface String</code> 即可给 <code>String</code> 添加属性或方法。</p><p>也可以使用 <code>declare namespace</code> 给已有的命名空间添加类型声明<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/24-merge-global-namespace target=_blank rel=noreferrer>24</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/jquery-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>namespace</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>JQuery</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>CustomOptions</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>bar</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>JQueryStatic</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>options</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>JQuery</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>CustomOptions</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>jQuery.</span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>({</span></span>
<span class=line><span style=color:#e1e4e8>	bar: </span><span style=color:#9ecbff>&#39;&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/jquery-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>namespace</span><span style=color:#24292e> </span><span style=color:#6f42c1>JQuery</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>CustomOptions</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>bar</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>JQueryStatic</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#6f42c1>foo</span><span style=color:#24292e>(</span><span style=color:#e36209>options</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>JQuery</span><span style=color:#24292e>.</span><span style=color:#6f42c1>CustomOptions</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>jQuery.</span><span style=color:#6f42c1>foo</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#24292e>	bar: </span><span style=color:#032f62>&#39;&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br></div></div><h4 id=在-npm-包或-umd-库中扩展全局变量 tabindex=-1>在 npm 包或 UMD 库中扩展全局变量 <a class=header-anchor href=#在-npm-包或-umd-库中扩展全局变量 aria-label="Permalink to &quot;在 npm 包或 UMD 库中扩展全局变量&quot;">​</a></h4><p>如之前所说，对于一个 npm 包或者 UMD 库的声明文件，只有 <code>export</code> 导出的类型声明才能被导入。所以对于 npm 包或 UMD 库，如果导入此库之后会扩展全局变量，则需要使用另一种语法在声明文件中扩展全局变量的类型，那就是 <code>declare global</code>。</p><h6 id=declare-global tabindex=-1><code>declare global</code> <a class=header-anchor href=#declare-global aria-label="Permalink to &quot;`declare global`&quot;">​</a></h6><p>使用 <code>declare global</code> 可以在 npm 包或者 UMD 库的声明文件中扩展全局变量的类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/25-declare-global target=_blank rel=noreferrer>25</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> global {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>String</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#b392f0>prependHello</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> {}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#9ecbff>&#39;bar&#39;</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>prependHello</span><span style=color:#e1e4e8>()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> global {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>String</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#6f42c1>prependHello</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> {}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#032f62>&#39;bar&#39;</span><span style=color:#24292e>.</span><span style=color:#6f42c1>prependHello</span><span style=color:#24292e>()</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br></div></div><p>注意即使此声明文件不需要导出任何东西，仍然需要导出一个空对象，用来告诉编译器这是一个模块的声明文件，而不是一个全局变量的声明文件。</p><h4 id=模块插件 tabindex=-1>模块插件 <a class=header-anchor href=#模块插件 aria-label="Permalink to &quot;模块插件&quot;">​</a></h4><p>有时通过 <code>import</code> 导入一个模块插件，可以改变另一个原有模块的结构。此时如果原有模块已经有了类型声明文件，而插件模块没有类型声明文件，就会导致类型不完整，缺少插件部分的类型。ts 提供了一个语法 <code>declare module</code>，它可以用来扩展原有模块的类型。</p><h6 id=declare-module tabindex=-1><code>declare module</code> <a class=header-anchor href=#declare-module aria-label="Permalink to &quot;`declare module`&quot;">​</a></h6><p>如果是需要扩展原有模块的话，需要在类型声明文件中先引用原有模块，再使用 <code>declare module</code> 扩展原有模块<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/26-declare-module target=_blank rel=noreferrer>26</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/moment-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> moment </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;moment&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>module</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;moment&#39;</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>moment</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>CalendarKey</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> moment </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;moment&#39;</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;moment-plugin&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#e1e4e8>moment.</span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/moment-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> moment </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;moment&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>module</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;moment&#39;</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>moment</span><span style=color:#24292e>.</span><span style=color:#6f42c1>CalendarKey</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> moment </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;moment&#39;</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;moment-plugin&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e>moment.</span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br></div></div><p><code>declare module</code> 也可用于在一个文件中一次性声明多个模块的类型<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/27-multiple-declare-module target=_blank rel=noreferrer>27</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/foo-bar.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>module</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Foo</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#ffab70>foo</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>module</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;bar&#39;</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>bar</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> {Foo} </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> bar </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;bar&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> f</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Foo</span></span>
<span class=line><span style=color:#e1e4e8>bar.</span><span style=color:#b392f0>bar</span><span style=color:#e1e4e8>()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/foo-bar.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>module</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>Foo</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#e36209>foo</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>module</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;bar&#39;</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>bar</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> {Foo} </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> bar </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;bar&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> f</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>Foo</span></span>
<span class=line><span style=color:#24292e>bar.</span><span style=color:#6f42c1>bar</span><span style=color:#24292e>()</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br></div></div><h4 id=声明文件中的依赖 tabindex=-1>声明文件中的依赖 <a class=header-anchor href=#声明文件中的依赖 aria-label="Permalink to &quot;声明文件中的依赖&quot;">​</a></h4><p>一个声明文件有时会依赖另一个声明文件中的类型，比如在前面的 <code>declare module</code> 的例子中，我们就在声明文件中导入了 <code>moment</code>，并且使用了 <code>moment.CalendarKey</code> 这个类型：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/moment-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> moment </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;moment&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>module</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;moment&#39;</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>moment</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>CalendarKey</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/moment-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>as</span><span style=color:#24292e> moment </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;moment&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>module</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;moment&#39;</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>moment</span><span style=color:#24292e>.</span><span style=color:#6f42c1>CalendarKey</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>除了可以在声明文件中通过 <code>import</code> 导入另一个声明文件中的类型之外，还有一个语法也可以用来导入另一个声明文件，那就是三斜线指令。</p><h6 id=三斜线指令 tabindex=-1>三斜线指令 <a class=header-anchor href=#三斜线指令 aria-label="Permalink to &quot;三斜线指令&quot;">​</a></h6><p>与 <code>namespace</code> 类似，三斜线指令也是 ts 在早期版本中为了描述模块之间的依赖关系而创造的语法。随着 ES6 的广泛应用，现在已经不建议再使用 ts 中的三斜线指令来声明模块之间的依赖关系了。</p><p>但是在声明文件中，它还是有一定的用武之地。</p><p>类似于声明文件中的 <code>import</code>，它可以用来导入另一个声明文件。与 <code>import</code> 的区别是，当且仅当在以下几个场景下，我们才需要使用三斜线指令替代 <code>import</code>：</p><ul><li>当我们在<strong>书写</strong>一个全局变量的声明文件时</li><li>当我们需要<strong>依赖</strong>一个全局变量的声明文件时</li></ul><p>####### <strong>书写</strong>一个全局变量的声明文件</p><p>这些场景听上去很拗口，但实际上很好理解——在全局变量的声明文件中，是不允许出现 <code>import</code>, <code>export</code> 关键字的。一旦出现了，那么他就会被视为一个 npm 包或 UMD 库，就不再是全局变量的声明文件了。故当我们在书写一个全局变量的声明文件时，如果需要引用另一个库的类型，那么就必须用三斜线指令了<a href=https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/28-triple-slash-directives target=_blank rel=noreferrer>28</a>：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/jquery-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>types</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;jquery&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>declare</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>options</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>JQuery</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>AjaxSettings</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>({})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/jquery-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>types</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;jquery&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>declare</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>(</span><span style=color:#e36209>options</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>JQuery</span><span style=color:#24292e>.</span><span style=color:#6f42c1>AjaxSettings</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>foo</span><span style=color:#24292e>({})</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br></div></div><p>三斜线指令的语法如上，<code>///</code> 后面使用 xml 的格式添加了对 <code>jquery</code> 类型的依赖，这样就可以在声明文件中使用 <code>JQuery.AjaxSettings</code> 类型了。</p><p>注意，三斜线指令必须放在文件的最顶端，三斜线指令的前面只允许出现单行或多行注释。</p><p>####### <strong>依赖</strong>一个全局变量的声明文件</p><p>在另一个场景下，当我们需要依赖一个全局变量的声明文件时，由于全局变量不支持通过 <code>import</code> 导入，当然也就必须使用三斜线指令来引入了：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// types/node-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>types</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;node&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>(</span><span style=color:#ffab70>p</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>NodeJS</span><span style=color:#e1e4e8>.</span><span style=color:#b392f0>Process</span><span style=color:#e1e4e8>)</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> {foo} </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;node-plugin&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>(global.process)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// types/node-plugin/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>types</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;node&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>(</span><span style=color:#e36209>p</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>NodeJS</span><span style=color:#24292e>.</span><span style=color:#6f42c1>Process</span><span style=color:#24292e>)</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> {foo} </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;node-plugin&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>foo</span><span style=color:#24292e>(global.process)</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><p>在上面的例子中，我们通过三斜线指引入了 <code>node</code> 的类型，然后在声明文件中使用了 <code>NodeJS.Process</code> 这个类型。最后在使用到 <code>foo</code> 的时候，传入了 <code>node</code> 中的全局变量 <code>process</code>。</p><p>由于引入的 <code>node</code> 中的类型都是全局变量的类型，它们是没有办法通过 <code>import</code> 来导入的，所以这种场景下也只能通过三斜线指令来引入了。</p><p>以上两种使用场景下，都是由于需要书写或需要依赖全局变量的声明文件，所以必须使用三斜线指令。在其他的一些不是必要使用三斜线指令的情况下，就都需要使用 <code>import</code> 来导入。</p><p>####### 拆分声明文件</p><p>当我们的全局变量的声明文件太大时，可以通过拆分为多个文件，然后在一个入口文件中将它们一一引入，来提高代码的可维护性。比如 <code>jQuery</code> 的声明文件就是这样的：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// node_modules/@types/jquery/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>types</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;sizzle&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>path</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;JQueryStatic.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>path</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;JQuery.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>path</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;misc.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#85e89d>reference</span><span style=color:#6a737d> </span><span style=color:#b392f0>path</span><span style=color:#f97583>=</span><span style=color:#9ecbff>&quot;legacy.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> jQuery</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// node_modules/@types/jquery/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>types</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;sizzle&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>path</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;JQueryStatic.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>path</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;JQuery.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>path</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;misc.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line><span style=color:#6a737d>/// &lt;</span><span style=color:#22863a>reference</span><span style=color:#6a737d> </span><span style=color:#6f42c1>path</span><span style=color:#d73a49>=</span><span style=color:#032f62>&quot;legacy.d.ts&quot;</span><span style=color:#6a737d> /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> jQuery</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><p>其中用到了 <code>types</code> 和 <code>path</code> 两种不同的指令。它们的区别是：<code>types</code> 用于声明对另一个库的依赖，而 <code>path</code> 用于声明对另一个文件的依赖。</p><p>上例中，<code>sizzle</code> 是与 <code>jquery</code> 平行的另一个库，所以需要使用 <code>types=&quot;sizzle&quot;</code> 来声明对它的依赖。而其他的三斜线指令就是将 <code>jquery</code> 的声明拆分到不同的文件中了，然后在这个入口文件中使用 <code>path=&quot;foo&quot;</code> 将它们一一引入。</p><p>####### 其他三斜线指令</p><p>除了这两种三斜线指令之外，还有其他的三斜线指令，比如 <code>/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</code>, <code>/// &lt;amd-module /&gt;</code> 等，但它们都是废弃的语法，故这里就不介绍了，详情可见<a href=http://www.typescriptlang.org/docs/handbook/triple-slash-directives.html target=_blank rel=noreferrer>官网</a>。</p><h4 id=自动生成声明文件 tabindex=-1>自动生成声明文件 <a class=header-anchor href=#自动生成声明文件 aria-label="Permalink to &quot;自动生成声明文件&quot;">​</a></h4><p>如果库的源码本身就是由 ts 写的，那么在使用 <code>tsc</code> 脚本将 ts 编译为 js 的时候，添加 <code>declaration</code> 选项，就可以同时也生成 <code>.d.ts</code> 声明文件了。</p><p>我们可以在命令行中添加 <code>--declaration</code>（简写 <code>-d</code>），或者在 <code>tsconfig.json</code> 中添加 <code>declaration</code> 选项。这里以 <code>tsconfig.json</code> 为例：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>json</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;compilerOptions&quot;</span><span style=color:#e1e4e8>: {</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>&quot;module&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;commonjs&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>&quot;outDir&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;lib&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>		</span><span style=color:#79b8ff>&quot;declaration&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#79b8ff>true</span></span>
<span class=line><span style=color:#e1e4e8>	}</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>{</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;compilerOptions&quot;</span><span style=color:#24292e>: {</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>&quot;module&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;commonjs&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>&quot;outDir&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;lib&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>		</span><span style=color:#005cc5>&quot;declaration&quot;</span><span style=color:#24292e>: </span><span style=color:#005cc5>true</span></span>
<span class=line><span style=color:#24292e>	}</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>上例中我们添加了 <code>outDir</code> 选项，将 ts 文件的编译结果输出到 <code>lib</code> 目录下，然后添加了 <code>declaration</code> 选项，设置为 <code>true</code>，表示将会由 ts 文件自动生成 <code>.d.ts</code> 声明文件，也会输出到 <code>lib</code> 目录下。</p><p>运行 <code>tsc</code> 之后，目录结构如下：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang></span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>/path/to/project</span></span>
<span class=line><span style=color:#e1e4e8>├── lib</span></span>
<span class=line><span style=color:#e1e4e8>|  ├── bar</span></span>
<span class=line><span style=color:#e1e4e8>|  |  ├── index.d.ts</span></span>
<span class=line><span style=color:#e1e4e8>|  |  └── index.js</span></span>
<span class=line><span style=color:#e1e4e8>|  ├── index.d.ts</span></span>
<span class=line><span style=color:#e1e4e8>|  └── index.js</span></span>
<span class=line><span style=color:#e1e4e8>├── src</span></span>
<span class=line><span style=color:#e1e4e8>|  ├── bar</span></span>
<span class=line><span style=color:#e1e4e8>|  |  └── index.ts</span></span>
<span class=line><span style=color:#e1e4e8>|  └── index.ts</span></span>
<span class=line><span style=color:#e1e4e8>├── package.json</span></span>
<span class=line><span style=color:#e1e4e8>└── tsconfig.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>/path/to/project</span></span>
<span class=line><span style=color:#24292e>├── lib</span></span>
<span class=line><span style=color:#24292e>|  ├── bar</span></span>
<span class=line><span style=color:#24292e>|  |  ├── index.d.ts</span></span>
<span class=line><span style=color:#24292e>|  |  └── index.js</span></span>
<span class=line><span style=color:#24292e>|  ├── index.d.ts</span></span>
<span class=line><span style=color:#24292e>|  └── index.js</span></span>
<span class=line><span style=color:#24292e>├── src</span></span>
<span class=line><span style=color:#24292e>|  ├── bar</span></span>
<span class=line><span style=color:#24292e>|  |  └── index.ts</span></span>
<span class=line><span style=color:#24292e>|  └── index.ts</span></span>
<span class=line><span style=color:#24292e>├── package.json</span></span>
<span class=line><span style=color:#24292e>└── tsconfig.json</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br></div></div><p>在这个例子中，<code>src</code> 目录下有两个 ts 文件，分别是 <code>src/index.ts</code> 和 <code>src/bar/index.ts</code>，它们被编译到 <code>lib</code> 目录下的同时，也会生成对应的两个声明文件 <code>lib/index.d.ts</code> 和 <code>lib/bar/index.d.ts</code>。它们的内容分别是：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;./bar&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;foo&#39;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// src/bar/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>bar</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#f97583>return</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;bar&#39;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#6a737d>// lib/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>*</span><span style=color:#e1e4e8> </span><span style=color:#f97583>from</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39;./bar&#39;</span></span>
<span class=line><span style=color:#f97583>export</span><span style=color:#e1e4e8> </span><span style=color:#f97583>default</span><span style=color:#e1e4e8> </span><span style=color:#f97583>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>foo</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#6a737d>// lib/bar/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#b392f0>export</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>declare</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>function</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>bar</span><span style=color:#e1e4e8>()</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// src/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;./bar&#39;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;foo&#39;</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// src/bar/index.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>bar</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#d73a49>return</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;bar&#39;</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6a737d>// lib/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#005cc5>*</span><span style=color:#24292e> </span><span style=color:#d73a49>from</span><span style=color:#24292e> </span><span style=color:#032f62>&#39;./bar&#39;</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#24292e> </span><span style=color:#d73a49>default</span><span style=color:#24292e> </span><span style=color:#d73a49>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>foo</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#6a737d>// lib/bar/index.d.ts</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>export</span><span style=color:#24292e> </span><span style=color:#6f42c1>declare</span><span style=color:#24292e> </span><span style=color:#6f42c1>function</span><span style=color:#24292e> </span><span style=color:#6f42c1>bar</span><span style=color:#24292e>()</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br><span class=line-number>18</span><br><span class=line-number>19</span><br></div></div><p>可见，自动生成的声明文件基本保持了源码的结构，而将具体实现去掉了，生成了对应的类型声明。</p><p>使用 <code>tsc</code> 自动生成声明文件时，每个 ts 文件都会对应一个 <code>.d.ts</code> 声明文件。这样的好处是，使用方不仅可以在使用 <code>import foo from &#39;foo&#39;</code> 导入默认的模块时获得类型提示，还可以在使用 <code>import bar from &#39;foo/lib/bar&#39;</code> 导入一个子模块时，也获得对应的类型提示。</p><p>除了 <code>declaration</code> 选项之外，还有几个选项也与自动生成声明文件有关，这里只简单列举出来，不做详细演示了：</p><ul><li><code>declarationDir</code> 设置生成 <code>.d.ts</code> 文件的目录</li><li><code>declarationMap</code> 对每个 <code>.d.ts</code> 文件，都生成对应的 <code>.d.ts.map</code>（sourcemap）文件</li><li><code>emitDeclarationOnly</code> 仅生成 <code>.d.ts</code> 文件，不生成 <code>.js</code> 文件</li></ul><h3 id=发布声明文件 tabindex=-1>发布声明文件 <a class=header-anchor href=#发布声明文件 aria-label="Permalink to &quot;发布声明文件&quot;">​</a></h3><p>当我们为一个库写好了声明文件之后，下一步就是将它发布出去了。</p><p>此时有两种方案：</p><ol><li>将声明文件和源码放在一起</li><li>将声明文件发布到 <code>@types</code> 下</li></ol><p>这两种方案中优先选择第一种方案。保持声明文件与源码在一起，使用时就不需要额外增加单独的声明文件库的依赖了，而且也能保证声明文件的版本与源码的版本保持一致。</p><p>仅当我们在给别人的仓库添加类型声明文件，但原作者不愿意合并 pull request 时，才需要使用第二种方案，将声明文件发布到 <code>@types</code> 下。</p><h4 id=将声明文件和源码放在一起 tabindex=-1>将声明文件和源码放在一起 <a class=header-anchor href=#将声明文件和源码放在一起 aria-label="Permalink to &quot;将声明文件和源码放在一起&quot;">​</a></h4><p>如果声明文件是通过 <code>tsc</code> 自动生成的，那么无需做任何其他配置，只需要把编译好的文件也发布到 npm 上，使用方就可以获取到类型提示了。</p><p>如果是手动写的声明文件，那么需要满足以下条件之一，才能被正确的识别：</p><ul><li>给 <code>package.json</code> 中的 <code>types</code> 或 <code>typings</code> 字段指定一个类型声明文件地址</li><li>在项目根目录下，编写一个 <code>index.d.ts</code> 文件</li><li>针对入口文件（<code>package.json</code> 中的 <code>main</code> 字段指定的入口文件），编写一个同名不同后缀的 <code>.d.ts</code> 文件</li></ul><p>第一种方式是给 <code>package.json</code> 中的 <code>types</code> 或 <code>typings</code> 字段指定一个类型声明文件地址。比如：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>json</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;name&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;foo&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;version&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;1.0.0&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;main&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;lib/index.js&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;types&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;foo.d.ts&quot;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>{</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;name&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;foo&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;version&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;1.0.0&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;main&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;lib/index.js&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;types&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;foo.d.ts&quot;</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><p>指定了 <code>types</code> 为 <code>foo.d.ts</code> 之后，导入此库的时候，就会去找 <code>foo.d.ts</code> 作为此库的类型声明文件了。</p><p><code>typings</code> 与 <code>types</code> 一样，只是另一种写法。</p><p>如果没有指定 <code>types</code> 或 <code>typings</code>，那么就会在根目录下寻找 <code>index.d.ts</code> 文件，将它视为此库的类型声明文件。</p><p>如果没有找到 <code>index.d.ts</code> 文件，那么就会寻找入口文件（<code>package.json</code> 中的 <code>main</code> 字段指定的入口文件）是否存在对应同名不同后缀的 <code>.d.ts</code> 文件。</p><p>比如 <code>package.json</code> 是这样时：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>json</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;name&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;foo&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;version&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;1.0.0&quot;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>	</span><span style=color:#79b8ff>&quot;main&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;lib/index.js&quot;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#24292e>{</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;name&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;foo&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;version&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;1.0.0&quot;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>	</span><span style=color:#005cc5>&quot;main&quot;</span><span style=color:#24292e>: </span><span style=color:#032f62>&quot;lib/index.js&quot;</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p>就会先识别 <code>package.js</code> 中是否存在 <code>types</code> 或 <code>typings</code> 字段。发现不存在，那么就会寻找是否存在 <code>index.d.ts</code> 文件。如果还是不存在，那么就会寻找是否存在 <code>lib/index.d.ts</code> 文件。假如说连 <code>lib/index.d.ts</code> 都不存在的话，就会被认为是一个没有提供类型声明文件的库了。</p><p>有的库为了支持导入子模块，比如 <code>import bar from &#39;foo/lib/bar&#39;</code>，就需要额外再编写一个类型声明文件 <code>lib/bar.d.ts</code> 或者 <code>lib/bar/index.d.ts</code>，这与自动生成声明文件类似，一个库中同时包含了多个类型声明文件。</p><h4 id=将声明文件发布到-types-下 tabindex=-1>将声明文件发布到 <code>@types</code> 下 <a class=header-anchor href=#将声明文件发布到-types-下 aria-label="Permalink to &quot;将声明文件发布到 `@types` 下&quot;">​</a></h4><p>如果我们是在给别人的仓库添加类型声明文件，但原作者不愿意合并 pull request，那么就需要将声明文件发布到 <code>@types</code> 下。</p><p>与普通的 npm 模块不同，<code>@types</code> 是统一由 <a href=https://github.com/DefinitelyTyped/DefinitelyTyped/ target=_blank rel=noreferrer>DefinitelyTyped</a> 管理的。要将声明文件发布到 <code>@types</code> 下，就需要给 <a href=https://github.com/DefinitelyTyped/DefinitelyTyped/ target=_blank rel=noreferrer>DefinitelyTyped</a> 创建一个 pull-request，其中包含了类型声明文件，测试代码，以及 <code>tsconfig.json</code> 等。</p><p>pull-request 需要符合它们的规范，并且通过测试，才能被合并，稍后就会被自动发布到 <code>@types</code> 下。</p><p>在 <a href=https://github.com/DefinitelyTyped/DefinitelyTyped/ target=_blank rel=noreferrer>DefinitelyTyped</a> 中创建一个新的类型声明，需要用到一些工具，<a href=https://github.com/DefinitelyTyped/DefinitelyTyped/ target=_blank rel=noreferrer>DefinitelyTyped</a> 的文档中已经有了<a href=https://github.com/DefinitelyTyped/DefinitelyTyped#create-a-new-package target=_blank rel=noreferrer>详细的介绍</a>，这里就不赘述了，以官方文档为准。</p><h1 id=-1 tabindex=-1><a class=header-anchor href=#-1 aria-label="Permalink to &quot;&quot;">​</a></h1><h2 id=类型体操练习 tabindex=-1>类型体操练习 <a class=header-anchor href=#类型体操练习 aria-label="Permalink to &quot;类型体操练习&quot;">​</a></h2><h4 id=_1-给已有对象添加类型 tabindex=-1>1. 给已有对象添加类型 <a class=header-anchor href=#_1-给已有对象添加类型 aria-label="Permalink to &quot;1. 给已有对象添加类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>page</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {num:number} </span><span style=color:#6a737d>// 给对象添加size属性且不报错</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Addatr</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> page </span><span style=color:#f97583>&amp;</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>size</span><span style=color:#f97583>:</span><span style=color:#79b8ff>number</span></span>
<span class=line><span style=color:#e1e4e8>(</span><span style=color:#b392f0>page</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>as</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Addatr</span><span style=color:#e1e4e8>).</span><span style=color:#b392f0>size</span><span style=color:#e1e4e8> = </span><span style=color:#79b8ff>33</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>page</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {num:number} </span><span style=color:#6a737d>// 给对象添加size属性且不报错</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Addatr</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#d73a49>typeof</span><span style=color:#24292e> page </span><span style=color:#d73a49>&amp;</span><span style=color:#24292e> </span><span style=color:#6f42c1>size</span><span style=color:#d73a49>:</span><span style=color:#005cc5>number</span></span>
<span class=line><span style=color:#24292e>(</span><span style=color:#6f42c1>page</span><span style=color:#24292e> </span><span style=color:#6f42c1>as</span><span style=color:#24292e> </span><span style=color:#6f42c1>Addatr</span><span style=color:#24292e>).</span><span style=color:#6f42c1>size</span><span style=color:#24292e> = </span><span style=color:#005cc5>33</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><h4 id=_2-对象所有属性可选 tabindex=-1>2.对象所有属性可选 <a class=header-anchor href=#_2-对象所有属性可选 aria-label="Permalink to &quot;2.对象所有属性可选&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$Partial</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  [</span><span style=color:#b392f0>Key</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>? </span><span style=color:#e1e4e8>= </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[Key]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>C</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$Partial</span><span style=color:#e1e4e8>&lt;{</span><span style=color:#ffab70>a</span><span style=color:#f97583>:</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>,</span><span style=color:#ffab70>b</span><span style=color:#f97583>:</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>}&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>$Partial</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  [</span><span style=color:#6f42c1>Key</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>]</span><span style=color:#d73a49>? </span><span style=color:#24292e>= </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[Key]</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>C</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>$Partial</span><span style=color:#24292e>&lt;{</span><span style=color:#e36209>a</span><span style=color:#d73a49>:</span><span style=color:#005cc5>string</span><span style=color:#24292e>,</span><span style=color:#e36209>b</span><span style=color:#d73a49>:</span><span style=color:#005cc5>number</span><span style=color:#24292e>}&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h4 id=_3-对象所有属性只读 tabindex=-1>3.对象所有属性只读 <a class=header-anchor href=#_3-对象所有属性只读 aria-label="Permalink to &quot;3.对象所有属性只读&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$ReadOnly</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>readOnly</span><span style=color:#e1e4e8> [</span><span style=color:#b392f0>Key</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>Key</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>readOnlyObj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$ReadOnly</span><span style=color:#e1e4e8>&lt;{</span><span style=color:#ffab70>a</span><span style=color:#f97583>:</span><span style=color:#79b8ff>123</span><span style=color:#e1e4e8>,</span><span style=color:#ffab70>b</span><span style=color:#f97583>:</span><span style=color:#79b8ff>234</span><span style=color:#e1e4e8>}&gt;</span></span>
<span class=line><span style=color:#6a737d>//eg:</span></span>
<span class=line><span style=color:#f97583>let</span><span style=color:#e1e4e8> obj</span><span style=color:#f97583>:</span><span style=color:#b392f0>readOnlyobj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  a:</span><span style=color:#79b8ff>123</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  b:</span><span style=color:#79b8ff>234</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>$ReadOnly</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>readOnly</span><span style=color:#24292e> [</span><span style=color:#6f42c1>Key</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#6f42c1>Key</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>readOnlyObj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>$ReadOnly</span><span style=color:#24292e>&lt;{</span><span style=color:#e36209>a</span><span style=color:#d73a49>:</span><span style=color:#005cc5>123</span><span style=color:#24292e>,</span><span style=color:#e36209>b</span><span style=color:#d73a49>:</span><span style=color:#005cc5>234</span><span style=color:#24292e>}&gt;</span></span>
<span class=line><span style=color:#6a737d>//eg:</span></span>
<span class=line><span style=color:#d73a49>let</span><span style=color:#24292e> obj</span><span style=color:#d73a49>:</span><span style=color:#6f42c1>readOnlyobj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  a:</span><span style=color:#005cc5>123</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  b:</span><span style=color:#005cc5>234</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><h4 id=_4-对象属性只读且可选 tabindex=-1>4.对象属性只读且可选 <a class=header-anchor href=#_4-对象属性只读且可选 aria-label="Permalink to &quot;4.对象属性只读且可选&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ReadonluAndchooese</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$ReadOnly</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>Partial</span><span style=color:#e1e4e8>&lt;{ </span><span style=color:#ffab70>a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>; </span><span style=color:#ffab70>b</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>boolean</span><span style=color:#e1e4e8> }&gt;&gt;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ReadonluAndchooese</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>$ReadOnly</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>Partial</span><span style=color:#24292e>&lt;{ </span><span style=color:#e36209>a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>; </span><span style=color:#e36209>b</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>boolean</span><span style=color:#24292e> }&gt;&gt;;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><h4 id=_5-infer tabindex=-1>5.infer <a class=header-anchor href=#_5-infer aria-label="Permalink to &quot;5.infer&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ParamType</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>param</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ParamType</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> (</span><span style=color:#e36209>param</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><p>在这个条件语句 T extends (param: infer P) =&gt; any ? P : T 中，infer P 表示待推断的函数参数。<br>整句表示为：如果 T 能赋值给 (param: infer P) =&gt; any，则结果是 (param: infer P) =&gt; any 类型中的参数 P，否则返回为 T。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>interface</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>User</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Func</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> (</span><span style=color:#ffab70>user</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>User</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=&gt;</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>void</span><span style=color:#e1e4e8>;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Param</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ParamType</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>Func</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// Param = User</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>AA</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ParamType</span><span style=color:#e1e4e8>&lt;</span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// string</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>interface</span><span style=color:#24292e> </span><span style=color:#6f42c1>User</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>number</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Func</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> (</span><span style=color:#e36209>user</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>User</span><span style=color:#24292e>) </span><span style=color:#d73a49>=&gt;</span><span style=color:#24292e> </span><span style=color:#005cc5>void</span><span style=color:#24292e>;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Param</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>ParamType</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>Func</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// Param = User</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>AA</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>ParamType</span><span style=color:#24292e>&lt;</span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// string</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br></div></div><h4 id=_5-从对象中取一些需要的属性组成联合类型 tabindex=-1>5.从对象中取一些需要的属性组成联合类型 <a class=header-anchor href=#_5-从对象中取一些需要的属性组成联合类型 aria-label="Permalink to &quot;5.从对象中取一些需要的属性组成联合类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$Pick</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> { [</span><span style=color:#b392f0>Key</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>[</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>] };</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>$Pick</span><span style=color:#e1e4e8>&lt;{ </span><span style=color:#ffab70>a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>123</span><span style=color:#e1e4e8>; </span><span style=color:#ffab70>b</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>234</span><span style=color:#e1e4e8>; </span><span style=color:#ffab70>c</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>346</span><span style=color:#e1e4e8> }, </span><span style=color:#9ecbff>&quot;a&quot;</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// {a:123}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>$Pick</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> { [</span><span style=color:#6f42c1>Key</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>K</span><span style=color:#24292e>[</span><span style=color:#6f42c1>T</span><span style=color:#24292e>] };</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>$Pick</span><span style=color:#24292e>&lt;{ </span><span style=color:#e36209>a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>123</span><span style=color:#24292e>; </span><span style=color:#e36209>b</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>234</span><span style=color:#24292e>; </span><span style=color:#e36209>c</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>346</span><span style=color:#24292e> }, </span><span style=color:#032f62>&quot;a&quot;</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// {a:123}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><h4 id=_6-omit-t-k-从类型-t-中剔除-k-的所有属性 tabindex=-1>6.Omit&lt;T,K&gt;从类型 T 中剔除 K 的所有属性 <a class=header-anchor href=#_6-omit-t-k-从类型-t-中剔除-k-的所有属性 aria-label="Permalink to &quot;6.Omit&amp;lt;T,K&amp;gt;从类型 T 中剔除 K 的所有属性&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>MyOmit</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Pick</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>Exclude</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>keyof</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8>&gt;&gt;;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#ffab70>name</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;jack&quot;</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#ffab70>age</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>22</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>};</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TestOmit</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>MyOmit</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>Obj</span><span style=color:#e1e4e8>, </span><span style=color:#9ecbff>&quot;name&quot;</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// {name:&#39;jack&#39;} //</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>MyOmit</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Pick</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>Exclude</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>keyof</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e>&gt;&gt;;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#e36209>name</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;jack&quot;</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#e36209>age</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>22</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>};</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TestOmit</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>MyOmit</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>Obj</span><span style=color:#24292e>, </span><span style=color:#032f62>&quot;name&quot;</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// {name:&#39;jack&#39;} //</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br></div></div><h4 id=_7-include tabindex=-1>7.Include <a class=header-anchor href=#_7-include aria-label="Permalink to &quot;7.Include&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// type isPillarMen = Includes&lt;[&#39;Kars&#39;, &#39;Esidisi&#39;, &#39;Wamuu&#39;, &#39;Santana&#39;], &#39;Dio&#39;&gt; // expected to be `false`</span></span>
<span class=line><span style=color:#6a737d>// 先将数组转化为一个value为true的对象，然后再判断属性是否为有这个为true的属性</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>MyIncludes</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>K</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  [</span><span style=color:#b392f0>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>]]</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#e1e4e8>}[</span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>false</span><span style=color:#e1e4e8>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// type isPillarMen = Includes&lt;[&#39;Kars&#39;, &#39;Esidisi&#39;, &#39;Wamuu&#39;, &#39;Santana&#39;], &#39;Dio&#39;&gt; // expected to be `false`</span></span>
<span class=line><span style=color:#6a737d>// 先将数组转化为一个value为true的对象，然后再判断属性是否为有这个为true的属性</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>MyIncludes</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>K</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  [</span><span style=color:#6f42c1>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#005cc5>number</span><span style=color:#24292e>]]</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>}[</span><span style=color:#6f42c1>A</span><span style=color:#24292e>] </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>false</span><span style=color:#24292e>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br></div></div><p>//注意 <br><strong>T[number] 用来获取数组元素类型的集合(转为数组的联合类型)</strong><br><strong>T[length] 用来获取数组元素类型集合的长度</strong></p><h4 id=_8-concat tabindex=-1>8.Concat <a class=header-anchor href=#_8-concat aria-label="Permalink to &quot;8.Concat&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Concat</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#f97583>readonly</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[], </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[]</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> [</span><span style=color:#f97583>...</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#f97583>...</span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>]</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> [</span><span style=color:#f97583>...</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>U</span><span style=color:#e1e4e8>];</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>arr</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>4</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>as</span><span style=color:#e1e4e8> </span><span style=color:#f97583>const</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ConcatArr</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Concat</span><span style=color:#e1e4e8>&lt;</span><span style=color:#f97583>typeof</span><span style=color:#e1e4e8> arr, </span><span style=color:#79b8ff>5</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// 1,2,3,4,5</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Concat</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#d73a49>readonly</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[], </span><span style=color:#6f42c1>U</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>U</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[]</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> [</span><span style=color:#d73a49>...</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#d73a49>...</span><span style=color:#6f42c1>U</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> [</span><span style=color:#d73a49>...</span><span style=color:#6f42c1>T</span><span style=color:#24292e>, </span><span style=color:#6f42c1>U</span><span style=color:#24292e>];</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>arr</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>4</span><span style=color:#24292e>] </span><span style=color:#d73a49>as</span><span style=color:#24292e> </span><span style=color:#d73a49>const</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ConcatArr</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>Concat</span><span style=color:#24292e>&lt;</span><span style=color:#d73a49>typeof</span><span style=color:#24292e> arr, </span><span style=color:#005cc5>5</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// 1,2,3,4,5</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><p><strong>...T 可以枚举数组类型</strong></p><h4 id=_9-深度-readonly tabindex=-1>9.深度 Readonly <a class=header-anchor href=#_9-深度-readonly aria-label="Permalink to &quot;9.深度 Readonly&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>obj</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  name:</span><span style=color:#9ecbff>&#39;ayu&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  age:</span><span style=color:#79b8ff>22</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  friends:{</span></span>
<span class=line><span style=color:#e1e4e8>    f1:{</span></span>
<span class=line><span style=color:#e1e4e8>      name:</span><span style=color:#9ecbff>&#39;tom&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>      age:</span><span style=color:#79b8ff>33</span></span>
<span class=line><span style=color:#e1e4e8>    },</span></span>
<span class=line><span style=color:#e1e4e8>    f2:{</span></span>
<span class=line><span style=color:#e1e4e8>      name:</span><span style=color:#9ecbff>&#39;jack&#39;</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>      age:</span><span style=color:#79b8ff>44</span></span>
<span class=line><span style=color:#e1e4e8>    }</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line><span style=color:#e1e4e8>type IsObject</span><span style=color:#f97583>&lt;</span><span style=color:#79b8ff>T</span><span style=color:#f97583>&gt;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> keyof </span><span style=color:#79b8ff>T</span><span style=color:#e1e4e8> extends never </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>false</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span></span>
<span class=line><span style=color:#e1e4e8>type DeepReadonly</span><span style=color:#f97583>&lt;</span><span style=color:#79b8ff>T</span><span style=color:#f97583>&gt;=</span><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#e1e4e8>  readonly [ </span><span style=color:#79b8ff>P</span><span style=color:#e1e4e8> </span><span style=color:#f97583>in</span><span style=color:#e1e4e8> keyof </span><span style=color:#79b8ff>T</span><span style=color:#e1e4e8> ]:IsObject</span><span style=color:#f97583>&lt;</span><span style=color:#79b8ff>T</span><span style=color:#e1e4e8>[ p ]</span><span style=color:#f97583>&gt;</span><span style=color:#e1e4e8> extends </span><span style=color:#79b8ff>true</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> DeepReadonly</span><span style=color:#f97583>&lt;</span><span style=color:#79b8ff>T</span><span style=color:#e1e4e8>[ </span><span style=color:#79b8ff>P</span><span style=color:#e1e4e8> ]</span><span style=color:#f97583>&gt;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>T</span><span style=color:#e1e4e8>[ </span><span style=color:#79b8ff>P</span><span style=color:#e1e4e8> ]</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> </span><span style=color:#005cc5>obj</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  name:</span><span style=color:#032f62>&#39;ayu&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  age:</span><span style=color:#005cc5>22</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  friends:{</span></span>
<span class=line><span style=color:#24292e>    f1:{</span></span>
<span class=line><span style=color:#24292e>      name:</span><span style=color:#032f62>&#39;tom&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      age:</span><span style=color:#005cc5>33</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#24292e>    f2:{</span></span>
<span class=line><span style=color:#24292e>      name:</span><span style=color:#032f62>&#39;jack&#39;</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      age:</span><span style=color:#005cc5>44</span></span>
<span class=line><span style=color:#24292e>    }</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#24292e>type IsObject</span><span style=color:#d73a49>&lt;</span><span style=color:#005cc5>T</span><span style=color:#d73a49>&gt;</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> keyof </span><span style=color:#005cc5>T</span><span style=color:#24292e> extends never </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#005cc5>false</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span></span>
<span class=line><span style=color:#24292e>type DeepReadonly</span><span style=color:#d73a49>&lt;</span><span style=color:#005cc5>T</span><span style=color:#d73a49>&gt;=</span><span style=color:#24292e>{</span></span>
<span class=line><span style=color:#24292e>  readonly [ </span><span style=color:#005cc5>P</span><span style=color:#24292e> </span><span style=color:#d73a49>in</span><span style=color:#24292e> keyof </span><span style=color:#005cc5>T</span><span style=color:#24292e> ]:IsObject</span><span style=color:#d73a49>&lt;</span><span style=color:#005cc5>T</span><span style=color:#24292e>[ p ]</span><span style=color:#d73a49>&gt;</span><span style=color:#24292e> extends </span><span style=color:#005cc5>true</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> DeepReadonly</span><span style=color:#d73a49>&lt;</span><span style=color:#005cc5>T</span><span style=color:#24292e>[ </span><span style=color:#005cc5>P</span><span style=color:#24292e> ]</span><span style=color:#d73a49>&gt;</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>T</span><span style=color:#24292e>[ </span><span style=color:#005cc5>P</span><span style=color:#24292e> ]</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br><span class=line-number>15</span><br><span class=line-number>16</span><br><span class=line-number>17</span><br></div></div><h4 id=_10-元组转联合类型 tabindex=-1>10.元组转联合类型 <a class=header-anchor href=#_10-元组转联合类型 aria-label="Permalink to &quot;10.元组转联合类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Arr</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>4</span><span style=color:#e1e4e8>];</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TupleToUnion</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>[</span><span style=color:#79b8ff>number</span><span style=color:#e1e4e8>];</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Arr</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>4</span><span style=color:#24292e>];</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TupleToUnion</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>[</span><span style=color:#005cc5>number</span><span style=color:#24292e>];</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br></div></div><h4 id=_11-获取数组最后一个元素的类型 tabindex=-1>11.获取数组最后一个元素的类型 <a class=header-anchor href=#_11-获取数组最后一个元素的类型 aria-label="Permalink to &quot;11.获取数组最后一个元素的类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// 最后一个元素</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>LastEle</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[]&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> [</span><span style=color:#f97583>...infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>, </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8>;</span></span>
<span class=line></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A1</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>1</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>2</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>3</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>4</span><span style=color:#e1e4e8>];</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ReultA</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>LastEle</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>A1</span><span style=color:#e1e4e8>&gt;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// 最后一个元素</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>LastEle</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[]&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> [</span><span style=color:#d73a49>...infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e>, </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e>] </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e>;</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>A1</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> [</span><span style=color:#005cc5>1</span><span style=color:#24292e>, </span><span style=color:#005cc5>2</span><span style=color:#24292e>, </span><span style=color:#005cc5>3</span><span style=color:#24292e>, </span><span style=color:#005cc5>4</span><span style=color:#24292e>];</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ReultA</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>LastEle</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>A1</span><span style=color:#24292e>&gt;;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><h4 id=_12-pop tabindex=-1>12.Pop <a class=header-anchor href=#_12-pop aria-label="Permalink to &quot;12.Pop&quot;">​</a></h4><p>实现一个通用 Pop&lt;T&gt; 接受一个数组 T 并返回一个没有最后一个元素的数组</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Pop</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>any</span><span style=color:#e1e4e8>[]&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> [</span><span style=color:#f97583>...infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>, </span><span style=color:#f97583>infer</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Pop</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>any</span><span style=color:#24292e>[]&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> [</span><span style=color:#d73a49>...infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e>, </span><span style=color:#d73a49>infer</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e>] </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br></div></div><h4 id=_13-去除字符串空格 tabindex=-1>13.去除字符串空格 <a class=header-anchor href=#_13-去除字符串空格 aria-label="Permalink to &quot;13.去除字符串空格&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TWiteSpace</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot; &quot;</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TrimLeft</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`${</span><span style=color:#b392f0>TWiteSpace</span><span style=color:#9ecbff>}${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>B</span><span style=color:#9ecbff>}`</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TrimLeft</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>B</span><span style=color:#e1e4e8>&gt;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>FilterStrStartTrim</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TrimLeft</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&quot; hello world   &quot;</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// &#39;hello world   &#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TWiteSpace</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&quot; &quot;</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TrimLeft</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>`${</span><span style=color:#6f42c1>TWiteSpace</span><span style=color:#032f62>}${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>B</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>TrimLeft</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>B</span><span style=color:#24292e>&gt;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>FilterStrStartTrim</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>TrimLeft</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&quot; hello world   &quot;</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// &#39;hello world   &#39;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TWiteSpace</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&#39; &#39;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TrimLeft</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`${</span><span style=color:#b392f0>TWiteSpace</span><span style=color:#9ecbff>}${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>B</span><span style=color:#9ecbff>}`</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8>  </span><span style=color:#b392f0>TrimLeft</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>B</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TrimRight</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>T</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>A</span><span style=color:#9ecbff>}${</span><span style=color:#b392f0>TWiteSpace</span><span style=color:#9ecbff>}`</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>TrimRight</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>FilterStrTrim</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> &lt;</span><span style=color:#b392f0>TrimLeft</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>TrimRight</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&#39;   hello world    &#39;</span><span style=color:#e1e4e8>&gt;&gt;&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TWiteSpace</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#032f62>&#39; &#39;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TrimLeft</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>`${</span><span style=color:#6f42c1>TWiteSpace</span><span style=color:#032f62>}${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>B</span><span style=color:#032f62>}`</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e>  </span><span style=color:#6f42c1>TrimLeft</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>B</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>TrimRight</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>T</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>`${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>A</span><span style=color:#032f62>}${</span><span style=color:#6f42c1>TWiteSpace</span><span style=color:#032f62>}`</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>TrimRight</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>A</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>FilterStrTrim</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> &lt;</span><span style=color:#6f42c1>TrimLeft</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>TrimRight</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&#39;   hello world    &#39;</span><span style=color:#24292e>&gt;&gt;&gt;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br></div></div><h4 id=_14-replace tabindex=-1>14.Replace <a class=header-anchor href=#_14-replace aria-label="Permalink to &quot;14.Replace&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#6a737d>// type replaced = Replace&lt;&#39;types are fun!&#39;, &#39;fun&#39;, &#39;awesome&#39;&gt; // expected to be &#39;types are awesome!&#39;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>Replace</span><span style=color:#e1e4e8>&lt;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>From</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>To</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>From</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;&quot;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>L</span><span style=color:#9ecbff>}${</span><span style=color:#b392f0>From</span><span style=color:#9ecbff>}${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>R</span><span style=color:#9ecbff>}`</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`${</span><span style=color:#b392f0>L</span><span style=color:#9ecbff>}${</span><span style=color:#b392f0>To</span><span style=color:#9ecbff>}${</span><span style=color:#b392f0>R</span><span style=color:#9ecbff>}`</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span><span style=color:#e1e4e8>;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#6a737d>// type replaced = Replace&lt;&#39;types are fun!&#39;, &#39;fun&#39;, &#39;awesome&#39;&gt; // expected to be &#39;types are awesome!&#39;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>Replace</span><span style=color:#24292e>&lt;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>From</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>To</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>From</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;&quot;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>`${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>L</span><span style=color:#032f62>}${</span><span style=color:#6f42c1>From</span><span style=color:#032f62>}${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>R</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#032f62>`${</span><span style=color:#6f42c1>L</span><span style=color:#032f62>}${</span><span style=color:#6f42c1>To</span><span style=color:#032f62>}${</span><span style=color:#6f42c1>R</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span><span style=color:#24292e>;</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h4 id=_15-replaceall tabindex=-1>15.ReplaceAll <a class=header-anchor href=#_15-replaceall aria-label="Permalink to &quot;15.ReplaceAll&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ReplaceAll</span><span style=color:#e1e4e8>&lt;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>From</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span><span style=color:#e1e4e8>,</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#b392f0>To</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>string</span></span>
<span class=line><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>From</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;&quot;</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>L</span><span style=color:#9ecbff>}${</span><span style=color:#b392f0>From</span><span style=color:#9ecbff>}${</span><span style=color:#f97583>infer</span><span style=color:#9ecbff> </span><span style=color:#b392f0>R</span><span style=color:#9ecbff>}`</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>`ReplaceAll&lt;L,From,To&gt;${</span><span style=color:#b392f0>To</span><span style=color:#9ecbff>}${</span><span style=color:#b392f0>ReplaceAll</span><span style=color:#9ecbff>&lt;</span><span style=color:#b392f0>R</span><span style=color:#9ecbff>, </span><span style=color:#b392f0>From</span><span style=color:#9ecbff>, </span><span style=color:#b392f0>To</span><span style=color:#9ecbff>&gt;</span><span style=color:#9ecbff>}`</span></span>
<span class=line><span style=color:#e1e4e8>  </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>S</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#6a737d>// 分别将左右两边的进行机递归处理</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>ReplaceAll</span><span style=color:#24292e>&lt;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>From</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#6f42c1>To</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#005cc5>string</span></span>
<span class=line><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>From</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;&quot;</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#032f62>`${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>L</span><span style=color:#032f62>}${</span><span style=color:#6f42c1>From</span><span style=color:#032f62>}${</span><span style=color:#d73a49>infer</span><span style=color:#032f62> </span><span style=color:#6f42c1>R</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#032f62>`ReplaceAll&lt;L,From,To&gt;${</span><span style=color:#6f42c1>To</span><span style=color:#032f62>}${</span><span style=color:#6f42c1>ReplaceAll</span><span style=color:#032f62>&lt;</span><span style=color:#6f42c1>R</span><span style=color:#032f62>, </span><span style=color:#6f42c1>From</span><span style=color:#032f62>, </span><span style=color:#6f42c1>To</span><span style=color:#032f62>&gt;</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#24292e>  </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>S</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#6a737d>// 分别将左右两边的进行机递归处理</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br></div></div><h4 id=_16。分布式条件类型的理解 tabindex=-1>16。分布式条件类型的理解 <a class=header-anchor href=#_16。分布式条件类型的理解 aria-label="Permalink to &quot;16。分布式条件类型的理解&quot;">​</a></h4><p><strong>会把 extends 左边的类型进行循环处理，然后重新组成联合类型</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>D</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> { </span><span style=color:#ffab70>a</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>; </span><span style=color:#ffab70>b</span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> } </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>never</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>R</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>D</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&quot;a&quot;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;b&quot;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;c&quot;</span><span style=color:#e1e4e8>&gt;;</span></span>
<span class=line><span style=color:#6a737d>/*</span></span>
<span class=line><span style=color:#6a737d>type R = {</span></span>
<span class=line><span style=color:#6a737d>    a: &quot;a&quot;;</span></span>
<span class=line><span style=color:#6a737d>    b: &quot;a&quot; | &quot;b&quot; | &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>} | {</span></span>
<span class=line><span style=color:#6a737d>    a: &quot;b&quot;;</span></span>
<span class=line><span style=color:#6a737d>    b: &quot;a&quot; | &quot;b&quot; | &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>} | {</span></span>
<span class=line><span style=color:#6a737d>    a: &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>    b: &quot;a&quot; | &quot;b&quot; | &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>}</span></span>
<span class=line><span style=color:#6a737d>*/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>D</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>A</span><span style=color:#24292e>, </span><span style=color:#6f42c1>B</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> { </span><span style=color:#e36209>a</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e>; </span><span style=color:#e36209>b</span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#6f42c1>B</span><span style=color:#24292e> } </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>never</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>R</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>D</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&quot;a&quot;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;b&quot;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;c&quot;</span><span style=color:#24292e>&gt;;</span></span>
<span class=line><span style=color:#6a737d>/*</span></span>
<span class=line><span style=color:#6a737d>type R = {</span></span>
<span class=line><span style=color:#6a737d>    a: &quot;a&quot;;</span></span>
<span class=line><span style=color:#6a737d>    b: &quot;a&quot; | &quot;b&quot; | &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>} | {</span></span>
<span class=line><span style=color:#6a737d>    a: &quot;b&quot;;</span></span>
<span class=line><span style=color:#6a737d>    b: &quot;a&quot; | &quot;b&quot; | &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>} | {</span></span>
<span class=line><span style=color:#6a737d>    a: &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>    b: &quot;a&quot; | &quot;b&quot; | &quot;c&quot;;</span></span>
<span class=line><span style=color:#6a737d>}</span></span>
<span class=line><span style=color:#6a737d>*/</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br><span class=line-number>4</span><br><span class=line-number>5</span><br><span class=line-number>6</span><br><span class=line-number>7</span><br><span class=line-number>8</span><br><span class=line-number>9</span><br><span class=line-number>10</span><br><span class=line-number>11</span><br><span class=line-number>12</span><br><span class=line-number>13</span><br><span class=line-number>14</span><br></div></div><h4 id=_17-判断类型是否为联合类型 tabindex=-1>17.判断类型是否为联合类型 <a class=header-anchor href=#_17-判断类型是否为联合类型 aria-label="Permalink to &quot;17.判断类型是否为联合类型&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class=copy></button><span class=lang>typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>IsUnion</span><span style=color:#e1e4e8>&lt;</span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>, </span><span style=color:#b392f0>B</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>&gt; </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>A</span><span style=color:#e1e4e8> </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> ([</span><span style=color:#b392f0>B</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>extends</span><span style=color:#e1e4e8> [</span><span style=color:#b392f0>A</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>?</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>false</span><span style=color:#e1e4e8> </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>true</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>:</span><span style=color:#e1e4e8> </span><span style=color:#79b8ff>false</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>CC</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>ISUnion</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&quot;a&quot;</span><span style=color:#e1e4e8> </span><span style=color:#f97583>|</span><span style=color:#e1e4e8> </span><span style=color:#9ecbff>&quot;b&quot;</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// true</span></span>
<span class=line><span style=color:#f97583>type</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>DD</span><span style=color:#e1e4e8> </span><span style=color:#f97583>=</span><span style=color:#e1e4e8> </span><span style=color:#b392f0>IsUnion</span><span style=color:#e1e4e8>&lt;</span><span style=color:#9ecbff>&quot;a&quot;</span><span style=color:#e1e4e8>&gt;; </span><span style=color:#6a737d>// false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>IsUnion</span><span style=color:#24292e>&lt;</span><span style=color:#6f42c1>A</span><span style=color:#24292e>, </span><span style=color:#6f42c1>B</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e>&gt; </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> </span><span style=color:#d73a49>extends</span><span style=color:#24292e> </span><span style=color:#6f42c1>A</span><span style=color:#24292e> </span><span style=color:#d73a49>?</span><span style=color:#24292e> ([</span><span style=color:#6f42c1>B</span><span style=color:#24292e>] </span><span style=color:#d73a49>extends</span><span style=color:#24292e> [</span><span style=color:#6f42c1>A</span><span style=color:#24292e>] </span><span style=color:#d73a49>?</span><span style=color:#24292e> </span><span style=color:#005cc5>false</span><span style=color:#24292e> </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>true</span><span style=color:#24292e>) </span><span style=color:#d73a49>:</span><span style=color:#24292e> </span><span style=color:#005cc5>false</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>CC</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>ISUnion</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&quot;a&quot;</span><span style=color:#24292e> </span><span style=color:#d73a49>|</span><span style=color:#24292e> </span><span style=color:#032f62>&quot;b&quot;</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// true</span></span>
<span class=line><span style=color:#d73a49>type</span><span style=color:#24292e> </span><span style=color:#6f42c1>DD</span><span style=color:#24292e> </span><span style=color:#d73a49>=</span><span style=color:#24292e> </span><span style=color:#6f42c1>IsUnion</span><span style=color:#24292e>&lt;</span><span style=color:#032f62>&quot;a&quot;</span><span style=color:#24292e>&gt;; </span><span style=color:#6a737d>// false</span></span></code></pre><div class=line-numbers-wrapper aria-hidden=true><span class=line-number>1</span><br><span class=line-number>2</span><br><span class=line-number>3</span><br></div></div><p>给类型加数组是为了防止它循环</p></div></div></main><footer class=VPDocFooter data-v-e521b9a4 data-v-9519b7ec><!--[--><!--]--><div class=edit-info data-v-9519b7ec><div class=edit-link data-v-9519b7ec><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href=https://github.com/mufeiyu-ayu target=_blank rel=noreferrer data-v-9519b7ec><!--[--><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24" class=edit-link-icon aria-label="edit icon" data-v-9519b7ec><path d=M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--></a></div><div class=last-updated data-v-9519b7ec><p class=VPLastUpdated data-v-9519b7ec data-v-cd6026f8>Last updated: <time datetime=2023-09-04T21:59:22.000Z data-v-cd6026f8></time></p></div></div><nav class=prev-next data-v-9519b7ec><div class=pager data-v-9519b7ec><!----></div><div class=pager data-v-9519b7ec><a class="pager-link next" href=/doc/Web/ data-v-9519b7ec><span class=desc data-v-9519b7ec>它丫的，继续冲</span><span class=title data-v-9519b7ec>前言</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><div data-v-36382ed6></div><!--[--><!--]--></div></div> <script>window.__VP_HASH_MAP__=JSON.parse('{"web_javascript_dom_domrender.md":"2a9e6cc2","page_index.md":"b27022bc","web_css_css.md":"83ee4aef","web_git_index.md":"b2bacc40","page_nestjs_sportsacrobatics_nestclijson.md":"222ce9af","page_vim_index.md":"6bd960f0","page_nestjs_module.md":"913e95a8","web_javascript_datamonitoring_constructor.md":"3a171133","web_javascript_datamonitoring_tostring.md":"5dad425f","page_nestjs_interceptors.md":"c9c4d12b","page_redis_persistence.md":"7d439f31","page_docker_index.md":"21efee42","page_linux_index.md":"5a6e6f83","web_javascript_datamonitoring_typeof.md":"84228e56","page_nestjs_guard.md":"c7736217","page_nestjs_exceptionfilters.md":"cd0b810b","web_javascript_deeplearning_delay.md":"afdb9954","page_nestjs_typeorm.md":"965c3ac9","web_javascript_closer_closer_1.md":"b3ecdbe8","page_nestjs_sportsacrobatics_decorators.md":"3f177fec","web_javascript_closer_index.md":"22493444","web_sourcecode_index.md":"5e374cbe","web_javascript_equalityjudgment.md":"09d62357","web_javascript_deeplearning_precompilation.md":"c3c23b48","page_nestjs_datarequests.md":"5b9a17f5","web_javascript_dom_text.md":"ef9fd504","web_javascript_dom_index.md":"509ccef8","page_hobby_nodemailer_index.md":"1a4c687a","web_studylist_index.md":"018ac0cd","page_hobby_index.md":"b7b443c0","page_nestjs_middleware.md":"25b19d77","web_javascript_tepdead.md":"77f7b207","web_javascript_deeplearning_this.md":"afa44a09","web_javascript_closer_variablelifting.md":"f43be94a","web_javascript_datamonitoring_index.md":"7d8bb453","page_nestjs_pipes.md":"c877fcde","page_nestjs_provider.md":"3b4fc275","page_nestjs_sportsacrobatics_performanceoptimization.md":"92eeb2cc","page_nestjs_sportsacrobatics_index.md":"e678e26a","page_nestjs_customdecorators.md":"669d7e0d","web_tagml_index.md":"9f02012b","web_javascript_datamonitoring_instanceof.md":"eb8cb0a1","web_javascript_es6_promisedef.md":"21b11e37","page_redis_datatype_index.md":"b5d1c663","web_javascript_deeplearning_object.md":"f5f37a5e","web_javascript_deeplearning_deepclone.md":"8e333b22","page_mysql_index.md":"49c6445d","web_javascript_utils.md":"70d39b54","web_javascript_deeplearning_eventloop.md":"15e6574f","web_javascript_deeplearning_index.md":"98e46449","web_vue_trap_1.md":"5d82488d","web_uniapp_index.md":"734461d0","web_index.md":"efd6f3a2","web_vue_trap_index.md":"edbe2c60","web_vue_reactive_7.md":"4aa6ba3c","web_wsl_index.md":"5a5ba039","page_redis_index.md":"a57091cb","web_vue_v3_index.md":"49c1229c","web_vue_reactive_1.md":"95dc5a45","web_vue_plugin_1.md":"87437ab7","web_vue_reactive_2.md":"cd40e9f3","web_vue_reactive_3.md":"c81e3c25","web_javascript_es6_promise.md":"0ad3a1ac","web_vue_reactive_9.md":"b80c6e81","index.md":"f31eadca","web_vue_reactive_8.md":"7a9dbe06","web_vue_reactive_4.md":"c43c8fb4","web_vue_plugin_index.md":"18b10d72","web_vue_reactive_5.md":"5661d6c0","web_vue_reactive_10.md":"c5db154d","web_vue_reactive_6.md":"6e6942c9","web_typescript_own_typepractice.md":"9effed61","web_vue_data_fun.md":"6af44333","web_vue_reactive_11.md":"a168b28f","web_vue_reactive_12.md":"db4ef53a","web_webbuild_index.md":"3f2c87e7","web_vue_data_index.md":"f7975fd8","page_nestjs_index.md":"283f8678","web_javascript_es6_sourcepromise.md":"1afb794b","web_javascript_es6_index.md":"0350a22c","web_vue_reactive_index.md":"0e2072a1","web_vue_vue.md":"a795d9cc","web_javascript_index.md":"16035278","web_typescript_own_note.md":"9968967e","web_typescript_index.md":"76145c4e"}'),window.__VP_SITE_DATA__=JSON.parse('{"lang":"en-US","dir":"ltr","title":"Ayu","titleTemplate":"JiaJia","description":"黑猫警长的笔记文档","base":"/doc/","head":[],"appearance":true,"themeConfig":{"custom404":["/404.md"],"outline":{"label":"大纲","level":"deep"},"nav":[{"text":"前端","link":"/Web/"},{"text":"后端","link":"/Page/"}],"sidebar":{"/Web/":[{"text":"Web","items":[{"text":"前言","link":"/Web/"},{"text":"HTML","link":"/Web/Tagml/index"},{"text":"CSS","link":"/Web/Css/css"},{"text":"JavaScript","link":"/Web/JavaScript/index"},{"text":"TypeScript","link":"/Web/Typescript/index"},{"text":"Vue","link":"/Web/Vue/Vue"},{"text":"uniapp","link":"/Web/uniapp/index"},{"text":"WSL","link":"/Web/WSL/index"},{"text":"前端工程化","link":"/Web/WebBuild/index"}]},{"text":"源码学习","items":[{"text":"手搓element-plus","link":"/Web/SourceCode/index"}]},{"text":"工具","items":[{"text":"Git","link":"/Web/Git/index"}]},{"text":"公司学习清单","items":[{"text":"2023-3","link":"/Web/StudyList/index"}]}],"/Page/":[{"text":"后端","items":[{"text":"前言","link":"/Page/"},{"text":"NestJs","link":"/Page/NestJs/index"},{"text":"MySQL","link":"/Page/Mysql/index"},{"text":"Redis","link":"/Page/Redis/index"},{"text":"Docker","link":"/Page/Docker/index"},{"text":"Linux","link":"/Page/Linux/index"},{"text":"Vim","link":"/Page/Vim/index"},{"text":"Hobby","link":"/Page/Hobby/index"}]}]},"socialLinks":[{"icon":"github","link":"https://github.com/mufeiyu-ayu"}],"footer":{"message":"Email:2382839439@qq.com Vx:jiaxiaoyi825","copyright":"版权所有 鄂ICP备2023016974号"},"docFooter":{"prev":"道行太浅，回去修炼吧！！！","next":"它丫的，继续冲"},"editLink":{"pattern":"https://github.com/mufeiyu-ayu","text":"Edit this page on GitHub"},"lastUpdated":true,"search":{"provider":"local"}},"locales":{},"scrollOffset":90,"cleanUrls":false}')</script> </body> </html>